# Blade Views Compiler Command

Command line tool Ä‘á»ƒ scan cÃ¡c file blade view vÃ  biÃªn dá»‹ch thÃ nh JS template cho SPA.

## ğŸš€ CÃ¡ch Sá»­ Dá»¥ng

### CÃº PhÃ¡p CÆ¡ Báº£n

```bash
php artisan views:compile {scope} {path} [--output=path]
```

### Tham Sá»‘

- **`scope`**: TÃªn scope Ä‘á»ƒ nhÃ³m cÃ¡c template (vÃ­ dá»¥: `web`, `admin`, `api`)
- **`path`**: ÄÆ°á»ng dáº«n Ä‘áº¿n thÆ° má»¥c chá»©a cÃ¡c file blade view
- **`--output`**: (TÃ¹y chá»n) ÄÆ°á»ng dáº«n file output JS (máº·c Ä‘á»‹nh: `public/build/views.js`)

### VÃ­ Dá»¥ Sá»­ Dá»¥ng

#### 1. BiÃªn dá»‹ch táº¥t cáº£ view trong thÆ° má»¥c `resources/views` vá»›i scope `web`

```bash
php artisan views:compile web resources/views
```

#### 2. BiÃªn dá»‹ch view vá»›i scope `admin` vÃ  output tÃ¹y chá»‰nh

```bash
php artisan views:compile admin resources/views/admin --output=public/js/admin-views.js
```

#### 3. BiÃªn dá»‹ch view vá»›i scope `api` vÃ  output tÃ¹y chá»‰nh

```bash
php artisan views:compile api resources/views/api --output=public/js/api-views.js
```

## ğŸ“ Cáº¥u TrÃºc Output

Command sáº½ táº¡o ra file JS vá»›i cáº¥u trÃºc:

```javascript
// Auto-generated by Laravel Blade Compiler
// Generated at: 2025-08-31 10:59:06

if (typeof SPA === 'undefined') {
    window.SPA = {};
}

if (typeof SPA.views === 'undefined') {
    SPA.views = {};
}

SPA.views['web'] = {
    'partials.footer': {
        filepath: 'partials/footer.blade.php',
        code: `... compiled template code ...`
    },
    'test': {
        filepath: 'test.blade.php',
        code: `... compiled template code ...`
    },
    'welcome': {
        filepath: 'welcome.blade.php',
        code: `... compiled template code ...`
    }
};

// Export for module systems
if (typeof module !== 'undefined' && module.exports) {
    module.exports = SPA.views['web'];
}
```

## ğŸ”„ Chuyá»ƒn Äá»•i Blade Directive

Command sáº½ chuyá»ƒn Ä‘á»•i cÃ¡c directive Blade cÆ¡ báº£n:

### Loops
- `@foreach` â†’ `{{#each}}`
- `@for` â†’ `{{#each}}`
- `@while` â†’ `{{#while}}`

### Conditionals
- `@if` â†’ `{{#if}}`
- `@elseif` â†’ `{{elseif}}`
- `@else` â†’ `{{else}}`

### Variables
- `{{ $var }}` â†’ `{{var}}`
- `{!! $var !!}` â†’ `{{{@html var}}}`

### Includes
- `@include('partial')` â†’ `{{> partial}}`
- `@includeIf('partial')` â†’ `{{> partial}}`

### Components
- `<x-component>` â†’ `{{> component}}`

### CSRF
- `@csrf` â†’ `<input type="hidden" name="_token" value="{{csrf_token}}">`

### Comments
- `{{-- comment --}}` â†’ `{{!-- comment --}}`

## ğŸ“± Sá»­ Dá»¥ng Trong SPA

### 1. Include File JS

```html
<script src="/build/views.js"></script>
```

### 2. Truy Cáº­p Template

```javascript
// Láº¥y template theo tÃªn
const footerTemplate = SPA.views.web['partials.footer'].code;
const testTemplate = SPA.views.web.test.code;

// Sá»­ dá»¥ng vá»›i template engine (Handlebars, Mustache, etc.)
const compiledFooter = Handlebars.compile(footerTemplate);
const html = compiledFooter({ title: 'My Page' });
```

### 3. Sá»­ Dá»¥ng vá»›i Handlebars

```javascript
// ÄÄƒng kÃ½ partial
Handlebars.registerPartial('footer', SPA.views.web['partials.footer'].code);

// Sá»­ dá»¥ng trong template
const template = Handlebars.compile(SPA.views.web.test.code);
const html = template({
    title: 'Welcome',
    users: [
        { name: 'John', email: 'john@example.com' },
        { name: 'Jane', email: 'jane@example.com' }
    ]
});
```

## ğŸ› ï¸ TÃ¹y Chá»‰nh

### ThÃªm Scope Má»›i

```bash
# BiÃªn dá»‹ch view cho admin panel
php artisan views:compile admin resources/views/admin

# BiÃªn dá»‹ch view cho API documentation
php artisan views:compile api-docs resources/views/docs
```

### Output Nhiá»u File

```bash
# Táº¡o file riÃªng cho tá»«ng scope
php artisan views:compile web resources/views --output=public/js/web-views.js
php artisan views:compile admin resources/views/admin --output=public/js/admin-views.js
php artisan views:compile api resources/views/api --output=public/js/api-views.js
```

## ğŸ”§ TÃ­ch Há»£p Vá»›i Build Process

### 1. ThÃªm vÃ o package.json scripts

```json
{
    "scripts": {
        "build:views": "php artisan views:compile web resources/views",
        "build:admin": "php artisan views:compile admin resources/views/admin",
        "build:all": "npm run build:views && npm run build:admin"
    }
}
```

### 2. Cháº¡y trÆ°á»›c khi build

```bash
# Build views trÆ°á»›c
npm run build:views

# Sau Ä‘Ã³ build frontend
npm run build
```

### 3. TÃ­ch há»£p vá»›i Vite

```javascript
// vite.config.js
export default defineConfig({
    plugins: [
        // ... other plugins
    ],
    build: {
        rollupOptions: {
            input: {
                main: 'resources/js/app.js',
                views: 'public/build/views.js' // Include compiled views
            }
        }
    }
});
```

## ğŸ“ LÆ°u Ã

1. **Template Names**: TÃªn template Ä‘Æ°á»£c táº¡o tá»« Ä‘Æ°á»ng dáº«n file, thay `/` báº±ng `.`
2. **Scope Isolation**: Má»—i scope cÃ³ namespace riÃªng trong `SPA.views[scope]`
3. **File Paths**: ÄÆ°á»ng dáº«n tÆ°Æ¡ng Ä‘á»‘i Ä‘Æ°á»£c lÆ°u trong `filepath` Ä‘á»ƒ debug
4. **Error Handling**: Command sáº½ bá» qua cÃ¡c file cÃ³ lá»—i vÃ  tiáº¿p tá»¥c vá»›i file khÃ¡c
5. **Performance**: Sá»­ dá»¥ng Laravel's File facade Ä‘á»ƒ scan hiá»‡u quáº£

## ğŸš¨ Troubleshooting

### Lá»—i "Path khÃ´ng tá»“n táº¡i"
- Kiá»ƒm tra Ä‘Æ°á»ng dáº«n cÃ³ chÃ­nh xÃ¡c khÃ´ng
- Äáº£m báº£o thÆ° má»¥c tá»“n táº¡i

### KhÃ´ng tÃ¬m tháº¥y file blade
- Kiá»ƒm tra file cÃ³ Ä‘uÃ´i `.blade.php` khÃ´ng
- Kiá»ƒm tra quyá»n truy cáº­p thÆ° má»¥c

### Lá»—i biÃªn dá»‹ch
- Kiá»ƒm tra syntax Blade cÃ³ Ä‘Ãºng khÃ´ng
- Xem log lá»—i trong terminal

## ğŸ”„ Cáº­p Nháº­t

Äá»ƒ cáº­p nháº­t views sau khi thay Ä‘á»•i:

```bash
# Cháº¡y láº¡i command
php artisan views:compile web resources/views

# Hoáº·c sá»­ dá»¥ng watch mode (náº¿u cÃ³)
php artisan views:compile web resources/views --watch
```

{"version":3,"file":"core-1c191ae7.js","mappings":"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","sources":["webpack://App/./resources/js/app/core/ViewTemplate.js","webpack://App/./resources/js/app/core/ViewState.js","webpack://App/./resources/js/app/core/ViewEngine.js","webpack://App/./resources/js/app/core/ViewConfig.js","webpack://App/./resources/js/app/core/SEOConfig.js"],"sourcesContent":["// Auto-generated ViewTemplate.js\n// This file imports all view functions and assigns them to templates\n\nimport { ComponentsTset } from './../views/ComponentsTset.js';\nimport { WebDocs } from './../views/WebDocs.js';\nimport { WebAbout } from './../views/WebAbout.js';\nimport { WebHome } from './../views/WebHome.js';\nimport { WebExamples } from './../views/WebExamples.js';\nimport { WebContact } from './../views/WebContact.js';\nimport { LayoutsTestLayout } from './../views/LayoutsTestLayout.js';\nimport { LayoutsBase } from './../views/LayoutsBase.js';\nimport { LayoutsBaseWithViewId } from './../views/LayoutsBaseWithViewId.js';\nimport { LayoutsAdmin } from './../views/LayoutsAdmin.js';\nimport { LayoutsBaseOld } from './../views/LayoutsBaseOld.js';\nimport { PartialsTestPartial } from './../views/PartialsTestPartial.js';\nimport { PartialsAssetsScripts } from './../views/PartialsAssetsScripts.js';\nimport { PartialsFooter } from './../views/PartialsFooter.js';\nimport { PartialsDataExample } from './../views/PartialsDataExample.js';\n\nexport const ViewTemplates = {\n    'components.tset': ComponentsTset,\n    'web.docs': WebDocs,\n    'web.about': WebAbout,\n    'web.home': WebHome,\n    'web.examples': WebExamples,\n    'web.contact': WebContact,\n    'layouts.test-layout': LayoutsTestLayout,\n    'layouts.base': LayoutsBase,\n    'layouts.base-with-view-id': LayoutsBaseWithViewId,\n    'layouts.admin': LayoutsAdmin,\n    'layouts.base-old': LayoutsBaseOld,\n    'partials.test-partial': PartialsTestPartial,\n    'partials.assets-scripts': PartialsAssetsScripts,\n    'partials.footer': PartialsFooter,\n    'partials.data-example': PartialsDataExample,\n};\n","import logger from \"./services/LoggerService.js\";\n\nexport class ViewState {\n    constructor(view) {\n        // Private properties using naming convention for browser compatibility\n        this._viewRef = view;\n        /**\n         * @type {Array<[any, function, string]>}\n         */\n        this._states = [];\n        this._stateIndex = 0;\n        this._canUpdateStateByKey = true;\n        /**\n         * @type {Map<string, Array<Function>>}\n         */\n        this.__listeners = new Map();\n\n        /**\n         * @type {Array<string>}\n         */\n        this.__ownProperties = ['_states', '_stateIndex', '_canUpdateStateByKey', '_viewRef', '__listeners', '__ownProperties', '__ownMethods', '__setters__'];\n        /**\n         * @type {Array<string>}\n         */\n        this.__ownMethods = ['__commitStateChange', '__setState', '__useState', '__updateStateByKey', '__register', '__lockUpdateRealState', '__subscribe', '__toJSON', 'toJSON', 'toString'];\n\n        this.__setters__ = {};\n\n        Object.defineProperty(this, 'on', {\n            value: (key, callback) => this.__subscribe(key, callback),\n            writable: true,\n            configurable: true,\n            enumerable: false,\n        });\n        Object.defineProperty(this, 'off', {\n            value: (key, callback) => this.__unsubscribe(key, callback),\n            writable: true,\n            configurable: true,\n            enumerable: false,\n        });\n    }\n    // Define public methods using Object.defineProperties for backward compatibility\n\n    // Private methods using naming convention\n    __commitStateChange(index, oldValue, stateKey = null) {\n        // Implementation placeholder\n        let key = stateKey ? stateKey : (this._states[index] ? this._states[index][2] : index);\n        const listeners = this.__listeners.get(key);\n        if (listeners) {\n            listeners.forEach(callback => callback(this._states[index][0], oldValue));\n        }\n        if(this._viewRef){\n\n        }\n\n    }\n\n    /**\n     * set state nội bộ\n     * @param {number} index index\n     * @param {*} value giá trị \n     * @param {function} setValue hàm set giá trị\n     * @param {string} key key của state\n     * @returns {[*, function, string]}\n     */\n    __setState(index, value, setValue = () => { }, key = null) {\n        this._states[index] = [value, setValue, key??index];\n        return [value, setValue, key??index];\n    }\n\n    /**\n     * tương tự useState\n     * @param {*} value giá trị của state\n     * @param {string} key key của state (không bắt buộc)\n     * @returns {Array<[*, function, string]>}\n     */\n    __useState(value, key = null) {\n        const index = this._stateIndex++;\n        const stateKey = key ?? index;\n        const setValue = (value) => {\n            const oldValue = this._states[index][0];\n            this._states[index][0] = value;\n            this.__commitStateChange(index, oldValue, stateKey);\n        };\n        this.__setState(index, value, setValue, stateKey);\n        \n        if (!this.__ownProperties.includes(stateKey) && !this.__ownMethods.includes(stateKey)) {\n\n            Object.defineProperty(this, stateKey, {\n                get: () => {\n                    return this._states[index][0];\n                },\n                set: (value) => {\n                    logger.log(\"Bạn không thể thiết lập giá trị cho \" + stateKey + \" theo cách này\");\n                },\n                configurable: false,\n                enumerable: true,\n            });\n\n        }\n        return [value, setValue, stateKey];\n    }\n\n    /**\n     * cập nhật state value theo key\n     * @param {string} key key của state\n     * @param {*} value giá trị\n     * @returns {*}\n     */\n    __updateStateByKey(key, value) {\n        const index = this._states.findIndex(state => state[2] === key);\n        logger.log(`Updating state by key: ${key} at index: ${index} with value:`, value);\n        if (index !== -1) {\n            if (!this._canUpdateStateByKey) {\n                logger.log(`State updates are locked for key: ${key}`);\n                return this._states[index][0];\n            }\n\n            const oldValue = this._states[index][0];\n            this._states[index][0] = value;\n            this.__commitStateChange(index, oldValue, key);\n        } else {\n            logger.warn(`State key not found: ${key}`);\n        }\n        return value;\n    }\n\n    /**\n     * đăng ký key - value cho state - trả về hàm setValue cho key tương ứng\n     * @param {string} key key của state\n     * @param {*} value giá trị\n     * @returns {function}\n     */\n    __register(key, value) {\n        return this.__useState(value, key)[1];\n    }\n\n    __lockUpdateRealState() {\n        this._canUpdateStateByKey = false;\n    }\n\n    __subscribe(key, callback) {\n        if (typeof key !== 'string' || this.__ownProperties.includes(key) || this.__ownMethods.includes(key)) {\n            return false\n        }\n        if (callback && typeof callback !== 'function') {\n            throw new Error('Callback must be a function');\n        }\n        if (!this.__listeners.has(key)) {\n            this.__listeners.set(key, []);\n        }\n        this.__listeners.get(key).push(callback);\n        let index = this.__listeners.get(key).length - 1;\n        return () => {\n            this.__listeners.get(key).splice(index, 1);\n            if (this.__listeners.get(key).length === 0) {\n                this.__listeners.delete(key);\n            }\n        };\n    }\n\n    __unsubscribe(key, callback = null) {\n        if (typeof key !== 'string' || this.__ownProperties.includes(key) || this.__ownMethods.includes(key)) {\n            return;\n        }\n        if (callback && typeof callback !== 'function') {\n            return;\n        }\n        if (callback) {\n            let index = this.__listeners.get(key).indexOf(callback);\n            if (index !== -1) {\n                this.__listeners.get(key).splice(index, 1);\n                if (this.__listeners.get(key).length === 0) {\n                    this.__listeners.delete(key);\n                }\n            }\n        } else {\n            this.__listeners.delete(key);\n        }\n    }\n\n\n    __reset() {\n        this._stateIndex = 0;\n        this._canUpdateStateByKey = true;\n        this.__listeners.clear();\n    }\n\n\n\n\n\n\n\n    __toJSON() {\n        const data = {};\n        this._states.forEach((state, index) => {\n            const key = state[2]; // state[2] is the key\n            data[key] = state[0]; // state[0] is the value\n        });\n        return data;\n    }\n\n    // Public methods\n    toJSON() {\n        return this.__toJSON();\n    }\n\n    toString() {\n        return JSON.stringify(this.__toJSON());\n    }\n\n\n\n\n}\n\n","/**\n * View Engine class for managing view instances\n * @param {Object} config - View configuration\n */\nimport { __defineGetters, __defineMethods, __defineProperties, __defineProps, deleteProp, hasData, uniqId } from '../helpers/utils.js';\nimport { FollowingBlock } from './FollowingBlock.js';\nimport OneMarkup from './OneMarkup.js';\nimport { ViewState } from './ViewState.js';\nimport logger from './services/LoggerService.js';\nimport { ATTR, FORBIDDEN_KEYS } from './ViewConfig.js';\n\nexport class ViewEngine {\n    constructor(path, config) {\n\n        // Private properties using naming convention for browser compatibility\n        /**\n         * @type {Application}\n         */\n        this.App = null;\n        /**\n         * @type {boolean}\n         */\n        this.isSuperView = false;\n        /**\n         * @type {function}\n         */\n        this._emptyFn = () => { };\n        /**\n         * @type {string}\n         */\n        this.id = null;\n        /**\n         * @type {function}\n         */\n        this.init = this._emptyFn;\n        /**\n         * @type {ViewEngine}\n         */\n        this.parent = null;\n        /**\n         * @type {Array<ViewEngine>}\n         */\n        this.children = [];\n        /**\n         * @type {ViewEngine}\n         */\n        this.superView = null;\n        /**\n         * @type {string}\n         */\n        this.superViewPath = null;\n        /**\n         * @type {string}\n         */\n        this.superViewId = null;\n        /**\n         * @type {boolean}\n         */\n        this.hasSuperView = false;\n\n        /**\n         * @type {string}\n         */\n        this.originalViewPath = null;\n        /**\n         * @type {string}\n         */\n        this.originalViewId = null;\n        /**\n         * @type {ViewEngine}\n         */\n        this.originalView = null;\n        /**\n         * @type {boolean}\n         */\n        this.hasAwaitData = false;\n        /**\n         * @type {boolean}\n         */\n        this.hasFetchData = false;\n        /**\n         * @type {Object}\n         */\n        this.fetch = {};\n        /**\n         * @type {boolean}\n         */\n        this.usesVars = false;\n        /**\n         * @type {boolean}\n         */\n        this.hasSections = false;\n        /**\n         * @type {Array<string>}\n         */\n        this.renderLongSections = [];\n        /**\n         * @type {boolean}\n         */\n        this.hasSectionPreload = false;\n        /**\n         * @type {boolean}\n         */\n        this.hasPrerender = false;\n        /**\n         * @type {Object}\n         */\n        this.sections = {};\n        /**\n         * @type {function}\n         */\n        this.addCSS = this._emptyFn;\n        this.removeCSS = this._emptyFn;\n        /**\n         * @type {Array<string>}\n         */\n        this.resources = [];\n        this.userDefined = {};\n        /**\n         * @type {Object}\n         */\n        this.events = {};\n        /**\n         * @type {Object}\n         */\n        this.eventHandlers = {};\n        /**\n         * @type {Object}\n         */\n        this.data = {};\n        /**\n         * @type {ViewState}\n         */\n        this.states = {};\n        this.urlPath = '';\n        /**\n         * @type {boolean}\n         */\n        this.isInitlized = false;\n\n        /**\n         * @type {Object}\n         */\n        this.wrapperConfig = { enable: false, tag: null, follow: true, attributes: {}, ...(typeof config?.wrapperConfig === 'object' ? config.wrapperConfig : {}) };\n\n        /**\n         * @type {TemplateEngine}\n         */\n        this.templateEngine = null;\n\n        // Initialize\n        this.path = path;\n        this.config = config || {};\n\n\n\n        this.wrapTag = null;\n\n\n        /**\n         * @type {Map<string, FollowingBlock>}\n         */\n        this.followingBlocks = new Map();\n\n        this.followingConfig = [];\n        this.followingIndex = 0;\n        this.followingScanIndex = 0;\n        this.followingIDs = [];\n        this.followingPrerenderIDs = [];\n        this.followingRenderIDs = [];\n\n\n        this.subscribeStates = true;\n\n        this.childrenConfig = [];\n        this.childrenIndex = 0;\n        this.refreshChildrenIndex = 0;\n\n        /**\n         * @type {boolean}\n         */\n        this.isRendering = false;\n        /**\n         * @type {boolean}\n         */\n        this.isRendered = false;\n\n        this.isMounted = false;\n        this.isDestroyed = false; // Flag to prevent processing after destroy\n        this.isScanning = false;\n        this.isScanned = false;\n\n\n        this.isReady = false;\n\n        /**\n         * @type {OneMarkupModel}\n         */\n        this.markup = null;\n        /**\n         * @type {Array<OneMarkupModel>}\n         */\n        this.refElements = [];\n\n\n        this.eventListenerStatus = false;\n\n        this.eventListeners = [];\n\n        this.eventQuickHandles = [];\n\n        this.isVirtualRendering = false;\n        this.cachedSections = {};\n        this.renderedContent = null;\n\n        /**\n         * @type {Object<{name: string, id: string, index: number, view: ViewEngine, data: Object, subscribe: Array<string>}>}\n         */\n        this.__scope = null;\n        this.isRefreshing = false;\n\n        this.changeStateQueueCount = 0;\n        this.changedStateKeys = new Set(); // Use Set to avoid duplicates\n        this._stateChangePending = false; // Flag to track if processing is scheduled\n\n        /**\n         * @type {LoopContext}\n         */\n        this.loopContext = null;\n\n        this.isCommitedConstructorData = false;\n\n\n    }\n\n\n    /**\n     * Setup the view engine with configuration\n     * @param {string} path - View path\n     * @param {Object} config - View configuration\n     */\n    setup(path, config) {\n        if (this.isInitlized) {\n            return this;\n        }\n\n        // Set config and path\n        this.path = path;\n        this.config = config || {};\n\n        // Call _initialize to do the actual setup\n        this.initialize();\n        return this;\n    }\n\n\n    /**\n     * Initialize the view engine with configuration\n     * @private\n     */\n    initialize() {\n        if (this.isInitlized) {\n            return;\n        }\n\n        this.isInitlized = true;\n        const config = this.config;\n\n        // Set basic properties (giữ nguyên tên từ code gốc)\n        this.id = config.viewId || uniqId();\n        deleteProp(config, 'viewId');\n        this.init = config.init || this._emptyFn;\n        deleteProp(config, 'init');\n        this.addCSS = config.addCSS || this._emptyFn;\n        deleteProp(config, 'addCSS');\n        this.removeCSS = config.removeCSS || this._emptyFn;\n        deleteProp(config, 'removeCSS');\n        this.states = config.states || new ViewState(this);\n        deleteProp(config, 'states');\n        this.superViewPath = config.superViewPath || config.superView;\n        deleteProp(config, 'superViewPath');\n        deleteProp(config, 'superView');\n        this.hasSuperView = config.hasSuperView;\n        deleteProp(config, 'hasSuperView');\n        this.hasAwaitData = config.hasAwaitData;\n        deleteProp(config, 'hasAwaitData');\n        this.hasFetchData = config.hasFetchData;\n        deleteProp(config, 'hasFetchData');\n        this.fetch = config.fetch;\n        deleteProp(config, 'fetch');\n        this.usesVars = config.usesVars;\n        deleteProp(config, 'usesVars');\n        this.hasSections = config.hasSections;\n        deleteProp(config, 'hasSections');\n        this.hasSectionPreload = config.hasSectionPreload;\n        deleteProp(config, 'hasSectionPreload');\n        this.renderLongSections = config.renderLongSections || [];\n        deleteProp(config, 'renderLongSections');\n        this.hasPrerender = config.hasPrerender;\n        deleteProp(config, 'hasPrerender');\n        this.sections = config.sections;\n        deleteProp(config, 'sections');\n        this.wrapperConfig = { ...this.wrapperConfig, ...(typeof config.wrapperConfig === 'object' ? config.wrapperConfig : {}) };\n        deleteProp(config, 'wrapperConfig');\n        this.resources = config.resources;\n        deleteProp(config, 'resources');\n        this.userDefined = config.userDefined;\n        deleteProp(config, 'userDefined');\n        // Initialize arrays and objects\n        this.master = null;\n        this.children = [];\n        this.events = {};\n        this.eventHandlers = {};\n\n        // Process defined properties and methods (giữ nguyên logic từ code gốc)\n        this.processDefinedProperties(config);\n\n        if (config && config.data && typeof config.data === 'object' && config.data.__SSR_VIEW_ID__) {\n            config.data.__SSR_VIEW_ID__ = null;\n            deleteProp(config.data, '__SSR_VIEW_ID__');\n\n        }\n\n        // Merge data\n        this.data = { ...(this.data || {}), ...(config.data || {}) };\n        this.commitConstructorData();\n    }\n\n    /**\n     * Process defined properties and methods from config\n     * @private\n     */\n    processDefinedProperties(config) {\n        let definedProps = {};\n        let definedMethods = {};\n\n        if (config.__props__ && config.__props__.length > 0) {\n            config.__props__.forEach(prop => {\n                if (typeof config[prop] === 'function') {\n                    definedMethods[prop] = config[prop].bind(this);\n                }\n                else if (typeof config[prop] !== 'undefined') {\n                    definedProps[prop] = config[prop];\n                }\n            });\n        }\n        /**\n         * lifecycle methods\n         * beforeCreate hàm dược gọi trước khi view được tạo\n         * created hàm dược gọi sau khi view được tạo\n         * beforeMount hàm dược gọi trước khi view được mount\n         * mounted hàm dược gọi sau khi view được mount\n         * beforeUpdate hàm dược gọi trước khi view được update\n         * updated hàm dược gọi sau khi view được update\n         * beforeUnmount hàm dược gọi trước khi view được unmount\n         * unmounted hàm dược gọi sau khi view được unmount\n         */\n        if (this.userDefined) {\n            Object.entries(this.userDefined).forEach(([key, value]) => {\n                if (FORBIDDEN_KEYS.includes(key)) {\n                    return;\n                }\n                if (typeof value === 'function') {\n                    definedMethods[key] = value.bind(this);\n                }\n                else {\n                    definedProps[key] = value;\n                }\n            });\n        }\n\n        __defineProps(this, definedProps, {\n            writable: true,\n            configurable: true,\n            enumerable: true,\n        });\n\n        __defineMethods(this, definedMethods);\n    }\n\n\n\n    setScope(scope) {\n        this.__scope = scope;\n    }\n\n    loadServerData(_serverData = {}) {\n        const [data, events] = _serverData;\n        const result = typeof this.config.loadServerData === 'function' ? this.config.loadServerData.apply(this, [{ ...this.App.View.data, ...this.data, ..._data }]) : this.config.loadServerData;\n        if (typeof result === 'object' && result.constructor === this.constructor) {\n            return result;\n        }\n        return result;\n    }\n\n    commitConstructorData() {\n        if (this.isCommitedConstructorData) {\n            return;\n        }\n        if (hasData(this.data) && typeof this.config.updateVariableData === 'function') {\n            this.config.updateVariableData.apply(this, [{ ...this.App.View.data, ...this.data }]);\n            this.isCommitedConstructorData = true;\n        }\n        if(typeof this.config.commitConstructorData === 'function'){\n            this.config.commitConstructorData.apply(this, []);\n        }\n        \n    }\n\n    /**\n     * Add event configuration for view engine\n     * @param {string} eventType - Type of event\n     * @param {Array} handlers - Array of handler objects\n     * @returns {string} Event attribute string\n     * @example\n     * <AppViewEngine>.addEventConfig('click', [{handler: 'handleClick', params: [1, 2, 3]}]);\n     */\n    addEventConfig(eventType, handlers) {\n        if (typeof eventType !== 'string' || eventType === '') {\n            return;\n        }\n        if (typeof handlers !== 'object' || handlers === null) {\n            return;\n        }\n        let eventID = uniqId();\n        return this.addEventStack(eventType, eventID, handlers);\n    }\n\n\n\n    /**\n     * Render the view with data\n     * @param {Object} _data - Additional data to merge\n     * @returns {string|Object} Rendered content\n     */\n    render() {\n        let renderFollowIDStart = this.followingIDs.length;\n        this.commitConstructorData();\n        console.log(`path: ${this.path}`, this);\n        const result = this.config.render.apply(this, []);\n        this.renderedContent = result;\n        let renderFollowIDEnd = this.followingIDs.length;\n        if (renderFollowIDEnd >= renderFollowIDStart) {\n            this.followingRenderIDs.push(...this.followingIDs.slice(renderFollowIDStart));\n        }\n\n        if (typeof result === 'string' && result.trim() !== '' && this.isHtmlString(result)) {\n            this.renderedContent = this.addXRefViewToRootElements(result);\n        }\n        return this.renderedContent;\n    }\n\n    /**\n     * Virtual render the view with data (Scan version)\n     * @param {Object} _data - Additional data to merge\n     * @returns {string|Object} Virtual rendered content\n     */\n    virtualRender() {\n        this.isScanning = true;\n        this.isVirtualRendering = true;\n        let renderFollowIDStart = this.followingIDs.length;\n        this.commitConstructorData();\n        const result = this.config.render.apply(this, []);\n        let renderFollowIDEnd = this.followingIDs.length;\n        if (renderFollowIDEnd >= renderFollowIDStart) {\n            this.followingRenderIDs.push(...this.followingIDs.slice(renderFollowIDStart));\n        }\n        this.isVirtualRendering = false;\n        this.isScanning = false;\n        return result;\n    }\n\n\n\n\n    /**\n     * Prerender the view with data\n     * @param {Object} _data - Additional data to merge\n     * @returns {string|Object} Prerendered content\n     */\n    prerender(_data = {}) {\n        let renderFollowIDStart = this.followingIDs.length;\n        this.commitConstructorData();\n        const result = this.config.prerender.apply(this, []);\n        let renderFollowIDEnd = this.followingIDs.length;\n        if (renderFollowIDEnd >= renderFollowIDStart) {\n            this.followingPrerenderIDs.push(...this.followingIDs.slice(renderFollowIDStart));\n        }\n        if (typeof result === 'string' && result.trim() !== '' && this.isHtmlString(result)) {\n            return this.addXRefViewToRootElements(result);\n        }\n        return result;\n    }\n\n    /**\n     * Virtual prerender the view with data (Scan version)\n     * @param {Object} _data - Additional data to merge\n     * @returns {string|Object} Virtual prerendered content\n     */\n    virtualPrerender(_data = {}) {\n        this.isScanning = true;\n        this.isVirtualRendering = true;\n        let renderFollowIDStart = this.followingIDs.length;\n        this.commitConstructorData();\n        const result = this.config.prerender.apply(this, []);\n        let renderFollowIDEnd = this.followingIDs.length;\n        if (renderFollowIDEnd >= renderFollowIDStart) {\n            this.followingPrerenderIDs.push(...this.followingIDs.slice(renderFollowIDStart));\n        }\n        this.isVirtualRendering = false;\n        this.isScanning = false;\n        return result;\n    }\n\n\n\n\n    /**\n     * Replace view content with new HTML\n     * @param {string} htmlString - New HTML content\n     * @returns {boolean} True if replaced successfully\n     */\n    replaceView(htmlString) {\n        if (this.isHtmlString(htmlString)) {\n            const container = document.createElement('div');\n            container.innerHTML = htmlString;\n            const frag = container.content;\n            const oldElements = document.querySelectorAll(`[x-ref-view=\"${this.id}\"]`);\n            const elemtntCount = oldElements.length;\n            for (let i = elemtntCount - 1; i > 0; i--) {\n                const oldElement = oldElements[i];\n                const newElement = frag.childNodes[i];\n                oldElement.parentNode.replaceChild(newElement, oldElement);\n            }\n            const oldElement = oldElements[0];\n            oldElement.parentNode.replaceChild(frag, oldElement);\n            return true;\n        }\n        return false;\n    }\n\n\n    /** lifecycle methods */\n\n    /**\n     * Lifecycle: Called before view is created (giữ nguyên tên từ code gốc)\n     */\n\n    beforeCreate() {\n        if (typeof this.userDefined.beforeCreate === 'function') {\n            this.userDefined.beforeCreate.call(this);\n        }\n    }\n    /**\n     * Lifecycle: Called after view is created (giữ nguyên tên từ code gốc)\n     */\n    created() {\n        if (typeof this.userDefined.created === 'function') {\n            this.userDefined.created.call(this);\n        }\n    }\n\n    /**\n     * Lifecycle: Called before view is updated (giữ nguyên tên từ code gốc)\n     */\n    beforeUpdate() {\n        if (typeof this.userDefined.beforeUpdate === 'function') {\n            this.userDefined.beforeUpdate.call(this);\n        }\n    }\n    /**\n     * Lifecycle: Called after view is updated (giữ nguyên tên từ code gốc)\n     */\n    updated() {\n        if (typeof this.userDefined.updated === 'function') {\n            this.userDefined.updated.call(this);\n        }\n    }\n\n    beforeInit() {\n        if (typeof this.userDefined.beforeInit === 'function') {\n            this.userDefined.beforeInit.call(this);\n        }\n    }\n    init() {\n        if (typeof this.userDefined.init === 'function') {\n            this.userDefined.init.call(this);\n        }\n    }\n    afterInit() {\n        if (typeof this.userDefined.afterInit === 'function') {\n            this.userDefined.afterInit.call(this);\n        }\n    }\n    /**\n     * Lifecycle: Called before view is destroyed (giữ nguyên tên từ code gốc)\n     */\n    beforeDestroy() {\n        if (typeof this.userDefined.beforeDestroy === 'function') {\n            this.userDefined.beforeDestroy.call(this);\n        }\n    }\n    /**\n     * Lifecycle: Called after view is destroyed (giữ nguyên tên từ code gốc)\n     */\n    destroyed() {\n        if (typeof this.userDefined.destroyed === 'function') {\n            this.userDefined.destroyed.call(this);\n        }\n    }\n    /**\n     * Lifecycle: Called before view is mounted (giữ nguyên tên từ code gốc)\n     */\n    beforeMount() {\n        if (typeof this.userDefined.beforeMount === 'function') {\n            this.userDefined.beforeMount.call(this);\n        }\n    }\n\n\n    /**\n     * Lifecycle: Called when view is mounted (giữ nguyên tên từ code gốc)  \n     */\n    mounted() {\n        if (!this.isMounted) {\n            if (typeof this.userDefined.mounted === 'function') {\n                this.userDefined.mounted.call(this);\n            }\n\n            this.startEventListener();\n            this.isMounted = true;\n        }\n\n        if (this.originalView && this.originalView instanceof ViewEngine) {\n            this.originalView.onSuperViewMounted();\n        }\n        if (this.children && this.children.length > 0) {\n            this.children.forEach(child => {\n                if (child && child instanceof ViewEngine) {\n                    child.onParentMounted();\n                }\n            });\n        }\n        if (this.followingBlocks && this.followingBlocks.size > 0) {\n            this.followingBlocks.forEach(block => {\n                block.mounted();\n            });\n        }\n    }\n\n    /**\n     * Lifecycle: Called before view is unmounted (giữ nguyên tên từ code gốc)\n     */\n    beforeUnmount() {\n        if (typeof this.userDefined.beforeUnmounted === 'function') {\n            this.userDefined.beforeUnmounted.call(this);\n        }\n    }\n\n    /**\n     * Lifecycle: Called when view is unmounted (giữ nguyên tên từ code gốc)\n     */\n    unmounted() {\n        if (this.isMounted) {\n            if (typeof this.userDefined.unmounted === 'function') {\n                this.userDefined.unmounted.call(this);\n            }\n            this.stopEventListener();\n            this.isMounted = false;\n        }\n        if (this.originalView && this.originalView instanceof ViewEngine) {\n            this.originalView.onSuperViewUnmounted();\n        }\n        if (this.children && this.children.length > 0) {\n            this.children.forEach(child => {\n                if (child && child instanceof ViewEngine) {\n                    child.onParentUnmounted();\n                }\n            });\n        }\n        if (this.followingBlocks && this.followingBlocks.size > 0) {\n            this.followingBlocks.forEach(block => {\n                block.unmounted();\n            });\n        }\n    }\n\n\n    /**\n     * Lifecycle: Called when view is destroyed (giữ nguyên tên từ code gốc)\n     */\n    destroy() {\n        // Mark as destroyed to prevent processing after destroy\n        this.isDestroyed = true;\n\n        // Reset pending flag to prevent processing after destroy\n        this._stateChangePending = false;\n\n        // Clear state change collections\n        if (this.changedStateKeys) {\n            this.changedStateKeys.clear();\n        }\n        this.changeStateQueueCount = 0;\n\n        this.unmounted();\n        if (this.originalView && this.originalView instanceof ViewEngine) {\n            this.originalView.destroy();\n        }\n        if (this.children && this.children.length > 0) {\n            this.children.forEach(child => child.destroy());\n        }\n        if (this.followingBlocks && this.followingBlocks.size > 0) {\n            this.followingBlocks.forEach(block => block.destroy());\n            this.followingBlocks.clear();\n        }\n        if (this.refElements && this.refElements.length > 0) {\n            this.refElements.forEach(element => element.parentNode && element.parentNode.removeChild(element));\n            this.refElements = [];\n        }\n    }\n\n    refresh() {\n        this.isRefreshing = true;\n        // TH1: có super view\n        if (this.parent && this.parent instanceof ViewEngine) {\n            this.parent.refresh();\n        }\n        // TH2: nếu là super view\n        // TH3: nếu là page view\n        // TH4: nếu là child view\n    }\n    /**\n     * Lifecycle: Called when super view is mounted (giữ nguyên tên từ code gốc)\n     */\n    onSuperViewMounted() {\n        this.mounted();\n    }\n\n    /**\n     * Lifecycle: Called when super view is unmounted (giữ nguyên tên từ code gốc)\n     */\n    onSuperViewUnmounted() {\n\n    }\n\n    /**\n     * Lifecycle: Called when parent view is mounted (giữ nguyên tên từ code gốc)\n     */\n    onParentMounted() {\n        this.mounted();\n    }\n    /**\n     * Lifecycle: Called when parent view is unmounted (giữ nguyên tên từ code gốc)\n     */\n    onParentUnmounted() {\n        // Placeholder for when parent view is unmounted\n    }\n\n\n\n    /**\n     * Hàm parse string HTML thành DOM, thêm thuộc tính x-ref-view cho các phần tử con level 0, trả về string HTML mới.\n     * @param {string} htmlString - Chuỗi HTML đầu vào\n     * @param {string|number} id - Giá trị cho thuộc tính x-ref-view\n     * @returns {string} Chuỗi HTML đã thêm thuộc tính x-ref-view cho các phần tử level 0\n     */\n    addXRefViewToRootElements(htmlString) {\n        // Tạo một container ảo để parse HTML\n        const container = document.createElement('div');\n        container.innerHTML = htmlString;\n\n        // Lặp qua các phần tử con trực tiếp (level 0)\n        Array.from(container.children).forEach(child => {\n            child.setAttribute('x-ref-view', this.id);\n        });\n\n        // Trả về HTML đã được thêm thuộc tính\n        return container.innerHTML;\n    }\n\n    /**\n     * Check if string is HTML\n     * @param {string} str - String to check\n     * @returns {boolean} True if HTML string\n     * @private\n     */\n    isHtmlString(str) {\n        return /<[a-z][\\s\\S]*>/i.test(str);\n    }\n\n\n\n    renderPlaceholder() {\n        return `<div class=\"${ATTR.className('placeholder')}\" ${ATTR.KEYS.VIEW_ID}=\"${this.id}\"></div>`;\n    }\n\n    showError(error) {\n        if (this.isSuperView) {\n            return `<div class=\"${ATTR.className('ERROR_VIEW')}\">${error}</div>`;\n        }\n        else if (this.hasSuperView) {\n            if (this.renderLongSections.length > 0) {\n                return this.renderLongSections.map(section => {\n                    return this.App.View.section(section, `<div class=\"${ATTR.className('section-error')}\" ${ATTR.KEYS.VIEW_SECTION_REF}=\"${this.id}\">${error}</div>`, 'html');\n                }).join('');\n            }\n            else {\n                return `<div class=\"${ATTR.className('ERROR_VIEW')}\" ${ATTR.KEYS.VIEW_ID}=\"${this.id}\">${error}</div>`;\n            }\n        }\n        else {\n            if (this.renderLongSections.length > 0) {\n                return this.renderLongSections.map(section => {\n                    return this.App.View.section(section, `<div class=\"${ATTR.className('section-error')}\" ${ATTR.KEYS.VIEW_SECTION_REF}=\"${this.id}\">${error}</div>`, 'html');\n                }).join('');\n            }\n            return `<div class=\"${ATTR.className('ERROR_VIEW')}\" ${ATTR.KEYS.VIEW_ID}=\"${this.id}\">${error}</div>`;\n        }\n    }\n\n    showErrorScan(error) {\n        return null;\n    }\n\n\n    resetOriginalView() {\n        if (this.originalView && this.originalView instanceof ViewEngine) {\n            this.originalView.destroy();\n        }\n    }\n\n    ejectOriginalView() {\n        if (this.originalView && this.originalView instanceof ViewEngine) {\n            this.originalView = null;\n            this.originalViewId = null;\n            this.originalViewPath = null;\n        }\n    }\n\n    /**\n     * Remove this view and all children\n     * @returns {AppViewEngine} This instance for chaining\n     */\n    remove() {\n        this.master?.removeChild(this);\n        this.children.forEach(child => child.remove());\n        this.master = null;\n        this.children = [];\n        return this;\n    }\n\n    /**\n     * Insert resources into DOM\n     */\n    insertResources() {\n        this.resources.forEach(resource => {\n            if (document.querySelector(`[data-resource-uuid=\"${resource.uuid}\"]`)) {\n                return;\n            }\n            const element = document.createElement(resource.tag);\n            Object.entries(resource.attrs).forEach(([key, value]) => {\n                element.setAttribute(key, value);\n            });\n            element.setAttribute('data-resource-uuid', resource.uuid);\n            if (resource.tag === 'script') {\n                document.body.appendChild(element);\n            }\n            else if (resource.tag === 'link') {\n                document.head.appendChild(element);\n            }\n            else if (resource.tag === 'style') {\n                document.head.appendChild(element);\n            }\n            document.head.appendChild(element);\n        });\n    }\n\n    /**\n     * Remove resources from DOM\n     */\n    removeResources() {\n        this.resources.forEach(resource => {\n            const element = document.querySelector(`[data-resource-uuid=\"${resource.uuid}\"]`);\n            if (element) {\n                element.remove();\n            }\n        });\n    }\n\n\n    __showError(error) {\n        logger.error(`ViewEngine Error [${this.path}]: ${error}`);\n        return this.showError(error);\n    }\n\n\n\n    __section(name, content, type) {\n        this.cachedSections[name] = content;\n        return this.App.View.section(name, content, type);\n    }\n\n    __yield(name, defaultValue = '') {\n        return this.App.View.yield(name, defaultValue);\n    }\n\n    __yieldContent(name, defaultValue = '') {\n        return this.App.View.yieldContent(name, defaultValue);\n    }\n\n    __include(path, data = {}) {\n        const parentData = this.data ? this.data : {};\n        if (parentData.__SSR_VIEW_ID__) {\n            parentData.__SSR_VIEW_ID__ = null;\n            delete parentData.__SSR_VIEW_ID__;\n        }\n        const viewInstance = this.App.View.include(path, { ...parentData, ...data });\n        if (!viewInstance) {\n            return null;\n        }\n        viewInstance.setParent(this);\n        this.addChild(viewInstance, data);\n        return viewInstance;\n    }\n\n    __includeif(path, data = {}) {\n        if (!this.App.View.exists(path)) {\n            return null;\n        }\n        return this.__include(path, data);\n    }\n\n    __includewhen(condition, path, data = {}) {\n        if (!condition) {\n            return null;\n        }\n        return this.__include(path, data);\n    }\n\n    __extends(path, data = {}) {\n        const originData = this.data ? this.data : {};\n        if (originData.__SSR_VIEW_ID__) {\n            originData.__SSR_VIEW_ID__ = null;\n            delete originData.__SSR_VIEW_ID__;\n        }\n        const viewInstance = this.App.View.extendView(path, { ...originData, ...data });\n        if (!viewInstance) {\n            return null;\n        }\n        this.superViewPath = path;\n        this.setSuperView(viewInstance);\n        viewInstance.setOriginalView(this);\n        return viewInstance;\n    }\n\n\n    __setLoopContext(length) {\n        let parent = this.loopContext;\n        this.loopContext = new LoopContext(parent);\n        this.loopContext.setCount(length);\n        return this.loopContext;\n    }\n\n    __resetLoopContext() {\n        if (this.loopContext && this.loopContext.parent) {\n            let parent = this.loopContext.parent;\n            this.loopContext.parent = null;\n            Object.freeze(this.loopContext);\n            this.loopContext = parent;\n        } else if (this.loopContext) {\n            Object.freeze(this.loopContext);\n            this.loopContext = null;\n        } else {\n            this.loopContext = null;\n        }\n        return this.loopContext;\n    }\n\n    /**\n     * Lặp qua danh sách hoặc đối tượng và gọi callback cho mỗi phần tử hoặc key\n     * @param {Array|Object} list danh sách cần lặp hoặc đối tượng cần lặp\n     * @param {function(item: any, defaultKeyName: string, index: number, loopContext: LoopContext): string} callback hàm callback để xử lý mỗi phần tử hoặc key của đối tượng\n     * @returns {string} kết quả của việc lặp\n     * @example\n     * <AppViewEngine>.foreach([1, 2, 3], (item, defaultKeyName, index, loopContext) => {\n     *     return `<div>${defaultKeyName}: ${item}</div>`;\n     * });\n     * // returns '<div>1</div><div>2</div><div>3</div>'\n     * <AppViewEngine>.foreach({a: 1, b: 2, c: 3}, (value, key, index, loopContext) => {\n     *     return `<div>${key}: ${value}</div>`;\n     * });\n     */\n    __foreach(list, callback) {\n        if (!list) {\n            return '';\n        }\n        if (!(list && typeof list === 'object' && !Array.isArray(list))) {\n            return '';\n        }\n        let result = '';\n        if (Array.isArray(list)) {\n            let loopContext = this.__setupLoopContext(list);\n            loopContext.setType('increment');\n            list.forEach((item, index) => {\n                loopContext.setCurrentTimes(index);\n                result += callback(item, index, index, loopContext);\n            });\n            this.__resetLoopContext();\n        } else {\n            let count = Object.keys(list).length;\n            let loopContext = this.__setupLoopContext(count);\n            loopContext.setType('increment');\n            Object.entries(list).forEach(([key, value]) => {\n                loopContext.setCurrentTimes(index);\n                result += callback(value, key, index, loopContext);\n                index++;\n            });\n            this.__resetLoopContext();\n        }\n        return result;\n    }\n\n\n    /**\n     * Scan and hydrate server-rendered view\n     * This method:\n     * 1. Finds DOM elements for this view\n     * 2. Attaches event handlers from server data\n     * 3. Sets up state subscriptions\n     * 4. Stores children and following block references\n     *\n     * @param {Object} config - Server-side view configuration\n     * @param {string} config.viewId - View instance ID\n     * @param {Object} config.data - View data from server\n     * @param {Object} config.events - Event handlers to attach\n     * @param {Array} config.following - Following blocks to setup\n     * @param {Array} config.children - Child views to scan\n     * @param {Object} config.parent - Parent view reference\n     */\n    __scan(config) {\n        if (this.isScanned) {\n            return;\n        }\n        // this.isScanned = true;\n        this.isScanning = true;\n        const { viewId, data, events, following, children, parent } = config;\n        if (data && typeof data === 'object') {\n            // this.data = { ...this.data, ...data };\n            this.updateVariableData(data);\n        }\n\n\n        if (typeof viewId !== 'string' || viewId === '') {\n            logger.warn('⚠️ ViewEngine.__scan: Invalid viewId', viewId);\n            return null;\n        }\n\n        logger.log(`🔍 ViewEngine.__scan: Scanning view ${this.path} (${viewId})`);\n\n        // ========================================================================\n        // STEP 1: Find DOM Elements\n        // ========================================================================\n\n        this.__scanDOMElements(viewId);\n\n        // ========================================================================\n        // STEP 2: Attach Event Handlers\n        // ========================================================================\n\n        if (events && typeof events === 'object') {\n            this.__attachEventHandlers(events, viewId);\n\n        }\n\n        // ========================================================================\n        // STEP 3: Setup State Subscriptions (Following Blocks)\n        // ========================================================================\n\n        if (following && following.length > 0) {\n            this.__setupFollowingBlocks(following, viewId);\n        }\n\n        // ========================================================================\n        // STEP 4: Store Children References\n        // ========================================================================\n\n        if (children && children.length > 0) {\n            this.__storeChildrenReferences(children);\n        }\n\n        // ========================================================================\n        // STEP 5: Store Parent Reference\n        // ========================================================================\n\n        // if (parent) {\n        //     this.parentView = parent;\n        // }\n\n        logger.log(`✅ ViewEngine.__scan: Scan complete for ${this.path} (${viewId})`);\n        // this.isScanning = false;\n        this.isScanned = true;\n    }\n\n    /**\n     * Find and store DOM elements for this view\n     * @private\n     * @param {string} viewId - View instance ID\n     */\n    __scanDOMElements(viewId) {\n        if (this.hasSuperView) {\n            logger.log(`✅ ViewEngine.__scanDOMElements: Skipping element scan for ${this.path} (${viewId}) due to super view`);\n            return;\n        }\n        if (this.wrapperConfig.enable) {\n            if (this.wrapperConfig.tag) {\n                // Custom wrapper tag\n                let elements = document.querySelectorAll(\n                    `${this.wrapperConfig.tag}[data-wrap-view=\"${this.path}\"][${ATTR.KEYS.VIEW_WRAPPER}=\"${viewId}\"]`\n                );\n                if (elements.length > 0) {\n                    this.refElements = Array.from(elements).map((el) => {\n                        el.setAttribute('x-ref-view', viewId);\n                        return el;\n                    });\n                    logger.log(`✅ ViewEngine.__scanDOMElements: Found ${elements.length} custom wrapper elements`);\n                }\n            } else {\n                // Use OneMarkup to find view boundary\n                const markup = OneMarkup.first('view', { name: this.path, id: viewId });\n                if (markup) {\n                    this.markup = markup;\n                    this.refElements = markup.nodes.filter(node => node.nodeType === Node.ELEMENT_NODE);\n                    logger.log(`✅ ViewEngine.__scanDOMElements: Found view boundary with ${this.refElements.length} elements`);\n                }\n            }\n        } else {\n            // Standard view wrapper\n            let elements = document.querySelectorAll(`[data-view-wrapper=\"${viewId}\"]`);\n            if (elements.length > 0) {\n                this.refElements = Array.from(elements).map((el) => {\n                    el.setAttribute('x-ref-view', viewId);\n                    return el;\n                });\n                logger.log(`✅ ViewEngine.__scanDOMElements: Found ${elements.length} standard wrapper elements`);\n            }\n        }\n\n        if (!this.refElements || this.refElements.length === 0) {\n            logger.warn(`⚠️ ViewEngine.__scanDOMElements: No elements found for ${this.path} (${viewId})`);\n        }\n    }\n\n    /**\n     * Attach event handlers to DOM elements from server data\n     * @private\n     * @param {Object} events - Event map from server\n     * @param {string} viewId - View instance ID\n     */\n    __attachEventHandlers(events, viewId) {\n        let attachedCount = 0;\n        this.events = events;\n        return;\n\n        logger.log(`✅ ViewEngine.__attachEventHandlers: Attached ${attachedCount} event handlers`);\n    }\n\n    /**\n     * Setup following blocks for reactive state updates\n     * @private\n     * @param {Array} following - Following block configurations\n     * @param {string} viewId - View instance ID\n     */\n    __setupFollowingBlocks(following, viewId) {\n        following.forEach(followConfig => {\n            const { id, stateKeys } = followConfig;\n\n            // Store config\n            this.followingConfig.push({\n                id,\n                stateKeys,\n            });\n            return;\n            // Find follow block in DOM using OneMarkup\n            const followBlocks = OneMarkup.find('follow', { id }, {}, false);\n\n            if (followBlocks.length === 0) {\n                logger.warn(`⚠️ ViewEngine.__setupFollowingBlocks: Follow block ${id} not found in DOM`);\n                return;\n            }\n\n            const followBlock = followBlocks[0];\n\n            // Subscribe to state changes\n            stateKeys.forEach(stateKey => {\n                this.states.on(stateKey, (newValue, oldValue) => {\n                    logger.log(`🔄 ViewEngine: State ${stateKey} changed, re-rendering follow block ${id}`);\n                    // TODO: Re-render this follow block\n                    // This requires storing the render function for each follow block\n                    this.__rerenderFollowBlock(id, followBlock);\n                });\n            });\n        });\n\n        logger.log(`✅ ViewEngine.__setupFollowingBlocks: Setup ${following.length} following blocks`);\n    }\n\n    /**\n     * Re-render a specific follow block\n     * @private\n     * @param {string} followId - Follow block ID\n     * @param {Object} followBlock - Follow block DOM reference\n     */\n    __rerenderFollowBlock(followId, followBlock) {\n        // TODO: Implement follow block re-rendering\n        // This needs to:\n        // 1. Call the render function for this follow block\n        // 2. Replace DOM content between comment markers\n        // 3. Re-attach event handlers if needed\n        logger.log(`🔄 ViewEngine.__rerenderFollowBlock: Re-rendering follow block ${followId}`);\n    }\n\n    /**\n     * Store children view references for hydration\n     * @private\n     * @param {Array} children - Child view configurations\n     */\n    __storeChildrenReferences(children) {\n        children.forEach(child => {\n            const { name, id } = child;\n            this.childrenConfig.push({\n                name,\n                id,\n            });\n        });\n\n        // logger.log(`✅ ViewEngine.__storeChildrenReferences: Stored ${children.length} children references`);\n    }\n\n\n\n    __sectionScan(name, content, type) {\n        this.cachedSections[name] = content;\n        return null;\n    }\n\n    __includeScan(name, data = {}) {\n        const childParams = this.childrenConfig[this.childrenIndex];\n        if (!(childParams && childParams.name === name)) {\n            return null;\n        }\n        this.childrenIndex++;\n        const childConfig = this.App.View.ssrViewManager.getInstance(childParams.name, childParams.id);\n        if (!childConfig) {\n            return null;\n        }\n        const childData = { ...data, ...childConfig.data, __SSR_VIEW_ID__: childParams.id };\n        const child = this.__include(childParams.name, childData);\n        if (!child) {\n            return null;\n        }\n        child.__scan(childConfig);\n        return child;\n    }\n    __includeifScan(name, data = {}) {\n        if (!this.App.View.exists(name)) {\n            return null;\n        }\n        return this.__includeScan(name, data);\n    }\n    __includewhenScan(condition, name, data = {}) {\n        if (!condition) {\n            return null;\n        }\n        return this.__include(name, data);\n    }\n    __extendsScan(name, data = {}) {\n        if (!this.App.View.exists(name)) {\n            return null;\n        }\n\n        let superViewConfig = null;\n\n        let superViewOfChildren = this.childrenConfig.find((child, index) => child.name === name && index == this.childrenConfig.length - 1);\n        if (superViewOfChildren) {\n            superViewConfig = this.App.View.ssrViewManager.getInstance(superViewOfChildren.name, superViewOfChildren.id);\n        } else {\n            superViewConfig = this.App.View.ssrViewManager.scan(name);\n        }\n\n\n\n        if (!superViewConfig) {\n            return null;\n        }\n        const superViewData = { ...data, ...superViewConfig.data, __SSR_VIEW_ID__: superViewConfig.viewId };\n        const superView = this.__extends(name, superViewData);\n        if (!superView) {\n            return null;\n        }\n        superView.__scan(superViewConfig);\n        return superView;\n    }\n\n    __showErrorScan(error) {\n        logger.error(`ViewEngine Scan Error [${this.path}]: ${error}`);\n        return null;\n    }\n\n    __foreachScan(list, callback) {\n        return null;\n    }\n    __execute(...args) {\n        return this.App.View.execute(...args);\n    }\n    subscribeScan(...args) {\n        // return this.subscribe(...args);\n    }\n\n    __subscribe(...args) {\n        return this.subscribe(...args);\n    }\n\n    __subscribeScan(...args) {\n        return this.subscribeScan(...args);\n    }\n\n    __text(...args) {\n        return this.App.View.text(...args);\n    }\n\n    __textScan(...args) {\n        return ''// this.App.View.textScan(...args);\n    }\n\n\n\n    /**\n     * Add event stack for specific event type and ID\n     * @param {string} eventType - Type of event\n     * @param {string} eventID - ID of event\n     * @param {Array} handlers - Array of handler objects\n     * @returns {string} Event attribute string\n     */\n    addEventStack(eventType, eventID, handlers) {\n        if (typeof eventID !== 'string' || eventID === '') {\n            return;\n        }\n        if (typeof handlers !== 'object' || handlers === null) {\n            return;\n        }\n        if (typeof this.events[eventType] === 'undefined') {\n            this.events[eventType] = {};\n        }\n        if (typeof this.events[eventType][eventID] === 'undefined') {\n            this.events[eventType][eventID] = []\n        }\n        this.events[eventType][eventID].push(...handlers);\n\n        return ` data-${eventType}-id=\"${eventID}\"`;\n    }\n\n    addEventStackScan(eventType, eventID, handlers) {\n        return this.addEventStack(eventType, eventID, handlers);\n    }\n\n\n    addEventConfigScan(eventType, handlers) {\n        // return this.addEventConfig(eventType, handlers);\n    }\n\n    __addEventConfig(eventType, handlers) {\n        return this.addEventConfig(eventType, handlers);\n    }\n    __addEventConfigScan(eventType, handlers) {\n        return this.addEventConfigScan(eventType, handlers);\n    }\n\n\n    __addEventQuickHandle(eventType, handlers) {\n        return this.addEventQuickHandle(eventType, handlers);\n    }\n    __addEventQuickHandleScan(eventType, handlers) {\n        return this.addEventQuickHandleScan(eventType, handlers);\n    }\n\n    /**\n     * Set event configuration for view engine\n     * @param {Object} events - Event configuration object\n     */\n    setEventConfig(events) {\n        if (typeof events !== 'object' || events === null) {\n            return;\n        }\n        Object.entries(events).forEach((eventType, eventObjectList) => {\n            if (typeof eventObjectList !== 'object' || eventObjectList === null) {\n                return;\n            }\n            Object.entries(eventObjectList).forEach((eventID, handlers) => {\n                this.addEventStack(eventType, eventID, handlers);\n            });\n        });\n    }\n\n    addEventQuickHandle(eventType, handlers) {\n        if (typeof eventType !== 'string' || eventType === '' || Array.isArray(handlers) || handlers.length !== handlers.filter(handler => typeof handler === 'function').length) {\n            return;\n        }\n        let index = this.eventQuickHandles.length;\n        const id = `${this.id}-${eventType}-${index}`;\n        this.eventQuickHandles.push({ id, type: eventType, handlers });\n        return ` data-${eventType}-id=\"${id}\"`;\n    }\n\n    addEventQuickHandleScan(eventType, handlers) {\n        return this.addEventQuickHandle(eventType, handlers);\n    }\n\n    setEventConfigScan(events) {\n        return this.setEventConfig(events);\n    }\n\n\n    startEventListener() {\n        const needDeleted = [];\n        Object.entries(this.events).forEach(([eventType, eventMap]) => {\n            Object.entries(eventMap).forEach(([eventID, handlers]) => {\n                const selector = `[data-${eventType}-id=\"${eventID}\"]`;\n                const elements = document.querySelectorAll(selector);\n                const parsedHandlers = this.parseEventHandlerFunctions(handlers);\n                if (parsedHandlers.length !== 0 && elements.length > 0) {\n                    elements.forEach(element => {\n                        const handler = (event) => {\n                            let returnValue = null;\n                            for (let i = 0; i < parsedHandlers.length; i++) {\n                                const handlerFn = parsedHandlers[i];\n                                returnValue = handlerFn(event);\n                                if (returnValue === false || event.defaultPrevented) {\n                                    event.preventDefault();\n                                    event.stopPropagation();\n                                    break;\n                                }\n                            }\n                            if (returnValue === false || returnValue === true) {\n                                return returnValue;\n                            }\n                        }\n                        element.addEventListener(eventType, handler);\n                        this.eventListeners.push({ element, eventType, handler });\n                    });\n                } else {\n                    logger.warn(`⚠️ ViewEngine.startEventListener: No elements found for selector ${selector} or no handlers defined`);\n                    needDeleted.push({ eventType, eventID });\n                }\n            });\n        });\n        needDeleted.forEach(({ eventType, eventID }) => {\n            delete this.events[eventType][eventID];\n            // If no more event handlers for this eventType, remove the entire eventType\n            if (Object.keys(this.events[eventType]).length === 0) {\n                delete this.events[eventType];\n            }\n        });\n        this.eventListenerStatus = true;\n    }\n\n    stopEventListener() {\n        this.eventListeners.forEach(({ element, eventType, handler }) => {\n            element.removeEventListener(eventType, handler);\n        });\n        this.eventListeners = [];\n        this.eventListenerStatus = false;\n    }\n\n    /**\n     * Clear all event data when elements are not found\n     * This helps prevent memory leaks from orphaned event handlers\n     */\n    clearOrphanedEventData() {\n        const needDeleted = [];\n        Object.entries(this.events).forEach(([eventType, eventMap]) => {\n            Object.entries(eventMap).forEach(([eventID, handlers]) => {\n                const selector = `[data-${eventType}-id=\"${eventID}\"]`;\n                const elements = document.querySelectorAll(selector);\n                if (elements.length === 0) {\n                    needDeleted.push({ eventType, eventID });\n                }\n            });\n        });\n\n        needDeleted.forEach(({ eventType, eventID }) => {\n            delete this.events[eventType][eventID];\n            // If no more event handlers for this eventType, remove the entire eventType\n            if (Object.keys(this.events[eventType]).length === 0) {\n                delete this.events[eventType];\n            }\n        });\n\n        if (needDeleted.length > 0) {\n            logger.log(`🗑️ ViewEngine.clearOrphanedEventData: Cleaned up ${needDeleted.length} orphaned event handlers`);\n        }\n    }\n\n    parseEventHandlerFunctions(handlers) {\n        let parsedHandlers = [];\n        handlers.forEach(handlerObj => {\n            const handlerName = handlerObj.handler;\n            const params = handlerObj.params || [];\n            let fn = null;\n            if (typeof this.userDefined[handlerName] === 'function') {\n                fn = event => this.userDefined[handlerName].apply(this, this.parseEventHandlerParams(event, params));\n            }\n            else if (typeof this[handlerName] === 'function') {\n                fn = event => this[handlerName].apply(this, this.parseEventHandlerParams(event, params));\n            }\n            else if (window && typeof window[handlerName] === 'function') {\n                fn = event => window[handlerName].apply(this, this.parseEventHandlerParams(event, params));\n            }\n            else {\n                fn = event => console.warn(`⚠️ Event handler ${handlerName} is not defined`, event);\n            }\n            parsedHandlers.push(fn);\n        });\n        return parsedHandlers;\n    }\n\n    parseEventHandlerParams(event, params = []) {\n        return params.map(param => {\n            if (param === '@EVENT') {\n                return event;\n            }\n            else if (typeof param === 'object' && param !== null) {\n                return this.parseEventHandlerObject(event, param);\n            }\n            else if (Array.isArray(param)) {\n                return this.parseEventHandlerParams(event, param);\n            }\n            return param;\n        });\n    }\n\n    parseEventHandlerObject(event, object = {}) {\n        let parsedObject = {};\n        Object.entries(object).forEach(([key, value]) => {\n            if (value === '@EVENT') {\n                parsedObject[key] = event;\n            }\n            else if (typeof value === 'object' && value !== null) {\n                parsedObject[key] = this.parseEventHandlerObject(event, value);\n            }\n            else if (Array.isArray(value)) {\n                parsedObject[key] = this.parseEventHandlerParams(event, value);\n            }\n            else {\n                parsedObject[key] = value;\n            }\n        });\n        return parsedObject;\n    }\n\n\n\n\n\n    wrapattr() {\n        return ` ${ATTR.KEYS.VIEW_WRAPPER}=\"${this.id}\"`;\n    }\n\n    startWrapper(tag = null, attributes = {}) {\n        this.wrapTag = null;\n        if (typeof tag === 'string') {\n            this.wrapTag = tag;\n        }\n        else if (typeof tag === 'object') {\n            this.wrapTag = tag.tag || 'div';\n            delete tag.tag;\n            attributes = { ...attributes, ...tag.attributes };\n            tag = null;\n        }\n        if (typeof attributes === 'string' || !attributes) {\n            attributes = {};\n        }\n        if (this.wrapTag) {\n            return `<${this.wrapTag} data-wrap-view=\"${this.path}\" data-wrap-id=\"${this.id}\" ${Object.entries(attributes).map(([key, value]) => `${key}=\"${value}\"`).join(' ')}>`;\n        }\n        return `<!-- [one:view name=\"${this.path}\" id=\"${this.id}\"] -->`;\n\n    }\n    endWrapper() {\n        if (this.wrapTag) {\n            this.wrapTag = null;\n            return `</${this.wrapTag}>`;\n        }\n        this.wrapTag = null;\n        return `<!-- [/one:view] -->`;\n    }\n\n    addBlock(name, attributes = {}, content) {\n        if (typeof name !== 'string' || name === '') {\n            return;\n        }\n        console.log('Add block:', name, attributes, content);\n        return this.App.View.section(\"block.\" + name, `<!-- [one:block name=\"${this.path}\" ref=\"${this.id}\"] -->${content}<!-- [/one:block] -->`, 'html');\n    }\n\n    addBlockScan(name, attributes = {}, content) {\n\n        if (typeof name !== 'string' || name === '') {\n            return;\n        }\n        return this.App.View.section(\"block.\" + name, `<!-- [one:block name=\"${this.path}\" ref=\"${this.id}\"] -->${content}<!-- [/one:block] -->`, 'html');\n    }\n\n    __block(name, attributes = {}, content) {\n        return this.addBlock(name, attributes, content);\n    }\n\n    __blockScan(name, attributes = {}, content) {\n        return this.addBlockScan(name, attributes, content);\n    }\n\n    useBlock(name, defaultValue = '') {\n        if (typeof name !== 'string' || name === '') {\n            return;\n        }\n        return `<!-- [one:subscribe type=\"block\" key=\"${name}\"] -->${this.App.View.yield(\"block.\" + name, defaultValue)}<!-- [/one:subscribe] -->`;\n    }\n\n    useBlockScan(name, defaultValue = '') {\n        if (typeof name !== 'string' || name === '') {\n            return;\n        }\n        return `<!-- [one:subscribe type=\"block\" key=\"${name}\"] -->${this.App.View.yield(\"block.\" + name, defaultValue)}<!-- [/one:subscribe] -->`;\n    }\n\n    mountBlock(name, defaultValue = '') {\n        return this.useBlock(name, defaultValue);\n    }\n\n    subscribeBlock(name, defaultValue = '') {\n        return \" data-subscribe-block=\\\"\" + name + \"\\\"\";\n    }\n\n    renderFollowingBlock(stateKeys = [], renderBlock = () => '') {\n        if (!Array.isArray(stateKeys) || stateKeys.length === 0) {\n            return '';\n        }\n\n        if (typeof renderBlock !== 'function') {\n            return '';\n        }\n        if(this.isScanning) {\n            this.isScanning = false;\n            let result = this.renderFollowingBlockScan(stateKeys, renderBlock);\n            this.isScanning = true;\n            return result;\n        }\n        const followBlock = new FollowingBlock({ stateKeys, renderBlock, engine: this, states: this.states, App: this.App });\n        // this.followingBlocks.push(followBlock);\n        this.followingIDs.push(followBlock.id);\n        this.followingBlocks.set(followBlock.id, followBlock);\n        const result = followBlock.render();\n        return result;\n    }\n\n    renderFollowingBlockScan(stateKeys = [], renderBlock = () => '') {\n        if (!Array.isArray(stateKeys) || stateKeys.length === 0) {\n\n            return '';\n        }\n\n        if (typeof renderBlock !== 'function') {\n            return '';\n        }\n        let followingIndex = this.followingScanIndex;\n        let followingConfig = this.followingConfig[followingIndex];\n        if (!(followingConfig || (followingConfig.stateKeys == stateKeys) || (followingConfig.stateKeys.length == stateKeys.length && followingConfig.stateKeys.every(value => stateKeys.includes(value))))) {\n            return '';\n        }\n        const { id: renderID } = followingConfig;\n        const followBlock = new FollowingBlock({ renderID, stateKeys, renderBlock, engine: this, states: this.states, App: this.App });\n        followBlock.scan();\n        // this.followingBlocks.push(followBlock);\n        this.followingIDs.push(followBlock.id);\n        this.followingBlocks.set(followBlock.id, followBlock);\n        this.followingScanIndex++;\n        return ``;\n    }\n\n    __follow(stateKeys = [], renderBlock = () => '') {\n        return this.renderFollowingBlock(stateKeys, renderBlock);\n    }\n\n    __followScan(stateKeys = [], renderBlock = () => '') {\n        return this.renderFollowingBlockScan(stateKeys, renderBlock);\n    }\n\n\n    onFollowUpdating() {\n        this.stopEventListener();\n        setTimeout(() => {\n            if (!this.eventListenerStatus) {\n                this.startEventListener();\n            }\n        }, 10);\n    }\n\n    onFollowUpdated() {\n        if (!this.eventListenerStatus) {\n            this.startEventListener();\n        }\n    }\n\n    onStateChange(key, value, oldValue) {\n        // Use Set to automatically handle duplicates\n        this.changedStateKeys.add(key);\n\n        // Increment queue count (for tracking/statistics if needed)\n        this.changeStateQueueCount++;\n\n        // Schedule batch processing using Promise for async execution\n        // Promise.resolve().then() runs in microtask queue, faster than setTimeout\n        // and works even when tab is hidden (unlike requestAnimationFrame)\n        // The _stateChangePending flag ensures only one Promise is scheduled at a time\n        // All subsequent changes will be batched into the Set\n        if (!this._stateChangePending) {\n            this._stateChangePending = true;\n\n            // Use Promise.resolve().then() for microtask queue (fastest, works in background)\n            Promise.resolve().then(() => {\n                // Clear pending flag before processing\n                this._stateChangePending = false;\n                this._processStateChanges();\n            });\n        }\n    }\n\n    /**\n     * Process batched state changes efficiently\n     * @private\n     */\n    _processStateChanges() {\n        // Skip if view is destroyed\n        if (this.isDestroyed) {\n            return;\n        }\n\n        // Get all changed keys as array for processing\n        const changedKeys = Array.from(this.changedStateKeys);\n\n        // Reset collections\n        this.changedStateKeys.clear();\n        this.changeStateQueueCount = 0;\n\n        // If no keys changed, skip processing\n        if (changedKeys.length === 0) {\n            return;\n        }\n\n        // Process state changes - trigger view updates\n        // Already in microtask queue (from Promise.resolve().then()), so execute directly\n        this._notifyStateChanges(changedKeys);\n    }\n\n    /**\n     * Notify views about state changes\n     * @param {Array<string>} changedKeys - Array of changed state keys\n     * @private\n     */\n    _notifyStateChanges(changedKeys) {\n        // Trigger refresh for views that subscribe to these keys\n        // This will be called after all synchronous operations complete\n        if (this.isRefreshing) {\n            return; // Prevent recursive refresh\n        }\n\n        // Check if this view subscribes to any of the changed keys\n        if (this.subscribe && Array.isArray(this.subscribe) && this.subscribe.length > 0) {\n            const shouldRefresh = changedKeys.some(key => this.subscribe.includes(key));\n            if (shouldRefresh) {\n                this.refresh();\n            }\n        }\n\n        // Notify children that subscribe to changed keys\n        if (this.children && this.children.length > 0) {\n            this.children.forEach(childScope => {\n                if (childScope.subscribe && Array.isArray(childScope.subscribe)) {\n                    const shouldRefresh = changedKeys.some(key => childScope.subscribe.includes(key));\n                    if (shouldRefresh && childScope.view) {\n                        childScope.view._notifyStateChanges(changedKeys);\n                    }\n                }\n            });\n        }\n    }\n\n    onStateDataChanges() {\n        const data = this.stateChangeData;\n        this.stateChangeData = null;\n    }\n\n    /**\n     * Set App instance\n     * @param {Object} app - App instance\n     * @returns {AppViewEngine} This instance for chaining\n     */\n    setApp(app) {\n        this.App = app;\n        return this;\n    }\n\n    setUrlPath(urlPath) {\n        this.urlPath = urlPath;\n        return this;\n    }\n    /**\n     * Set super view\n     * @param {AppViewEngine} superView - Super view instance\n     * @returns {AppViewEngine} This instance for chaining\n     */\n    setSuperView(superView) {\n        this.superView = superView;\n        return this;\n    }\n\n    /**\n     * Set parent view\n     * @param {AppViewEngine} parent - Parent view instance\n     * @returns {AppViewEngine} This instance for chaining\n     */\n    setParent(parent) {\n        this.parent = parent;\n        return this;\n    }\n\n\n    setOriginalView(originalView) {\n        this.originalView = originalView;\n        this.originalViewPath = originalView.path;\n        this.originalViewId = originalView.id;\n        return this;\n    }\n\n    /**\n     * Add child view\n     * @param {ViewEngine} child - Child view to add\n     * @param {Object} data - Data to add to the child view\n     * @returns {ViewEngine} This instance for chaining\n     */\n    addChild(child, data = {}) {\n        let index = this.children.length;\n        let scope = {\n            name: child.path,\n            id: child.id,\n            index,\n            view: child,\n            data,\n            subscribe: [],\n        }\n        child.setScope(scope);\n        this.children.push(scope);\n        return this;\n    }\n\n\n    /**\n     * Remove child view\n     * @param {AppViewEngine} child - Child view to remove\n     * @returns {AppViewEngine} This instance for chaining\n     */\n    removeChild(child) {\n        this.children = this.children.filter(c => c !== child);\n        return this;\n    }\n\n    /**\n     * Update data\n     * @param {Object} __data - New data to merge\n     * @returns {AppViewEngine} This instance for chaining\n     */\n    updateData(__data = {}) {\n        this.data = { ...this.data, ...__data };\n        // this.states.__reset();\n\n        return this;\n    }\n\n    updateVariableData(data = {}) {\n        if (typeof this.config.updateVariableData === 'function') {\n            this.config.updateVariableData.call(this, data);\n            this.isCommitedConstructorData = true;\n        }\n\n        return this;\n    }\n\n    updateVariableItem(key, value) {\n        if (typeof this.config.updateVariableItemData === 'function') {\n            this.config.updateVariableItemData.call(this, key, value);\n        }\n        return this;\n    }\n\n    /**\n     * Set isSuperView flag\n     * @param {boolean} isSuperView - Super view flag\n     * @returns {AppViewEngine} This instance for chaining\n     */\n    setIsSuperView(isSuperView) {\n        this.isSuperView = isSuperView;\n        return this;\n    }\n\n    /** Events */\n\n\n    /**\n     * Reset view engine\n     */\n    reset() {\n        // Implementation placeholder\n    }\n\n}","const basePrefix = 'data-';\nconst ATTR = {\n    PREFIX: {\n        BASE: basePrefix,\n        YIELD: `${basePrefix}yield-`,\n        \n\n        // DOM EVENTS - Mouse Events\n        CLICK: `${basePrefix}click-`,\n        DBLCLICK: `${basePrefix}dblclick-`,\n        MOUSEDOWN: `${basePrefix}mousedown-`,\n        MOUSEUP: `${basePrefix}mouseup-`,\n        MOUSEOVER: `${basePrefix}mouseover-`,\n        MOUSEOUT: `${basePrefix}mouseout-`,\n        MOUSEMOVE: `${basePrefix}mousemove-`,\n        MOUSEENTER: `${basePrefix}mouseenter-`,\n        MOUSELEAVE: `${basePrefix}mouseleave-`,\n        WHEEL: `${basePrefix}wheel-`,\n        AUXCLICK: `${basePrefix}auxclick-`,\n\n        // Keyboard Events\n        KEYDOWN: `${basePrefix}keydown-`,\n        KEYUP: `${basePrefix}keyup-`,\n        KEYPRESS: `${basePrefix}keypress-`,\n\n        // Form Events\n        INPUT: `${basePrefix}input-`,\n        CHANGE: `${basePrefix}change-`,\n        SUBMIT: `${basePrefix}submit-`,\n        RESET: `${basePrefix}reset-`,\n        INVALID: `${basePrefix}invalid-`,\n        SEARCH: `${basePrefix}search-`,\n\n        // Focus Events\n        FOCUS: `${basePrefix}focus-`,\n        BLUR: `${basePrefix}blur-`,\n        FOCUSIN: `${basePrefix}focusin-`,\n        FOCUSOUT: `${basePrefix}focusout-`,\n\n        // Selection Events\n        SELECT: `${basePrefix}select-`,\n        SELECTSTART: `${basePrefix}selectstart-`,\n        SELECTIONCHANGE: `${basePrefix}selectionchange-`,\n\n        // Touch Events\n        TOUCHSTART: `${basePrefix}touchstart-`,\n        TOUCHMOVE: `${basePrefix}touchmove-`,\n        TOUCHEND: `${basePrefix}touchend-`,\n        TOUCHCANCEL: `${basePrefix}touchcancel-`,\n\n        // Drag & Drop Events\n        DRAGSTART: `${basePrefix}dragstart-`,\n        DRAG: `${basePrefix}drag-`,\n        DRAGEND: `${basePrefix}dragend-`,\n        DRAGENTER: `${basePrefix}dragenter-`,\n        DRAGLEAVE: `${basePrefix}dragleave-`,\n        DRAGOVER: `${basePrefix}dragover-`,\n        DROP: `${basePrefix}drop-`,\n\n        // Media Events\n        PLAY: `${basePrefix}play-`,\n        PAUSE: `${basePrefix}pause-`,\n        ENDED: `${basePrefix}ended-`,\n        LOADSTART: `${basePrefix}loadstart-`,\n        LOADEDDATA: `${basePrefix}loadeddata-`,\n        LOADEDMETADATA: `${basePrefix}loadedmetadata-`,\n        CANPLAY: `${basePrefix}canplay-`,\n        CANPLAYTHROUGH: `${basePrefix}canplaythrough-`,\n        WAITING: `${basePrefix}waiting-`,\n        SEEKING: `${basePrefix}seeking-`,\n        SEEKED: `${basePrefix}seeked-`,\n        RATECHANGE: `${basePrefix}ratechange-`,\n        DURATIONCHANGE: `${basePrefix}durationchange-`,\n        VOLUMECHANGE: `${basePrefix}volumechange-`,\n        SUSPEND: `${basePrefix}suspend-`,\n        STALLED: `${basePrefix}stalled-`,\n        PROGRESS: `${basePrefix}progress-`,\n        EMPTIED: `${basePrefix}emptied-`,\n        ENCRYPTED: `${basePrefix}encrypted-`,\n        WAKEUP: `${basePrefix}wakeup-`,\n\n        // Window Events\n        LOAD: `${basePrefix}load-`,\n        UNLOAD: `${basePrefix}unload-`,\n        BEFOREUNLOAD: `${basePrefix}beforeunload-`,\n        RESIZE: `${basePrefix}resize-`,\n        SCROLL: `${basePrefix}scroll-`,\n        ORIENTATIONCHANGE: `${basePrefix}orientationchange-`,\n        VISIBILITYCHANGE: `${basePrefix}visibilitychange-`,\n        PAGEHIDE: `${basePrefix}pagehide-`,\n        PAGESHOW: `${basePrefix}pageshow-`,\n        POPSTATE: `${basePrefix}popstate-`,\n        HASHCHANGE: `${basePrefix}hashchange-`,\n        ONLINE: `${basePrefix}online-`,\n        OFFLINE: `${basePrefix}offline-`,\n\n        // Document Events\n        DOMCONTENTLOADED: `${basePrefix}DOMContentLoaded-`,\n        READYSTATECHANGE: `${basePrefix}readystatechange-`,\n\n        // Error Events\n        ERROR: `${basePrefix}error-`,\n        ABORT: `${basePrefix}abort-`,\n\n        // Context Menu\n        CONTEXTMENU: `${basePrefix}contextmenu-`,\n\n        // Animation Events\n        ANIMATIONSTART: `${basePrefix}animationstart-`,\n        ANIMATIONEND: `${basePrefix}animationend-`,\n        ANIMATIONITERATION: `${basePrefix}animationiteration-`,\n\n        // Transition Events\n        TRANSITIONSTART: `${basePrefix}transitionstart-`,\n        TRANSITIONEND: `${basePrefix}transitionend-`,\n        TRANSITIONRUN: `${basePrefix}transitionrun-`,\n        TRANSITIONCANCEL: `${basePrefix}transitioncancel-`,\n\n        // Pointer Events (Modern browsers)\n        POINTERDOWN: `${basePrefix}pointerdown-`,\n        POINTERUP: `${basePrefix}pointerup-`,\n        POINTERMOVE: `${basePrefix}pointermove-`,\n        POINTEROVER: `${basePrefix}pointerover-`,\n        POINTEROUT: `${basePrefix}pointerout-`,\n        POINTERENTER: `${basePrefix}pointerenter-`,\n        POINTERLEAVE: `${basePrefix}pointerleave-`,\n        POINTERCANCEL: `${basePrefix}pointercancel-`,\n        GOTPOINTERCAPTURE: `${basePrefix}gotpointercapture-`,\n        LOSTPOINTERCAPTURE: `${basePrefix}lostpointercapture-`,\n\n        // Fullscreen Events\n        FULLSCREENCHANGE: `${basePrefix}fullscreenchange-`,\n        FULLSCREENERROR: `${basePrefix}fullscreenerror-`,\n\n        // Clipboard Events\n        COPY: `${basePrefix}copy-`,\n        CUT: `${basePrefix}cut-`,\n        PASTE: `${basePrefix}paste-`,\n\n        // Gamepad Events\n        GAMEPADCONNECTED: `${basePrefix}gamepadconnected-`,\n        GAMEPADDISCONNECTED: `${basePrefix}gamepaddisconnected-`,\n\n        // Battery Events\n        BATTERYCHARGINGCHANGE: `${basePrefix}batterychargingchange-`,\n        BATTERYLEVELCHANGE: `${basePrefix}batterylevelchange-`,\n\n        // Device Orientation Events\n        DEVICEORIENTATION: `${basePrefix}deviceorientation-`,\n        DEVICEMOTION: `${basePrefix}devicemotion-`,\n        DEVICELIGHT: `${basePrefix}devicelight-`,\n        DEVICEPROXIMITY: `${basePrefix}deviceproximity-`,\n\n        // WebGL Events\n        WEBGLCONTEXTLOST: `${basePrefix}webglcontextlost-`,\n        WEBGLCONTEXTRESTORED: `${basePrefix}webglcontextrestored-`,\n\n\n        // view\n        VIEW: `${basePrefix}view-`,\n    },\n    KEYS: {\n        VIEW: `${basePrefix}view`,\n        VIEW_ID: `${basePrefix}view-id`,\n        VIEW_REF: `${basePrefix}view-ref`,\n        VIEW_SECTION_REF: `${basePrefix}view-section-ref`,\n        VIEW_RESOURCE: `${basePrefix}view-resource`,\n        VIEW_STYLE: `${basePrefix}view-style`,\n        VIEW_WRAPPER: `${basePrefix}view-wrapper`,\n        // yield\n        YIELD_ATTR: `${basePrefix}yield-attr`,\n        YIELD_CONTENT: `${basePrefix}yield-content`,\n        YIELD_CHILDREN: `${basePrefix}yield-children`,\n        YIELD_SUBSCRIBE: `${basePrefix}yield-subscribe`,\n        YIELD_SUBSCRIBE_ATTR: `${basePrefix}yield-subscribe-attr`,\n        YIELD_SUBSCRIBE_CONTENT: `${basePrefix}yield-subscribe-content`,\n        YIELD_SUBSCRIBE_CHILDREN: `${basePrefix}yield-subscribe-children`,\n    },\n    CLASSNAME: {\n        BASE: basePrefix,\n        VIEW_ERROR: `${basePrefix}view-error`,\n        VIRTUAL_CONTAINER: `${basePrefix}virtual-container`,\n        SECTION_ERROR: `${basePrefix}section-error`,\n    },\n    prefix: (key) => ATTR.PREFIX[key.toUpperCase()] || basePrefix + key,\n    key: (key) => ATTR.KEYS[key.toUpperCase()] || basePrefix + key,\n    className: (key) => ATTR.CLASSNAME[key.toUpperCase()] || basePrefix + key.toLowerCase().replace(/_/g, '-'),\n\n}\n\nexport const FORBIDDEN_KEYS = [\n    'init',\n    'destroy',\n    'beforeInit',\n    'afterInit',\n    'beforeDestroy',\n    'destroyed',\n    'loadServerData',\n    'render',\n    'prerender',\n    'insertResources',\n    'removeResources',\n    'setMaster',\n    'setApp',\n    'addChild',\n    'removeChild',\n    'remove',\n    'setParent',\n    'parent',\n    'master',\n    'beforeCreate',\n    'created',\n    'beforeUpdate',\n    'updated',\n    'beforeMount',\n    'mounted',\n    'beforeUnmount',\n    'unmounted',\n    'renderLongSections',\n    'renderSections',\n    'prerenderSections',\n    'data',\n    'scope',\n    'subscribe',\n    'updateVariableItem',\n    'updateVariableData',\n];\n\nexport { ATTR };","/**\n * seo-config Module\n * ES6 Module for Blade Compiler\n */\n\nexport const ViewState = function (view) {\n    const viewRef = view;\n    const states = [];\n    let stateIndex = 0;\n    const stateMap = [];\n    \n}\nexport const SEOTagConfig = {\n    \"meta:title\": [\n        {\n            tag: \"title\",\n            selector: \"title\",\n            attribute: \"@content\",\n            attrs: {}\n        },\n        {\n            tag: \"meta\",\n            selector: \"meta[name='title']\",\n            attribute: \"content\",\n            attrs: {\n                \"name\": \"title\"\n            }\n\n        }\n    ],\n    \"meta:description\": [\n        {\n            tag: \"meta\",\n            selector: \"meta[name='description']\",\n            attribute: \"content\",\n            attrs: {\n                \"name\": \"description\"\n            }\n        }\n    ],\n    \"meta:keywords\": [\n        {\n            tag: \"meta\",\n            selector: \"meta[name='keywords']\",\n            attribute: \"content\",\n            attrs: {\n                \"name\": \"keywords\"\n            }\n        }\n    ],\n    \"link:meta:canonical\": [\n        {\n            tag: \"link\",\n            selector: \"link[rel='canonical']\",\n            attribute: \"href\",\n            attrs: {\n                \"rel\": \"canonical\"\n            }\n        }\n    ],\n    \"meta:robots\": [\n        {\n            tag: \"meta\",\n            selector: \"meta[name='robots']\",\n            attribute: \"content\",\n            attrs: {\n                \"name\": \"robots\"\n            }\n        }\n    ],\n    \"meta:author\": [\n        {\n            tag: \"meta\",\n            selector: \"meta[name='author']\",\n            attribute: \"content\",\n            attrs: {\n                \"name\": \"author\"\n            }\n        }\n    ],\n    \"meta:image\": [\n        {\n            tag: \"meta\",\n            selector: \"meta[name='image']\",\n            attribute: \"content\",\n            attrs: {\n                \"name\": \"image\"\n            }\n        }\n    ],\n    \"meta:og:image\": [\n        {\n            tag: \"meta\",\n            selector: \"meta[property='og:image']\",\n            attribute: \"content\",\n            attrs: {\n                \"property\": \"og:image\"\n            }\n        }\n    ],\n    \"meta:og:title\": [\n        {\n            tag: \"meta\",\n            selector: \"meta[property='og:title']\",\n            attribute: \"content\",\n            attrs: {\n                \"property\": \"og:title\"\n            }\n        }\n    ],\n    \"meta:og:description\": [\n        {\n            tag: \"meta\",\n            selector: \"meta[property='og:description']\",\n            attribute: \"content\",\n            attrs: {\n                \"property\": \"og:description\"\n            }\n        }\n    ],\n    \"meta:og:type\": [\n        {\n            tag: \"meta\",\n            selector: \"meta[property='og:type']\",\n            attribute: \"content\",\n            attrs: {\n                \"property\": \"og:type\"\n            }\n        }\n    ],\n    \"meta:og:url\": [\n        {\n            tag: \"meta\",\n            selector: \"meta[property='og:url']\",\n            attribute: \"content\",\n            attrs: {\n                \"property\": \"og:url\"\n            }\n        }\n    ],\n    \"meta:og:site_name\": [\n        {\n            tag: \"meta\",\n            selector: \"meta[property='og:site_name']\",\n            attribute: \"content\",\n            attrs: {\n                \"property\": \"og:site_name\"\n            }\n        }\n    ],\n    \"meta:og:locale\": [\n        {\n            tag: \"meta\",\n            selector: \"meta[property='og:locale']\",\n            attribute: \"content\",\n            attrs: {\n                \"property\": \"og:locale\"\n            }\n        }\n    ],\n    \"meta:article:published_time\": [\n        {\n            tag: \"meta\",\n            selector: \"meta[property='article:published_time']\",\n            attribute: \"content\",\n            attrs: {\n                \"property\": \"article:published_time\"\n            }\n        }\n    ],\n    \"meta:article:modified_time\": [\n        {\n            tag: \"meta\",\n            selector: \"meta[property='article:modified_time']\",\n            attribute: \"content\",\n            attrs: {\n                \"property\": \"article:modified_time\"\n            }\n        }\n    ],\n    \"meta:article:section\": [\n        {\n            tag: \"meta\",\n            selector: \"meta[property='article:section']\",\n            attribute: \"content\",\n            attrs: {\n                \"property\": \"article:section\"\n            }\n        }\n    ],\n    \"meta:article:tag\": [\n        {\n            tag: \"meta\",\n            selector: \"meta[property='article:tag']\",\n            attribute: \"content\",\n            attrs: {\n                \"property\": \"article:tag\"\n            }\n        }\n    ],\n    \"meta:article:author\": [\n        {\n            tag: \"meta\",\n            selector: \"meta[property='article:author']\",\n            attribute: \"content\",\n            attrs: {\n                \"property\": \"article:author\"\n            }\n        }\n    ],\n    \"meta:article:publisher\": [\n        {\n            tag: \"meta\",\n            selector: \"meta[property='article:publisher']\",\n            attribute: \"content\",\n            attrs: {\n                \"property\": \"article:publisher\"\n            }\n        }\n    ],\n    \"meta:article:image\": [\n        {\n            tag: \"meta\",\n            selector: \"meta[property='article:image']\",\n            attribute: \"content\",\n            attrs: {\n                \"property\": \"article:image\"\n            }\n        }\n    ],\n    \"meta:og:image:width\": [\n        {\n            tag: \"meta\",\n            selector: \"meta[property='og:image:width']\",\n            attribute: \"content\",\n            attrs: {\n                \"property\": \"og:image:width\"\n            }\n        }\n    ],\n    \"meta:og:image:height\": [\n        {\n            tag: \"meta\",\n            selector: \"meta[property='og:image:height']\",\n            attribute: \"content\",\n            attrs: {\n                \"property\": \"og:image:height\"\n            }\n        }\n    ],\n    \"meta:twitter:card\": [\n        {\n            tag: \"meta\",\n            selector: \"meta[name='twitter:card']\",\n            attribute: \"content\",\n            attrs: {\n                \"name\": \"twitter:card\"\n            }\n        }\n    ],\n    \"meta:twitter:label1\": [\n        {\n            tag: \"meta\",\n            selector: \"meta[name='twitter:label1']\",\n            attribute: \"content\",\n            attrs: {\n                \"name\": \"twitter:label1\"\n            }\n        }\n    ],\n    \"meta:twitter:label2\": [\n        {\n            tag: \"meta\",\n            selector: \"meta[name='twitter:label2']\",\n            attribute: \"content\",\n            attrs: {\n                \"name\": \"twitter:label2\"\n            }\n        }\n    ],\n    \"twitter:data1\": [\n        {\n            tag: \"meta\",\n            selector: \"meta[name='twitter:data1']\",\n            attribute: \"content\",\n            attrs: {\n                \"name\": \"twitter:data1\"\n            }\n        }\n    ],\n    \"twitter:data2\": [\n        {\n            tag: \"meta\",\n            selector: \"meta[name='twitter:data2']\",\n            attribute: \"content\",\n            attrs: {\n                \"name\": \"twitter:data2\"\n            }\n        }\n    ],\n    \"link:rel:shortlink\": [\n        {\n            tag: \"meta\",\n            selector: \"meta[name='rel:shortlink']\",\n            attribute: \"content\",\n            attrs: {\n                \"rel\": \"shortlink\"\n            }\n        }\n    ],\n    \"link:rel:alternate\": [\n        {\n            tag: \"meta\",\n            selector: \"meta[name='rel:alternate']\",\n            attribute: \"content\",\n            attrs: {\n                \"rel\": \"alternate\"\n            }\n        }\n    ]\n};"],"names":["ViewTemplates","ViewState","constructor","view","this","_viewRef","_states","_stateIndex","_canUpdateStateByKey","__listeners","Map","__ownProperties","__ownMethods","__setters__","Object","defineProperty","value","key","callback","__subscribe","writable","configurable","enumerable","__unsubscribe","__commitStateChange","index","oldValue","stateKey","listeners","get","forEach","__setState","setValue","__useState","includes","set","log","__updateStateByKey","findIndex","state","warn","__register","__lockUpdateRealState","Error","has","push","length","splice","delete","indexOf","__reset","clear","__toJSON","data","toJSON","toString","JSON","stringify","ViewEngine","path","config","App","isSuperView","_emptyFn","id","init","parent","children","superView","superViewPath","superViewId","hasSuperView","originalViewPath","originalViewId","originalView","hasAwaitData","hasFetchData","fetch","usesVars","hasSections","renderLongSections","hasSectionPreload","hasPrerender","sections","addCSS","removeCSS","resources","userDefined","events","eventHandlers","states","urlPath","isInitlized","wrapperConfig","enable","tag","follow","attributes","templateEngine","wrapTag","followingBlocks","followingConfig","followingIndex","followingScanIndex","followingIDs","followingPrerenderIDs","followingRenderIDs","subscribeStates","childrenConfig","childrenIndex","refreshChildrenIndex","isRendering","isRendered","isMounted","isDestroyed","isScanning","isScanned","isReady","markup","refElements","eventListenerStatus","eventListeners","eventQuickHandles","isVirtualRendering","cachedSections","renderedContent","__scope","isRefreshing","changeStateQueueCount","changedStateKeys","Set","_stateChangePending","loopContext","isCommitedConstructorData","setup","initialize","viewId","master","processDefinedProperties","__SSR_VIEW_ID__","commitConstructorData","definedProps","definedMethods","__props__","prop","bind","entries","setScope","scope","loadServerData","_serverData","result","apply","View","_data","updateVariableData","addEventConfig","eventType","handlers","eventID","addEventStack","render","renderFollowIDStart","console","slice","trim","isHtmlString","addXRefViewToRootElements","virtualRender","prerender","virtualPrerender","replaceView","htmlString","container","document","createElement","innerHTML","frag","content","oldElements","querySelectorAll","i","oldElement","newElement","childNodes","parentNode","replaceChild","beforeCreate","call","created","beforeUpdate","updated","beforeInit","afterInit","beforeDestroy","destroyed","beforeMount","mounted","startEventListener","onSuperViewMounted","child","onParentMounted","size","block","beforeUnmount","beforeUnmounted","unmounted","stopEventListener","onSuperViewUnmounted","onParentUnmounted","destroy","element","removeChild","refresh","Array","from","setAttribute","str","test","renderPlaceholder","className","KEYS","VIEW_ID","showError","error","map","section","VIEW_SECTION_REF","join","showErrorScan","resetOriginalView","ejectOriginalView","remove","insertResources","resource","querySelector","uuid","attrs","body","appendChild","head","removeResources","__showError","__section","name","type","__yield","defaultValue","yield","__yieldContent","yieldContent","__include","parentData","viewInstance","include","setParent","addChild","__includeif","exists","__includewhen","condition","__extends","originData","extendView","setSuperView","setOriginalView","__setLoopContext","LoopContext","setCount","__resetLoopContext","freeze","__foreach","list","isArray","__setupLoopContext","setType","item","setCurrentTimes","count","keys","__scan","following","__scanDOMElements","__attachEventHandlers","__setupFollowingBlocks","__storeChildrenReferences","elements","VIEW_WRAPPER","el","first","nodes","filter","node","nodeType","Node","ELEMENT_NODE","followConfig","stateKeys","__rerenderFollowBlock","followId","followBlock","__sectionScan","__includeScan","childParams","childConfig","ssrViewManager","getInstance","childData","__includeifScan","__includewhenScan","__extendsScan","superViewConfig","superViewOfChildren","find","scan","superViewData","__showErrorScan","__foreachScan","__execute","args","execute","subscribeScan","subscribe","__subscribeScan","__text","text","__textScan","addEventStackScan","addEventConfigScan","__addEventConfig","__addEventConfigScan","__addEventQuickHandle","addEventQuickHandle","__addEventQuickHandleScan","addEventQuickHandleScan","setEventConfig","eventObjectList","handler","setEventConfigScan","needDeleted","eventMap","selector","parsedHandlers","parseEventHandlerFunctions","event","returnValue","handlerFn","defaultPrevented","preventDefault","stopPropagation","addEventListener","removeEventListener","clearOrphanedEventData","handlerObj","handlerName","params","fn","parseEventHandlerParams","window","param","parseEventHandlerObject","object","parsedObject","wrapattr","startWrapper","endWrapper","addBlock","addBlockScan","__block","__blockScan","useBlock","useBlockScan","mountBlock","subscribeBlock","renderFollowingBlock","renderBlock","renderFollowingBlockScan","engine","every","renderID","__follow","__followScan","onFollowUpdating","setTimeout","onFollowUpdated","onStateChange","add","Promise","resolve","then","_processStateChanges","changedKeys","_notifyStateChanges","some","childScope","onStateDataChanges","stateChangeData","setApp","app","setUrlPath","c","updateData","__data","updateVariableItem","updateVariableItemData","setIsSuperView","reset","basePrefix","ATTR","PREFIX","BASE","YIELD","CLICK","DBLCLICK","MOUSEDOWN","MOUSEUP","MOUSEOVER","MOUSEOUT","MOUSEMOVE","MOUSEENTER","MOUSELEAVE","WHEEL","AUXCLICK","KEYDOWN","KEYUP","KEYPRESS","INPUT","CHANGE","SUBMIT","RESET","INVALID","SEARCH","FOCUS","BLUR","FOCUSIN","FOCUSOUT","SELECT","SELECTSTART","SELECTIONCHANGE","TOUCHSTART","TOUCHMOVE","TOUCHEND","TOUCHCANCEL","DRAGSTART","DRAG","DRAGEND","DRAGENTER","DRAGLEAVE","DRAGOVER","DROP","PLAY","PAUSE","ENDED","LOADSTART","LOADEDDATA","LOADEDMETADATA","CANPLAY","CANPLAYTHROUGH","WAITING","SEEKING","SEEKED","RATECHANGE","DURATIONCHANGE","VOLUMECHANGE","SUSPEND","STALLED","PROGRESS","EMPTIED","ENCRYPTED","WAKEUP","LOAD","UNLOAD","BEFOREUNLOAD","RESIZE","SCROLL","ORIENTATIONCHANGE","VISIBILITYCHANGE","PAGEHIDE","PAGESHOW","POPSTATE","HASHCHANGE","ONLINE","OFFLINE","DOMCONTENTLOADED","READYSTATECHANGE","ERROR","ABORT","CONTEXTMENU","ANIMATIONSTART","ANIMATIONEND","ANIMATIONITERATION","TRANSITIONSTART","TRANSITIONEND","TRANSITIONRUN","TRANSITIONCANCEL","POINTERDOWN","POINTERUP","POINTERMOVE","POINTEROVER","POINTEROUT","POINTERENTER","POINTERLEAVE","POINTERCANCEL","GOTPOINTERCAPTURE","LOSTPOINTERCAPTURE","FULLSCREENCHANGE","FULLSCREENERROR","COPY","CUT","PASTE","GAMEPADCONNECTED","GAMEPADDISCONNECTED","BATTERYCHARGINGCHANGE","BATTERYLEVELCHANGE","DEVICEORIENTATION","DEVICEMOTION","DEVICELIGHT","DEVICEPROXIMITY","WEBGLCONTEXTLOST","WEBGLCONTEXTRESTORED","VIEW","VIEW_REF","VIEW_RESOURCE","VIEW_STYLE","YIELD_ATTR","YIELD_CONTENT","YIELD_CHILDREN","YIELD_SUBSCRIBE","YIELD_SUBSCRIBE_ATTR","YIELD_SUBSCRIBE_CONTENT","YIELD_SUBSCRIBE_CHILDREN","CLASSNAME","VIEW_ERROR","VIRTUAL_CONTAINER","SECTION_ERROR","prefix","toUpperCase","toLowerCase","replace","FORBIDDEN_KEYS","SEOTagConfig","attribute"],"sourceRoot":""}
"use strict";(Object("undefined"!=typeof self?self:this).webpackChunkApp=Object("undefined"!=typeof self?self:this).webpackChunkApp||[]).push([[10],{64:(t,e,r)=>{r.d(e,{H:()=>n}),r(499);class n{constructor(t=null){this.App=t}setApp(t){this.App=t}trim(t,e=" "){if("string"!=typeof t)return t;const r=new RegExp(`^${e}+|${e}+$`,"g");return t.replace(r,"")}isHtmlString(t){return"string"==typeof t&&/<[a-z][\s\S]*>/i.test(t)}substr(t,e,r){return"string"!=typeof t?t:t.substring(e,r)}strtolower(t){return"string"!=typeof t?t:t.toLowerCase()}strtoupper(t){return"string"!=typeof t?t:t.toUpperCase()}formatDate(t,e="YYYY-MM-DD"){const r=new Date(t);if(isNaN(r.getTime()))return"";const n=r.getFullYear(),s=String(r.getMonth()+1).padStart(2,"0"),i=String(r.getDate()).padStart(2,"0"),a=String(r.getHours()).padStart(2,"0"),o=String(r.getMinutes()).padStart(2,"0"),l=String(r.getSeconds()).padStart(2,"0");return e.replace("YYYY",n).replace("MM",s).replace("DD",i).replace("HH",a).replace("mm",o).replace("ss",l)}formatNumber(t,e={}){if("number"!=typeof t||isNaN(t))return"0";const{decimals:r=2,thousandsSeparator:n=",",decimalSeparator:s=".",prefix:i="",suffix:a=""}=e,o=t.toFixed(r).split(".");return o[0]=o[0].replace(/\B(?=(\d{3})+(?!\d))/g,n),i+o.join(s)+a}formatCurrency(t,e="USD"){return({USD:"$",EUR:"â‚¬",GBP:"Â£",JPY:"Â¥",VND:"â‚«"}[e]||e)+this.formatNumber(t,{decimals:2})}truncate(t,e=100,r="..."){return"string"!=typeof t||t.length<=e?t:t.substring(0,e).trim()+r}randomString(t=8){let e="";for(let r=0;r<t;r++)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return e}deepClone(t){if(null===t||"object"!=typeof t)return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof Array)return t.map(t=>this.deepClone(t));if("object"==typeof t){const e={};return Object.keys(t).forEach(r=>{e[r]=this.deepClone(t[r])}),e}return t}debounce(t,e){let r;return function(...n){clearTimeout(r),r=setTimeout(()=>{clearTimeout(r),t(...n)},e)}}throttle(t,e){let r;return function(...n){r||(t.apply(this,n),r=!0,setTimeout(()=>r=!1,e))}}getSEOTagConfig(){return{title:[{tag:"title",selector:"title",attribute:"@content"}],description:[{tag:"meta",selector:'meta[name="description"]',attrs:{name:"description"},attribute:"content"}],keywords:[{tag:"meta",selector:'meta[name="keywords"]',attrs:{name:"keywords"},attribute:"content"}],ogTitle:[{tag:"meta",selector:'meta[property="og:title"]',attrs:{property:"og:title"},attribute:"content"}],ogDescription:[{tag:"meta",selector:'meta[property="og:description"]',attrs:{property:"og:description"},attribute:"content"}],ogImage:[{tag:"meta",selector:'meta[property="og:image"]',attrs:{property:"og:image"},attribute:"content"}]}}updateSEOItem(t,e){const r=this.SEO.tags[t];return!(!r||0===r.length||(r.forEach(t=>{let r=document.querySelector(t.selector);r||(r=document.createElement(t.tag),t.attrs&&Object.entries(t.attrs).forEach(([t,e])=>{r.setAttribute(t,e)}),document.head.appendChild(r)),t.attribute&&("@content"===t.attribute?r.textContent=e:r.setAttribute(t.attribute,e))}),0))}updateTitle(t){this.updateSEOItem("title",t)}updateDescription(t){this.updateSEOItem("description",t)}updateKeywords(t){this.updateSEOItem("keywords",t)}updateOGTitle(t){this.updateSEOItem("ogTitle",t)}updateOGDescription(t){this.updateSEOItem("ogDescription",t)}updateOGImage(t){this.updateSEOItem("ogImage",t)}getUrlParams(t=window.location.href){const e={};return new URL(t).searchParams.forEach((t,r)=>{e[r]=t}),e}buildUrl(t,e={}){const r=new URL(t);return Object.entries(e).forEach(([t,e])=>{null!=e&&r.searchParams.set(t,e)}),r.toString()}isInViewport(t){const e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}scrollTo(t,e={}){const r="string"==typeof t?document.querySelector(t):t;if(!r)return;const{behavior:n="smooth",block:s="start",inline:i="nearest",offset:a=0}=e,o=r.offsetTop-a;window.scrollTo({top:o,behavior:n})}async copyToClipboard(t){try{return await navigator.clipboard.writeText(t),!0}catch(t){return console.error("Failed to copy to clipboard:",t),!1}}downloadFile(t,e,r="text/plain"){const n=new Blob([t],{type:r}),s=URL.createObjectURL(n),i=document.createElement("a");i.href=s,i.download=e,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(s)}getDeviceType(){const t=window.innerWidth;return t<768?"mobile":t<1024?"tablet":"desktop"}count(t){return Array.isArray(t)?t.length:"object"==typeof t&&null!==t?Object.keys(t).length:0}isNull(t){return null===t}isArray(t){return Array.isArray(t)}isString(t){return"string"==typeof t}isNumeric(t){return!isNaN(parseFloat(t))&&isFinite(t)}now(){const t=new Date;return{format:function(e){if(!e)return t.toISOString();const r=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),s=String(t.getDate()).padStart(2,"0"),i=String(t.getHours()).padStart(2,"0"),a=String(t.getMinutes()).padStart(2,"0"),o=String(t.getSeconds()).padStart(2,"0");return e.replace("Y",r).replace("m",n).replace("d",s).replace("H",i).replace("i",a).replace("s",o)},getTime:function(){return t.getTime()},toString:function(){return t.toString()}}}today(){return new Date}date(t,e="Y-m-d H:i:s"){return new Date(t).toISOString().slice(0,19).replace("T"," ")}env(t,e=null){return e}ucfirst(t){return"string"!=typeof t||0===t.length?t:t.charAt(0).toUpperCase()+t.slice(1)}lcfirst(t){return"string"!=typeof t||0===t.length?t:t.charAt(0).toLowerCase()+t.slice(1)}str_replace(t,e,r){if(Array.isArray(t)){let n=r;return t.forEach((t,r)=>{const s=Array.isArray(e)?void 0!==e[r]?e[r]:"":e;n=n.split(t).join(s)}),n}return r.split(t).join(e)}explode(t,e){return"string"!=typeof e||"string"!=typeof t?[]:e.split(t)}implode(t,e){return Array.isArray(e)?e.join(t):""}in_array(t,e){return!!Array.isArray(e)&&e.includes(t)}array_unique(t){return Array.isArray(t)?Array.from(new Set(t)):[]}array_merge(...t){return[].concat(...t)}is_array(t){return Array.isArray(t)}is_string(t){return"string"==typeof t}is_numeric(t){return!isNaN(parseFloat(t))&&isFinite(t)}empty(t){return null==t||"string"==typeof t&&""===t.trim()||!(!Array.isArray(t)||0!==t.length)||"object"==typeof t&&!Array.isArray(t)&&0===Object.keys(t).length||!1===t||0===t}isset(t){return null!=t}json_encode(t){return JSON.stringify(t)}json_decode(t){return JSON.parse(t)}isMobile(){return"mobile"===this.getDeviceType()}isTablet(){return"tablet"===this.getDeviceType()}isDesktop(){return"desktop"===this.getDeviceType()}}},400:(t,e,r)=>{r.d(e,{J:()=>a});var n=r(499),s=r(734),i=r(544);r(276);class a{constructor({App:t,engine:e,stateKeys:r=[],renderBlock:s=()=>"",scanMode:i=!1,renderID:a=""}){this.App=t,this.engine=e,this.states=e.states,this.stateKeys=r,this.renderBlock=s,this.scanMode=i,this.id=a||(0,n.bD)(),this.isRendered=!1,this.openTag=null,this.closeTag=null,this.refElements=[],this.subscribes=[],this.isMounted=!1,this.isScanned=!1,this.markup=null}mounted(){this.isMounted||(this.isMounted=!0,this.scan(),this.stateKeys.length>0&&this.stateKeys.forEach(t=>{const e=this.states.__subscribe(t,()=>{console.log(`FollowingBlock [id=${this.id}] detected change in state "${t}", renewing...`),this.renew()});this.subscribes.push(e)}))}unmounted(){this.isMounted=!1,this.subscribes.length>0&&(this.subscribes.forEach(t=>{t()}),this.subscribes=[])}placeholder(){return`\x3c!-- [one:placeholder ref="following" id="${this.id}"] --\x3e\x3c!-- [/one:placeholder] --\x3e`}render(){return`\x3c!-- [one:follow type="state" id="${this.id}" following="${this.stateKeys.join(",")}"] viewid="${this.id}" --\x3e${this.renderBlock()}\x3c!-- [/one:follow] --\x3e`}rerender(){return this.renderBlock()}renew(){this.engine.onFollowUpdating();try{this.unmounted(),this.clear(),this.closeTag&&this.closeTag.parentNode&&(i.A.before(this.closeTag,this.rerender()),this.mounted())}catch(t){console.error("FollowingBlock renew error:",t)}this.engine.onFollowUpdated()}destroy(){this.unmounted(),this.clear()}scan(){console.log(`FollowingBlock [id=${this.id}] scanning...`),this.markup?(this.refElements=[],this.markup.__scan(),this.refElements=this.markup.nodes.slice()):(this.markup=s.Ay.first("follow",{id:this.id},{},!1),this.openTag=this.markup.openTag,this.closeTag=this.markup.closeTag,this.refElements=this.markup.nodes.slice()),this.isScanned=!0}clear(){this.refElements.forEach(t=>{t.parentNode&&t.parentNode.removeChild(t)}),this.refElements=[]}}},544:(t,e,r)=>{r.d(e,{A:()=>n});const n=class{static validateElement(t){if(!(t instanceof Element||t instanceof Comment))throw new Error("Provided value is not a valid DOM Element");return!0}static toFragment(t){const e=document.createDocumentFragment(),r=t=>{if(t)if("string"==typeof t){const r=document.createElement("template");r.innerHTML=t.trim(),e.appendChild(r.content)}else t instanceof Element||t instanceof DocumentFragment?e.appendChild(t):Array.isArray(t)||t instanceof NodeList?t.forEach(r):console.warn("Unsupported content type:",t)};return r(t),e}static before(t,e){if(!(t instanceof Element||t instanceof Comment))throw new Error("Target must be a DOM element");t.parentNode.insertBefore(this.toFragment(e),t)}static after(t,e){if(!(t instanceof Element||t instanceof Comment))throw new Error("Target must be a DOM element");const r=this.toFragment(e);t.nextSibling?t.parentNode.insertBefore(r,t.nextSibling):t.parentNode.appendChild(r)}static replace(t,e){if(!(t instanceof Element||t instanceof Comment))throw new Error("Target must be a DOM element");t.replaceWith(this.toFragment(e))}static append(t,e){if(!(t instanceof Element))throw new Error("Target must be a DOM element");t.appendChild(this.toFragment(e))}static prepend(t,e){if(!(t instanceof Element))throw new Error("Target must be a DOM element");t.firstChild?t.insertBefore(this.toFragment(e),t.firstChild):t.appendChild(this.toFragment(e))}static setHTML(t,e){if(!(t instanceof Element))throw new Error("Target must be a DOM element");t.innerHTML="",t.appendChild(this.toFragment(e))}static replaceContent(t,e){if(!(t instanceof Element))throw new Error("Target must be a DOM element");t.innerHTML="",t.appendChild(this.toFragment(e))}static content(t,e){if(void 0===e){if(!(t instanceof Element))throw new Error("Target must be a DOM element");return t.innerHTML}this.setHTML(t,e)}static children(t,e=null){if(!(t instanceof Element))throw new Error("Target must be a DOM element");if(null==e)return Array.from(t.children);t.innerHTML="",t.appendChild(this.toFragment(e))}}},630:(t,e,r)=>{r.d(e,{nC:()=>s});var n=r(852);const s=new class{constructor(){if(this.http=new n.k,this.http.setHeader("Content-Type","application/json"),this.http.setHeader("Accept","application/json"),this.http.setHeader("X-Requested-With","XMLHttpRequest"),"undefined"!=typeof document){const t=document.querySelector('meta[name="csrf-token"]');t&&this.http.setHeader("X-CSRF-TOKEN",t.getAttribute("content"))}this.http.setHeader("X-DATA-TYPE","json"),this.endpoints="undefined"!=typeof window&&window.APP_CONFIGS?.api?.endpoints||{}}async getViewData(t){try{return await this.http.get(t).then(t=>t.status?t.data:{}).catch(t=>(console.error("âŒ AppAPI: Error getting view data:",t),{}))}catch(t){return console.error("âŒ AppAPI: Error getting view data:",t),{}}}async getSystemConfig(){return{}}async getSystemData(){let t=this.endpoints?.system?.data;return t?this.http.get(t).then(t=>t.status?t.data:{}).catch(t=>(console.error("âŒ AppAPI: Error getting system data:",t),{})):{}}async getURIDAta(){const t="undefined"!=typeof window?window.location.pathname+window.location.search:"/";return this.getViewData(t)}}},734:(t,e,r)=>{r.d(e,{Ay:()=>l,Fj:()=>o});var n=r(499),s=r(728);class i{constructor(t,e,r,n={},s=[]){this.__openTag=e,this.__closeTag=r,this.__attributes=n,this.__nodes=s,this.__definedAttributes=[],this.__tagName=t.split(":")[1],this.__fullName=t,this.__defineAttributes(Object.keys(n))}__update(t,e,r,n={},s=[]){return this.__openTag=e,this.__closeTag=r,this.__attributes=n,this.__nodes=s,this.__tagName=t.split(":")[1],this.__fullName=t,this.__defineAttributes(Object.keys(n)),this}__defineAttributes(t=[]){for(let e=0;e<t.length;e++){const r=t[e];this.__defineAttribute(r)}return this}__defineAttribute(t){return this.__definedAttributes.includes(t)||(this.__definedAttributes.push(t),(0,n.XN)(this,t,{set:e=>(this.__attributes[t]=e,e),get:()=>this.__attributes[t]})),this}get tagName(){return this.__tagName}set tagName(t){return this}get fullName(){return this.__fullName}set fullName(t){return this}get openTag(){return this.__openTag}get closeTag(){return this.__closeTag}get attributes(){return this.__attributes}get nodes(){return this.__nodes}getAttribute(t){return this.__attributes[t]}setAttribute(t,e){return this.__defineAttribute(t),this.__attributes[t]=e,this}__match(t={}){let e=Object.keys(t);for(let r=0;r<e.length;r++){const n=e[r],s=t[n];if("tagName"!==n){if("openTag"!==n){if("closeTag"!==n){if("attributes"!==n&&"nodes"!==n&&this.__attributes[n]!==s)return!1}else if(this.__closeTag!==s)return!1}else if(this.__openTag!==s)return!1}else if(this.__tagName!==s)return!1}return!0}__scan(){const t=[];let e=this.__openTag.nextSibling;for(;e&&e!==this.__closeTag;)t.push(e),e=e.nextSibling;return this.__nodes.length=0,this.__nodes.push(...t),this.__nodes}updateNodes(t=[]){return this.__nodes=t,this}}class a{constructor(t=[]){this.__models=t.map(t=>t instanceof i?t:new i(t.fullName,t.openTag,t.closeTag,t.attributes,t.nodes))}get models(){return this.__models}get length(){return this.__models.length}get first(){return this.__models[0]}get last(){return this.__models[this.__models.length-1]}push(t){return t instanceof i||(t=new i(t.fullName,t.openTag,t.closeTag,t.attributes,t.nodes)),this.__models.push(t),this}pop(){return this.__models.pop()}shift(){return this.__models.shift()}unshift(t){return t instanceof i||(t=new i(t.fullName,t.openTag,t.closeTag,t.attributes,t.nodes)),this.__models.unshift(t),this}splice(t,e,...r){return r instanceof a||(r=new a(r)),this.__models.splice(t,e,...r.__models),this}slice(t,e){return this.__models.slice(t,e)}concat(t){return t instanceof a||(t=new a(t)),new a(this.__models.concat(t.__models))}reverse(){return new a(this.__models.reverse())}get(t){return this.__models[t]}set(t,e){return this.__models[t]=e,this}map(t){return this.__models.map(t)}filter(t){return this.__models.filter(t)}reduce(t,e){return this.__models.reduce(t,e)}forEach(t){return this.__models.forEach(t)}some(t){return this.__models.some(t)}every(t){return this.__models.every(t)}query(t={}){return this.__models.filter(e=>e.__match(t))}find(t={}){return this.query(t)[0]||null}}const o=new class{constructor(){this.detector=new s.W(document.documentElement)}find(t="*",e={},r={},s=!1){(0,n.AO)(this,"useCache")||(r.useCache=!1);const o=this.detector.find("one:"+t,r),l=s&&"number"==typeof s&&s>0,h=s&&-1===s,c=s&&1===s;if(0===o.length)return h||l&&1==s?null:new a([]);if("object"!=typeof e||null===e||0===Object.keys(e).length){if(h){const t=o[o.length-1];return new i(t.fullName,t.openTag,t.closeTag,t.attributes,t.nodes)}return l?1==s?new i(o[0].fullName,o[0].openTag,o[0].closeTag,o[0].attributes,o[0].nodes):new a(o.slice(0,s)):new a(o)}const u=Object.keys(e),d=[],p=o.length,g=p-1;for(let t=0;t<p;t++){if(h&&t<g)continue;const r=o[t];let n=!0;for(let t=0;t<u.length;t++){const s=u[t],i=e[s];if(r.attributes[s]!==i){n=!1;break}}if(n){if(c)return new i(r.fullName,r.openTag,r.closeTag,r.attributes,r.nodes);if(h&&t===g)return new i(r.fullName,r.openTag,r.closeTag,r.attributes,r.nodes);if(d.push(r),l&&d.length>=s)return new a(d)}}return new a(d)}first(t="*",e={},r={}){return this.find(t,e,r,1)}},l=o},877:(t,e,r)=>{r.d(e,{Ix:()=>s}),r(479);class n{constructor(t,e,r,n={},s={}){this.$route=t,this.$urlPath=e,this.$params=r||{},this.$query=n||{},this.$fragment=s||{},this.$paramKeys=[...Object.keys(r||{})],Object.keys(r).forEach(t=>{Object.defineProperty(this,t,{get:()=>this.$params[t],set:e=>{this.$params[t]=e},enumerable:!0,configurable:!1})})}getPath(){return this.$urlPath||null}getUrlPath(){return this.$urlPath||null}getParams(){return this.$params||{}}getParam(t){return this.$params[t]||null}getQuery(){return this.$query||{}}getFragment(){return this.$fragment||{}}}class s{static activeRoute=null;static containers={};constructor(t=null){this.App=t,this.routes=[],this.currentRoute=null,this.mode="history",this.base="",this._beforeEach=null,this._afterEach=null,this.defaultRoute="/",this.handleRoute=this.handleRoute.bind(this),this.handlePopState=this.handlePopState.bind(this),this.routeConfigs={},this.currentUri=window.location.pathname+window.location.search}setApp(t){return this.App=t,this}addRouteConfig(t){this.routeConfigs[t.name]=t}setAllRoutes(t){for(const e of t)this.addRouteConfig(e)}getURL(t,e={}){const r=this.routeConfigs[t];if(!r)return null;let n=this.generateUrl(r.path,e);return n.startsWith("/")||n.startsWith("http:")||n.startsWith("https:")||(n=this.base+n),n}addRoute(t,e,r={}){this.routes.push({path:this.normalizePath(t),view:e,options:r})}setMode(t){this.mode=t}setBase(t){this.base=t}setDefaultRoute(t){this.defaultRoute=t}beforeEach(t){this._beforeEach=t}afterEach(t){this._afterEach=t}normalizePath(t){let e=t.startsWith("/")?t:"/"+t;return e.length>1&&e.endsWith("/")&&(e=e.slice(0,-1)),""===e&&(e="/"),e}matchFormat(t,e){let r=e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1");return r=r.replace(/\{[a-zA-Z0-9_]+\}/g,"([^\\/\\-.]+)"),r="^"+r+"$",new RegExp(r).test(t)}hasParameter(t){return/\{[a-zA-Z0-9_]+\}/.test(t)}isAnyParameter(t){return t.includes("*")||"{any}"===t.toLowerCase()}getParameterName(t){var e=/\{([a-zA-Z0-9_]+)\}/.exec(t);return e&&e[1]?e[1]:null}getParameterValue(t,e){if("string"!=typeof e||"string"!=typeof t)return null;if(t.match(/^\{[a-zA-Z0-9_]+\}$/))return e;let r=t.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1");r=r.replace(/\{[a-zA-Z0-9_]+\}/g,"([^\\/\\-.]+)");const n=new RegExp("^"+r+"$").exec(e);return n&&n[1]?n[1]:null}getAnyParameterValue(t,e){if("string"==typeof t&&t.includes("*")&&(t=t.replace(/\*/g,"{any}")),"string"!=typeof e||"string"!=typeof t)return null;let r=t.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1");r=r.replace(/\{[a-zA-Z0-9_]+\}/g,"([^\\/\\-.]+)");const n=new RegExp("^"+r+"$").exec(e);return n&&n[1]||null}checkParameterRoute(t,e){const r=this.App.Helper.trim(t.path,"/").split("/"),n=this.App.Helper.trim(e,"/").split("/");if(r.length!==n.length)return console.log("âŒ Different number of segments"),null;const s=r.length-1,i={};for(let t=0;t<r.length;t++){const e=r[t],a=n[t];if(this.isAnyParameter(e)){const r=this.getAnyParameterValue(e,a);if(i.any=r,t===s&&0===t)return i}else if(this.hasParameter(e)){const t=this.getParameterName(e),r=this.getParameterValue(e,a);if(null===r)return console.log("âŒ Parameter value is null"),null;i[t]=r}else if(e!==a)return console.log("âŒ Exact match failed"),null}return i}matchRoute(t){const e=this.normalizePath(t);for(const t of this.routes){const r=t.path;if(r.split("/").some(t=>this.hasParameter(t)||this.isAnyParameter(t))){const r=this.checkParameterRoute(t,e);if(null!==r)return{route:t,params:r,path:e}}else if(r===e)return{route:t,params:{},path:e}}return null}async handleRoute(t,e=!1){const r=t.split("?")[0],n=this.matchRoute(r);if(!n)return void console.warn(`No route found for: ${t}`);const{route:i,params:a}=n;if(this._beforeEach&&!1===await this._beforeEach(i,a))return;const o=s.getUrlParts(),l=o.query,h=o.hash;e||s.addActiveRoute(i,n.path,a,l,h),this.currentRoute={...i,$params:a,$query:l,$fragment:h,$urlPath:n.path},this.App.View&&(i.view||i.component)&&this.App.View.mountView(i.view||i.component,a,s.getActiveRoute()),this._afterEach&&this._afterEach(i,a)}async hydrateViews(){if(console.log("ğŸš€ Router.hydrateViews: Starting hydration of server-rendered views..."),!this.App?.View)return void console.error("âŒ Router.hydrateViews: App.View not available");const t=s.activeRoute||this.currentRoute;if(!t)return void console.error("âŒ Router.hydrateViews: No active route found");const{$route:e,$params:r,$urlPath:n,$query:i,$fragment:a}=t;if(this._beforeEach&&!1===await this._beforeEach(e,r,n))console.log("ğŸš« Router.hydrateViews: Cancelled by beforeEach hook");else if(e.view||e.component)try{const n=e.view||e.component;this.App.View.mountViewScan(n,r,t),this._afterEach&&this._afterEach(e,r)}catch(t){console.error("âŒ Router.hydrateViews: Error during hydration:",t)}}handlePopState(t){const e=window.location.pathname+window.location.search;this.handleRoute(e)}navigate(t){if("history"===this.mode){window.history.pushState({},"",t);try{this.handleRoute(t),this.currentUri=t}catch(t){console.error("âŒ Router.navigate handleRoute error:",t)}}else{window.location.hash=t;try{this.handleRoute(t),this.currentUri=t}catch(t){console.error("âŒ Router.navigate handleRoute (hash mode) error:",t)}}}generateUrl(t,e={},r=""){let n=t;for(const[t,r]of Object.entries(e))n=n.replace(`{${t}}`,r);return r&&!n.endsWith(r)&&(n+=r),n}navigateTo(t,e={},r=""){const n=this.generateUrl(t,e,r);this.navigate(n)}start(t=!1){const e=this.App?.View?.detectServerRendered?.()||!1,r=(s.getUrlParts(),"history"===this.mode?window.location.pathname+window.location.search:window.location.hash.substring(1)||this.defaultRoute);console.log("ğŸ” Router.start: Detected SSR:",e),this.setActiveRouteForCurrentPath(r),"history"===this.mode?window.addEventListener("popstate",this.handlePopState):window.addEventListener("hashchange",this.handlePopState),e?(console.log("ğŸš€ Router.start: Starting SSR hydration..."),this.hydrateViews()):t?console.log("ğŸ” Router.start: Skipping initial route handling"+("history"===this.mode?"":"( hash)")+" but activeRoute is set"):(console.log("ğŸš€ Router.start: Starting CSR rendering..."),this.handleRoute(r)),this.setupAutoNavigation()}stop(){"history"===this.mode?window.removeEventListener("popstate",this.handlePopState):window.removeEventListener("hashchange",this.handlePopState),document.removeEventListener("click",this._autoNavHandler)}setActiveRouteForCurrentPath(t){const e=t.split("?")[0],r=this.matchRoute(e);if(r){const{route:t,params:e}=r,n=s.getUrlParts(),i=n.query,a=n.hash;s.addActiveRoute(t,r.path,e,i,a),this.currentRoute={...t,$params:e,$query:i,$fragment:a,$urlPath:r.path}}else console.log("âŒ No matching route found for current path:",t)}setupAutoNavigation(){console.log("ğŸ” setupAutoNavigation called"),this._autoNavHandler=this.handleAutoNavigation.bind(this),document.addEventListener("click",this._autoNavHandler),console.log("âœ… Auto-navigation setup complete - event listener added")}handleAutoNavigation(t){const e=t.target.closest("[data-nav-link]");if(e){if(e.hasAttribute("data-nav-disabled"))return void console.log("ğŸš« Skipping disabled data-nav-link element");const r=e.getAttribute("data-nav-link");if(console.log("ğŸ” navPath:",r),r&&""!==r.trim())return console.log("ğŸ”— Auto-navigating via data-nav-link attribute:",r),t.preventDefault(),r===this.currentUri?void console.log("ğŸš« Same path - no navigation needed:",r):void this.navigate(r)}const r=t.target.closest("a[href]");if(!r)return;if("_blank"===r.target)return void console.log('ğŸš« Skipping external link with target="_blank":',r.href);if("disabled"===r.dataset.nav||"false"===r.getAttribute("data-nav"))return void console.log("ğŸš« Skipping disabled link:",r.href);if("false"===r.dataset.nav)return void console.log("ğŸš« Skipping explicitly disabled link:",r.href);if(r.href.startsWith("mailto:")||r.href.startsWith("tel:")||r.href.startsWith("javascript:"))return void console.log("ğŸš« Skipping special protocol link:",r.href);const n=r.href;try{const t=new URL(n),e=new URL(window.location.href);if(t.host!==e.host)return void console.log("ğŸš« Skipping external domain link:",n)}catch(t){console.log("âš ï¸ URL parsing failed, treating as internal:",n)}if(n.startsWith("http://")||n.startsWith("https://"))try{const e=new URL(n),r=new URL(window.location.href);if(e.host===r.host){const r=e.pathname+e.search;return console.log("ğŸ”— Auto-navigating to same domain URL:",r),t.preventDefault(),r===this.currentUri?void console.log("ğŸš« Same path - no navigation needed:",r):void this.navigate(r)}}catch(t){console.log("âš ï¸ URL parsing failed for full URL:",n)}if(n&&!n.startsWith("http")&&!n.startsWith("//"))return console.log("ğŸ”— Auto-navigating to relative URL:",n),t.preventDefault(),n===this.currentUri?void console.log("ğŸš« Same path - no navigation needed:",n):void this.navigate(n);console.log("ğŸš« Skipping unsupported link format:",n)}static getUrlParts(){const{location:t}=window,{search:e,hash:r,pathname:n}=t;return{url:t.href,protocol:t.protocol,search:e.startsWith("?")?e.substring(1):e,path:n,query:Object.fromEntries(new URLSearchParams(e)),hash:r.startsWith("#")?r.substring(1):r}}static addActiveRoute(t,e,r,i={},a=null){t.path&&(s.containers[t.path]?(s.containers[t.path].$urlPath=e,s.containers[t.path].$params=r,s.containers[t.path].$query=i,s.containers[t.path].$fragment=a,s.activeRoute=s.containers[t.path]):(s.containers[t.path]=new n(t,e,r,i,a),s.activeRoute=s.containers[t.path]))}static getCachedRoute(t){return s.containers[t]||null}static getCurrentRoute(){return s.activeRoute||null}static getActiveRoute(){return s.activeRoute||null}static getCurrentPath(){return window.location.pathname}static getCurrentUri(){return"history"===this.mode?s.getCurrentPath():s.getCurrentHash()}static getCurrentHash(){return window.location.hash.substring(1)||""}static getCurrentUrl(){return"history"===this.mode?s.getCurrentPath()+window.location.search:s.getCurrentHash()}static getCurrentQuery(){return Object.fromEntries(new URLSearchParams(window.location.search))}static getCurrentFragment(){return window.location.hash.substring(1)||""}}}}]);
//# sourceMappingURL=core-5836a356.js.map
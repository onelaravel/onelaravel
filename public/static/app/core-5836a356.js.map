{"version":3,"file":"core-5836a356.js","mappings":"0LAOO,MAAMA,EACT,WAAAC,CAAYC,EAAM,MACdC,KAAKD,IAAMA,CACf,CAEA,MAAAE,CAAOF,GACHC,KAAKD,IAAMA,CACf,CAQA,IAAAG,CAAKC,EAAKC,EAAO,KACb,GAAmB,iBAARD,EAAkB,OAAOA,EACpC,MAAME,EAAQ,IAAIC,OAAO,IAAIF,MAASA,MAAU,KAChD,OAAOD,EAAII,QAAQF,EAAO,GAC9B,CAOA,YAAAG,CAAaL,GACT,MAAmB,iBAARA,GACJ,kBAAkBM,KAAKN,EAClC,CAEA,MAAAO,CAAOP,EAAKQ,EAAOC,GACf,MAAmB,iBAART,EAAyBA,EAC7BA,EAAIU,UAAUF,EAAOC,EAChC,CAEA,UAAAE,CAAWX,GACP,MAAmB,iBAARA,EAAyBA,EAC7BA,EAAIY,aACf,CAEA,UAAAC,CAAWb,GACP,MAAmB,iBAARA,EAAyBA,EAC7BA,EAAIc,aACf,CASA,UAAAC,CAAWC,EAAMC,EAAS,cACtB,MAAMC,EAAI,IAAIC,KAAKH,GACnB,GAAII,MAAMF,EAAEG,WAAY,MAAO,GAE/B,MAAMC,EAAOJ,EAAEK,cACTC,EAAQC,OAAOP,EAAEQ,WAAa,GAAGC,SAAS,EAAG,KAC7CC,EAAMH,OAAOP,EAAEW,WAAWF,SAAS,EAAG,KACtCG,EAAQL,OAAOP,EAAEa,YAAYJ,SAAS,EAAG,KACzCK,EAAUP,OAAOP,EAAEe,cAAcN,SAAS,EAAG,KAC7CO,EAAUT,OAAOP,EAAEiB,cAAcR,SAAS,EAAG,KAEnD,OAAOV,EACFb,QAAQ,OAAQkB,GAChBlB,QAAQ,KAAMoB,GACdpB,QAAQ,KAAMwB,GACdxB,QAAQ,KAAM0B,GACd1B,QAAQ,KAAM4B,GACd5B,QAAQ,KAAM8B,EACvB,CAQA,YAAAE,CAAaC,EAAKC,EAAU,CAAC,GACzB,GAAmB,iBAARD,GAAoBjB,MAAMiB,GAAM,MAAO,IAElD,MAAM,SACFE,EAAW,EAAC,mBACZC,EAAqB,IAAG,iBACxBC,EAAmB,IAAG,OACtBC,EAAS,GAAE,OACXC,EAAS,IACTL,EAEEM,EAAQP,EAAIQ,QAAQN,GAAUO,MAAM,KAG1C,OAFAF,EAAM,GAAKA,EAAM,GAAGxC,QAAQ,wBAAyBoC,GAE9CE,EAASE,EAAMG,KAAKN,GAAoBE,CACnD,CAQA,cAAAK,CAAeC,EAAQC,EAAW,OAU9B,OATwB,CACpB,IAAO,IACP,IAAO,IACP,IAAO,IACP,IAAO,IACP,IAAO,KAGoBA,IAAaA,GAC5BrD,KAAKuC,aAAaa,EAAQ,CAAEV,SAAU,GAC1D,CASA,QAAAY,CAASC,EAAM3C,EAAS,IAAKkC,EAAS,OAClC,MAAoB,iBAATS,GAAqBA,EAAK3C,QAAUA,EACpC2C,EAEJA,EAAK1C,UAAU,EAAGD,GAAQV,OAAS4C,CAC9C,CAOA,YAAAU,CAAa5C,EAAS,GAElB,IAAI6C,EAAS,GACb,IAAK,IAAIC,EAAI,EAAGA,EAAI9C,EAAQ8C,IACxBD,GAHU,iEAGME,OAAOC,KAAKC,MAAsBC,GAAhBF,KAAKG,WAE3C,OAAON,CACX,CAOA,SAAAO,CAAUC,GACN,GAAY,OAARA,GAA+B,iBAARA,EAAkB,OAAOA,EACpD,GAAIA,aAAe3C,KAAM,OAAO,IAAIA,KAAK2C,EAAIzC,WAC7C,GAAIyC,aAAeC,MAAO,OAAOD,EAAIE,IAAIC,GAAQpE,KAAKgE,UAAUI,IAChE,GAAmB,iBAARH,EAAkB,CACzB,MAAMI,EAAS,CAAC,EAIhB,OAHAC,OAAOC,KAAKN,GAAKO,QAAQC,IACrBJ,EAAOI,GAAOzE,KAAKgE,UAAUC,EAAIQ,MAE9BJ,CACX,CACA,OAAOJ,CACX,CAQA,QAAAS,CAASC,EAAMC,GACX,IAAIC,EACJ,OAAO,YAA6BC,GAKhCC,aAAaF,GACbA,EAAUG,WALI,KACVD,aAAaF,GACbF,KAAQG,IAGgBF,EAChC,CACJ,CAQA,QAAAK,CAASN,EAAMO,GACX,IAAIC,EACJ,OAAO,YAA6BL,GAC3BK,IACDR,EAAKS,MAAMpF,KAAM8E,GACjBK,GAAa,EACbH,WAAW,IAAMG,GAAa,EAAOD,GAE7C,CACJ,CAMA,eAAAG,GACI,MAAO,CACHC,MAAO,CACH,CACIC,IAAK,QACLC,SAAU,QACVC,UAAW,aAGnBC,YAAa,CACT,CACIH,IAAK,OACLC,SAAU,2BACVG,MAAO,CAAEC,KAAM,eACfH,UAAW,YAGnBI,SAAU,CACN,CACIN,IAAK,OACLC,SAAU,wBACVG,MAAO,CAAEC,KAAM,YACfH,UAAW,YAGnBK,QAAS,CACL,CACIP,IAAK,OACLC,SAAU,4BACVG,MAAO,CAAEI,SAAU,YACnBN,UAAW,YAGnBO,cAAe,CACX,CACIT,IAAK,OACLC,SAAU,kCACVG,MAAO,CAAEI,SAAU,kBACnBN,UAAW,YAGnBQ,QAAS,CACL,CACIV,IAAK,OACLC,SAAU,4BACVG,MAAO,CAAEI,SAAU,YACnBN,UAAW,YAI3B,CAQA,aAAAS,CAAczB,EAAK0B,GACf,MAAMC,EAAQpG,KAAKqG,IAAIC,KAAK7B,GAC5B,SAAK2B,GAA0B,IAAjBA,EAAMxF,SAEpBwF,EAAM5B,QAAQJ,IACV,IAAImC,EAAUC,SAASC,cAAcrC,EAAKoB,UACrCe,IACDA,EAAUC,SAASE,cAActC,EAAKmB,KAClCnB,EAAKuB,OACLrB,OAAOqC,QAAQvC,EAAKuB,OAAOnB,QAAQ,EAAEoC,EAASC,MAC1CN,EAAQO,aAAaF,EAASC,KAGtCL,SAASO,KAAKC,YAAYT,IAG1BnC,EAAKqB,YACkB,aAAnBrB,EAAKqB,UACLc,EAAQU,YAAcd,EAEtBI,EAAQO,aAAa1C,EAAKqB,UAAWU,MAK1C,GACX,CAMA,WAAAe,CAAY5B,GACRtF,KAAKkG,cAAc,QAASZ,EAChC,CAMA,iBAAA6B,CAAkBzB,GACd1F,KAAKkG,cAAc,cAAeR,EACtC,CAMA,cAAA0B,CAAevB,GACX7F,KAAKkG,cAAc,WAAYL,EACnC,CAMA,aAAAwB,CAAc/B,GACVtF,KAAKkG,cAAc,UAAWZ,EAClC,CAMA,mBAAAgC,CAAoB5B,GAChB1F,KAAKkG,cAAc,gBAAiBR,EACxC,CAMA,aAAA6B,CAAcC,GACVxH,KAAKkG,cAAc,UAAWsB,EAClC,CAOA,YAAAC,CAAaC,EAAMC,OAAOC,SAASC,MAC/B,MAAMC,EAAS,CAAC,EAKhB,OAJe,IAAIC,IAAIL,GAChBM,aAAaxD,QAAQ,CAAC2B,EAAO1B,KAChCqD,EAAOrD,GAAO0B,IAEX2B,CACX,CAQA,QAAAG,CAASC,EAASJ,EAAS,CAAC,GACxB,MAAMJ,EAAM,IAAIK,IAAIG,GAMpB,OALA5D,OAAOqC,QAAQmB,GAAQtD,QAAQ,EAAEC,EAAK0B,MAC9BA,SACAuB,EAAIM,aAAaG,IAAI1D,EAAK0B,KAG3BuB,EAAIU,UACf,CAOA,YAAAC,CAAa9B,GACT,MAAM+B,EAAO/B,EAAQgC,wBACrB,OACID,EAAKE,KAAO,GACZF,EAAKG,MAAQ,GACbH,EAAKI,SAAWf,OAAOgB,aAAenC,SAASoC,gBAAgBC,eAC/DP,EAAKQ,QAAUnB,OAAOoB,YAAcvC,SAASoC,gBAAgBI,YAErE,CAOA,QAAAC,CAAS1C,EAAS9D,EAAU,CAAC,GACzB,MAAMyG,EAA4B,iBAAZ3C,EAAuBC,SAASC,cAAcF,GAAWA,EAC/E,IAAK2C,EAAQ,OAEb,MAAM,SACFC,EAAW,SAAQ,MACnBC,EAAQ,QAAO,OACfC,EAAS,UAAS,OAClBC,EAAS,GACT7G,EAEE8G,EAAiBL,EAAOM,UAAYF,EAC1C3B,OAAOsB,SAAS,CACZT,IAAKe,EACLJ,YAER,CAOA,qBAAMM,CAAgBlG,GAClB,IAEI,aADMmG,UAAUC,UAAUC,UAAUrG,IAC7B,CACX,CAAE,MAAOsG,GAEL,OADAC,QAAQD,MAAM,+BAAgCA,IACvC,CACX,CACJ,CAQA,YAAAE,CAAaC,EAASC,EAAUC,EAAW,cACvC,MAAMC,EAAO,IAAIC,KAAK,CAACJ,GAAU,CAAEK,KAAMH,IACnCxC,EAAMK,IAAIuC,gBAAgBH,GAC1BI,EAAO/D,SAASE,cAAc,KACpC6D,EAAK1C,KAAOH,EACZ6C,EAAKC,SAAWP,EAChBzD,SAASiE,KAAKzD,YAAYuD,GAC1BA,EAAKG,QACLlE,SAASiE,KAAKE,YAAYJ,GAC1BxC,IAAI6C,gBAAgBlD,EACxB,CAMA,aAAAmD,GACI,MAAMC,EAAQnD,OAAOoB,WACrB,OAAI+B,EAAQ,IAAY,SACpBA,EAAQ,KAAa,SAClB,SACX,CAWA,KAAAC,CAAM3E,GACF,OAAIlC,MAAM8G,QAAQ5E,GACPA,EAAMxF,OACW,iBAAVwF,GAAgC,OAAVA,EAC7B9B,OAAOC,KAAK6B,GAAOxF,OAEvB,CACX,CAOA,MAAAqK,CAAO9E,GACH,OAAiB,OAAVA,CACX,CAOA,OAAA6E,CAAQ7E,GACJ,OAAOjC,MAAM8G,QAAQ7E,EACzB,CAOA,QAAA+E,CAAS/E,GACL,MAAwB,iBAAVA,CAClB,CAOA,SAAAgF,CAAUhF,GACN,OAAQ5E,MAAM6J,WAAWjF,KAAWkF,SAASlF,EACjD,CAMA,GAAAmF,GACI,MAAMA,EAAM,IAAIhK,KAChB,MAAO,CACHF,OAAQ,SAAUA,GACd,IAAKA,EAAQ,OAAOkK,EAAIC,cAGxB,MAAM9J,EAAO6J,EAAI5J,cACXC,EAAQC,OAAO0J,EAAIzJ,WAAa,GAAGC,SAAS,EAAG,KAC/CC,EAAMH,OAAO0J,EAAItJ,WAAWF,SAAS,EAAG,KACxCG,EAAQL,OAAO0J,EAAIpJ,YAAYJ,SAAS,EAAG,KAC3CK,EAAUP,OAAO0J,EAAIlJ,cAAcN,SAAS,EAAG,KAC/CO,EAAUT,OAAO0J,EAAIhJ,cAAcR,SAAS,EAAG,KAErD,OAAOV,EACFb,QAAQ,IAAKkB,GACblB,QAAQ,IAAKoB,GACbpB,QAAQ,IAAKwB,GACbxB,QAAQ,IAAK0B,GACb1B,QAAQ,IAAK4B,GACb5B,QAAQ,IAAK8B,EACtB,EACAb,QAAS,WACL,OAAO8J,EAAI9J,SACf,EACA4G,SAAU,WACN,OAAOkD,EAAIlD,UACf,EAER,CAMA,KAAAoD,GACI,OAAO,IAAIlK,IACf,CAQA,IAAAH,CAAKA,EAAMC,EAAS,eAGhB,OAFU,IAAIE,KAAKH,GAEVoK,cAAcE,MAAM,EAAG,IAAIlL,QAAQ,IAAK,IACrD,CASA,GAAAmL,CAAIjH,EAAKkH,EAAe,MAGpB,OAAOA,CACX,CAYA,OAAAC,CAAQzL,GACJ,MAAmB,iBAARA,GAAmC,IAAfA,EAAIS,OAAqBT,EACjDA,EAAIwD,OAAO,GAAG1C,cAAgBd,EAAIsL,MAAM,EACnD,CAQA,OAAAI,CAAQ1L,GACJ,MAAmB,iBAARA,GAAmC,IAAfA,EAAIS,OAAqBT,EACjDA,EAAIwD,OAAO,GAAG5C,cAAgBZ,EAAIsL,MAAM,EACnD,CAUA,WAAAK,CAAYC,EAAQxL,EAASyL,GACzB,GAAI9H,MAAM8G,QAAQe,GAAS,CACvB,IAAItI,EAASuI,EAKb,OAJAD,EAAOvH,QAAQ,CAACyH,EAAGvI,KACf,MAAMwI,EAAIhI,MAAM8G,QAAQzK,QAA2B4L,IAAf5L,EAAQmD,GAAmBnD,EAAQmD,GAAK,GAAMnD,EAClFkD,EAASA,EAAOR,MAAMgJ,GAAG/I,KAAKgJ,KAE3BzI,CACX,CACI,OAAOuI,EAAQ/I,MAAM8I,GAAQ7I,KAAK3C,EAE1C,CASA,OAAA6L,CAAQC,EAAWlM,GACf,MAAmB,iBAARA,GAAyC,iBAAdkM,EAA+B,GAC9DlM,EAAI8C,MAAMoJ,EACrB,CASA,OAAAC,CAAQC,EAAMC,GACV,OAAKtI,MAAM8G,QAAQwB,GACZA,EAAOtJ,KAAKqJ,GADgB,EAEvC,CASA,QAAAE,CAASC,EAAQC,GACb,QAAKzI,MAAM8G,QAAQ2B,IACZA,EAASC,SAASF,EAC7B,CAQA,YAAAG,CAAaC,GACT,OAAK5I,MAAM8G,QAAQ8B,GACZ5I,MAAM6I,KAAK,IAAIC,IAAIF,IADM,EAEpC,CAQA,WAAAG,IAAeC,GACX,MAAO,GAAGC,UAAUD,EACxB,CAQA,QAAAE,CAASjH,GACL,OAAOjC,MAAM8G,QAAQ7E,EACzB,CAQA,SAAAkH,CAAUlH,GACN,MAAwB,iBAAVA,CAClB,CAQA,UAAAmH,CAAWnH,GACP,OAAQ5E,MAAM6J,WAAWjF,KAAWkF,SAASlF,EACjD,CAQA,KAAAoH,CAAMpH,GACF,OAAIA,SACiB,iBAAVA,GAAuC,KAAjBA,EAAMjG,WACnCgE,MAAM8G,QAAQ7E,IAA2B,IAAjBA,EAAMvF,SACb,iBAAVuF,IAAuBjC,MAAM8G,QAAQ7E,IAAwC,IAA9B7B,OAAOC,KAAK4B,GAAOvF,SAC/D,IAAVuF,GACU,IAAVA,CAER,CAQA,KAAAqH,CAAMrH,GACF,OAAOA,OACX,CAQA,WAAAsH,CAAYtH,GACR,OAAOuH,KAAKC,UAAUxH,EAC1B,CAQA,WAAAyH,CAAYzH,GACR,OAAOuH,KAAKG,MAAM1H,EACtB,CAMA,QAAA2H,GACI,MAAgC,WAAzB9N,KAAK6K,eAChB,CAMA,QAAAkD,GACI,MAAgC,WAAzB/N,KAAK6K,eAChB,CAMA,SAAAmD,GACI,MAAgC,YAAzBhO,KAAK6K,eAChB,E,uECpwBG,MAAMoD,EACT,WAAAnO,EAAY,IAAEC,EAAG,OAAEmO,EAAM,UAAEC,EAAY,GAAE,YAAEC,EAAc,IAAM,GAAE,SAAEC,GAAW,EAAK,SAAEC,EAAW,KAI5FtO,KAAKD,IAAMA,EAIXC,KAAKkO,OAASA,EAIdlO,KAAKuO,OAASL,EAAOK,OAIrBvO,KAAKmO,UAAYA,EAIjBnO,KAAKoO,YAAcA,EAInBpO,KAAKqO,SAAWA,EAIhBrO,KAAKwO,GAAKF,IAAY,UAItBtO,KAAKyO,YAAa,EAElBzO,KAAK0O,QAAU,KACf1O,KAAK2O,SAAW,KAChB3O,KAAK4O,YAAc,GACnB5O,KAAK6O,WAAa,GAClB7O,KAAK8O,WAAY,EACjB9O,KAAK+O,WAAY,EAIjB/O,KAAKgP,OAAS,IAClB,CACA,OAAAC,GACQjP,KAAK8O,YACT9O,KAAK8O,WAAY,EACjB9O,KAAKkP,OACDlP,KAAKmO,UAAUvN,OAAS,GACxBZ,KAAKmO,UAAU3J,QAAQ2K,IACnB,MAAMC,EAAcpP,KAAKuO,OAAOc,YAAYF,EAAU,KAClDrF,QAAQwF,IAAI,sBAAsBtP,KAAKwO,iCAAiCW,mBACxEnP,KAAKuP,UAETvP,KAAK6O,WAAWW,KAAKJ,KAGjC,CACA,SAAAK,GACIzP,KAAK8O,WAAY,EACb9O,KAAK6O,WAAWjO,OAAS,IACzBZ,KAAK6O,WAAWrK,QAAQ4K,IACpBA,MAEJpP,KAAK6O,WAAa,GAE1B,CAEA,WAAAa,GACI,MAAO,gDAA6C1P,KAAKwO,8CAC7D,CAEA,MAAAmB,GAEI,MAAO,wCAAqC3P,KAAKwO,kBAAkBxO,KAAKmO,UAAUjL,KAAK,kBAAkBlD,KAAKwO,aAAUxO,KAAKoO,2CACjI,CACA,QAAAwB,GACI,OAAO5P,KAAKoO,aAChB,CACA,KAAAmB,GACIvP,KAAKkO,OAAO2B,mBACZ,IACI7P,KAAKyP,YACLzP,KAAK8P,QACD9P,KAAK2O,UAAY3O,KAAK2O,SAASoB,aAC/B,IAAOC,OAAOhQ,KAAK2O,SAAU3O,KAAK4P,YAClC5P,KAAKiP,UAEb,CAAE,MAAOgB,GACLnG,QAAQD,MAAM,8BAA+BoG,EACjD,CACAjQ,KAAKkO,OAAOgC,iBAChB,CAEA,OAAAC,GACInQ,KAAKyP,YACLzP,KAAK8P,OACT,CAGA,IAAAZ,GACIpF,QAAQwF,IAAI,sBAAsBtP,KAAKwO,mBACnCxO,KAAKgP,QAMLhP,KAAK4O,YAAc,GACnB5O,KAAKgP,OAAOoB,SACZpQ,KAAK4O,YAAc5O,KAAKgP,OAAOqB,MAAM5E,UAPrCzL,KAAKgP,OAAS,KAAUsB,MAAM,SAAU,CAAE9B,GAAIxO,KAAKwO,IAAM,CAAC,GAAG,GAC7DxO,KAAK0O,QAAU1O,KAAKgP,OAAON,QAC3B1O,KAAK2O,SAAW3O,KAAKgP,OAAOL,SAC5B3O,KAAK4O,YAAc5O,KAAKgP,OAAOqB,MAAM5E,SAMzCzL,KAAK+O,WAAY,CACrB,CACA,KAAAe,GACI9P,KAAK4O,YAAYpK,QAAQ+L,IACjBA,EAAKR,YACLQ,EAAKR,WAAWpF,YAAY4F,KAGpCvQ,KAAK4O,YAAc,EACvB,E,iCCGJ,QApIO,MACH,sBAAO4B,CAAgBjK,GACnB,KAAMA,aAAmBkK,SAAWlK,aAAmBmK,SACnD,MAAM,IAAIC,MAAM,6CAEpB,OAAO,CACX,CAKA,iBAAOC,CAAW5G,GACd,MAAM6G,EAAWrK,SAASsK,yBAEpBC,EAAc3M,IAChB,GAAKA,EACL,GAAoB,iBAATA,EAAmB,CAC1B,MAAM4M,EAAWxK,SAASE,cAAc,YACxCsK,EAASC,UAAY7M,EAAKlE,OAC1B2Q,EAAS7J,YAAYgK,EAAShH,QAClC,MAAW5F,aAAgBqM,SAAWrM,aAAgB8M,iBAClDL,EAAS7J,YAAY5C,GACdF,MAAM8G,QAAQ5G,IAASA,aAAgB+M,SAC9C/M,EAAKI,QAAQuM,GAEbjH,QAAQsH,KAAK,4BAA6BhN,IAKlD,OADA2M,EAAW/G,GACJ6G,CACX,CAOA,aAAOb,CAAO9G,EAAQc,GAClB,KAAMd,aAAkBuH,SAAWvH,aAAkBwH,SAAU,MAAM,IAAIC,MAAM,gCAC/EzH,EAAO6G,WAAWsB,aAAarR,KAAK4Q,WAAW5G,GAAUd,EAC7D,CAOA,YAAOoI,CAAMpI,EAAQc,GACjB,KAAMd,aAAkBuH,SAAWvH,aAAkBwH,SAAU,MAAM,IAAIC,MAAM,gCAC/E,MAAMY,EAAOvR,KAAK4Q,WAAW5G,GACzBd,EAAOsI,YAAatI,EAAO6G,WAAWsB,aAAaE,EAAMrI,EAAOsI,aAC/DtI,EAAO6G,WAAW/I,YAAYuK,EACvC,CAOA,cAAOhR,CAAQ2I,EAAQc,GACnB,KAAMd,aAAkBuH,SAAWvH,aAAkBwH,SAAU,MAAM,IAAIC,MAAM,gCAC/EzH,EAAOuI,YAAYzR,KAAK4Q,WAAW5G,GACvC,CAOA,aAAO0H,CAAOxI,EAAQc,GAClB,KAAMd,aAAkBuH,SAAU,MAAM,IAAIE,MAAM,gCAClDzH,EAAOlC,YAAYhH,KAAK4Q,WAAW5G,GACvC,CAOA,cAAO2H,CAAQzI,EAAQc,GACnB,KAAMd,aAAkBuH,SAAU,MAAM,IAAIE,MAAM,gCAC7CzH,EAAO0I,WAIZ1I,EAAOmI,aAAarR,KAAK4Q,WAAW5G,GAAUd,EAAO0I,YAHjD1I,EAAOlC,YAAYhH,KAAK4Q,WAAW5G,GAI3C,CAMA,cAAO6H,CAAQ3I,EAAQc,GACnB,KAAMd,aAAkBuH,SAAU,MAAM,IAAIE,MAAM,gCAClDzH,EAAO+H,UAAY,GACnB/H,EAAOlC,YAAYhH,KAAK4Q,WAAW5G,GACvC,CAOA,qBAAO8H,CAAe5I,EAAQc,GAC1B,KAAMd,aAAkBuH,SAAU,MAAM,IAAIE,MAAM,gCAClDzH,EAAO+H,UAAY,GACnB/H,EAAOlC,YAAYhH,KAAK4Q,WAAW5G,GACvC,CAEA,cAAOA,CAAQd,EAAQc,GACnB,QAAgBmC,IAAZnC,EAAuB,CAEvB,KAAMd,aAAkBuH,SAAU,MAAM,IAAIE,MAAM,gCAClD,OAAOzH,EAAO+H,SAClB,CAEIjR,KAAK6R,QAAQ3I,EAAQc,EAE7B,CAEA,eAAO+H,CAAS7I,EAAQ6I,EAAW,MAC/B,KAAM7I,aAAkBuH,SAAU,MAAM,IAAIE,MAAM,gCAClD,GAAIoB,QACA,OAAO7N,MAAM6I,KAAK7D,EAAO6I,UAEzB7I,EAAO+H,UAAY,GACnB/H,EAAOlC,YAAYhH,KAAK4Q,WAAWmB,GAE3C,E,+CC5DG,MAAMC,EAAM,IA7DZ,MACH,WAAAlS,GAMI,GALAE,KAAKiS,KAAO,IAAI,IAChBjS,KAAKiS,KAAKC,UAAU,eAAgB,oBACpClS,KAAKiS,KAAKC,UAAU,SAAU,oBAC9BlS,KAAKiS,KAAKC,UAAU,mBAAoB,kBAEhB,oBAAb1L,SAA0B,CACjC,MAAM2L,EAAY3L,SAASC,cAAc,2BACrC0L,GACAnS,KAAKiS,KAAKC,UAAU,eAAgBC,EAAUC,aAAa,WAEnE,CACApS,KAAKiS,KAAKC,UAAU,cAAe,QACnClS,KAAKqS,UAA8B,oBAAX1K,QAAyBA,OAAO2K,aAAaC,KAAKF,WAAkB,CAAC,CACjG,CACA,iBAAMG,CAAYC,GACd,IAQI,aAPuBzS,KAAKiS,KAAKS,IAAID,GAAKE,KAAKC,GACpCA,EAASC,OAASD,EAASE,KAAO,CAAC,GAC3CC,MAAMlJ,IACLC,QAAQD,MAAM,qCAAsCA,GAC7C,CAAC,GAIhB,CAAE,MAAOA,GAEL,OADAC,QAAQD,MAAM,qCAAsCA,GAC7C,CAAC,CACZ,CAEJ,CACA,qBAAMmJ,GACF,MAAO,CAAC,CAOZ,CACA,mBAAMC,GACF,IAAIC,EAAWlT,KAAKqS,WAAWc,QAAQL,KACvC,OAAKI,EAGElT,KAAKiS,KAAKS,IAAIQ,GAAUP,KAAKC,GACzBA,EAASC,OAASD,EAASE,KAAO,CAAC,GAC3CC,MAAMlJ,IACLC,QAAQD,MAAM,uCAAwCA,GAC/C,CAAC,IAND,CAAC,CAQhB,CAEA,gBAAMuJ,GACF,MAAMX,EAAwB,oBAAX9K,OAAyBA,OAAOC,SAASyL,SAAW1L,OAAOC,SAASmE,OAAS,IAChG,OAAO/L,KAAKwS,YAAYC,EAC5B,E,iEC9DG,MAAMa,EACT,WAAAxT,CAAYyT,EAAU7E,EAASC,EAAU6E,EAAa,CAAC,EAAGnD,EAAQ,IAI9DrQ,KAAKyT,UAAY/E,EAIjB1O,KAAK0T,WAAa/E,EAClB3O,KAAK2T,aAAeH,EAIpBxT,KAAK4T,QAAUvD,EACfrQ,KAAK6T,oBAAsB,GAC3B7T,KAAK8T,UAAYP,EAAStQ,MAAM,KAAK,GACrCjD,KAAK+T,WAAaR,EAClBvT,KAAKgU,mBAAmB1P,OAAOC,KAAKiP,GACxC,CACA,QAAAS,CAASV,EAAU7E,EAASC,EAAU6E,EAAa,CAAC,EAAGnD,EAAQ,IAQ3D,OAPArQ,KAAKyT,UAAY/E,EACjB1O,KAAK0T,WAAa/E,EAClB3O,KAAK2T,aAAeH,EACpBxT,KAAK4T,QAAUvD,EACfrQ,KAAK8T,UAAYP,EAAStQ,MAAM,KAAK,GACrCjD,KAAK+T,WAAaR,EAClBvT,KAAKgU,mBAAmB1P,OAAOC,KAAKiP,IAC7BxT,IACX,CACA,kBAAAgU,CAAmBE,EAAgB,IAC/B,IAAK,IAAIxQ,EAAI,EAAGA,EAAIwQ,EAActT,OAAQ8C,IAAK,CAC3C,MAAMe,EAAMyP,EAAcxQ,GAC1B1D,KAAKmU,kBAAkB1P,EAC3B,CACA,OAAOzE,IACX,CACA,iBAAAmU,CAAkBvO,GACd,OAAI5F,KAAK6T,oBAAoBjH,SAAShH,KAGtC5F,KAAK6T,oBAAoBrE,KAAK5J,IAC9B,QAAa5F,KAAM4F,EAAM,CACrBuC,IAAMhC,IACFnG,KAAK2T,aAAa/N,GAAQO,EACnBA,GAEXuM,IAAK,IACM1S,KAAK2T,aAAa/N,MATtB5F,IAaf,CACA,WAAIoU,GACA,OAAOpU,KAAK8T,SAChB,CACA,WAAIM,CAAQxO,GAER,OAAO5F,IACX,CACA,YAAIuT,GACA,OAAOvT,KAAK+T,UAChB,CACA,YAAIR,CAAS3N,GAET,OAAO5F,IACX,CACA,WAAI0O,GACA,OAAO1O,KAAKyT,SAChB,CACA,YAAI9E,GACA,OAAO3O,KAAK0T,UAChB,CACA,cAAIF,GACA,OAAOxT,KAAK2T,YAChB,CAKA,SAAItD,GACA,OAAOrQ,KAAK4T,OAChB,CACA,YAAAxB,CAAaxM,GACT,OAAO5F,KAAK2T,aAAa/N,EAC7B,CACA,YAAAkB,CAAalB,EAAMO,GAGf,OAFAnG,KAAKmU,kBAAkBvO,GACvB5F,KAAK2T,aAAa/N,GAAQO,EACnBnG,IACX,CACA,OAAAqU,CAAQb,EAAa,CAAC,GAClB,IAAIjP,EAAOD,OAAOC,KAAKiP,GACvB,IAAK,IAAI9P,EAAI,EAAGA,EAAIa,EAAK3D,OAAQ8C,IAAK,CAClC,MAAMe,EAAMF,EAAKb,GACXyC,EAAQqN,EAAW/O,GACzB,GAAY,YAARA,GAMC,GAAY,YAARA,GAMJ,GAAY,aAARA,GAMJ,GAAY,eAARA,GAGQ,UAARA,GAGAzE,KAAK2T,aAAalP,KAAS0B,EAChC,OAAO,OAZP,GAAInG,KAAK0T,aAAevN,EACpB,OAAO,OAPX,GAAInG,KAAKyT,YAActN,EACnB,OAAO,OAPX,GAAInG,KAAK8T,YAAc3N,EACnB,OAAO,CAyBnB,CACA,OAAO,CACX,CACA,MAAAiK,GACI,MAAMC,EAAQ,GACd,IAAIiE,EAActU,KAAKyT,UAAUjC,YACjC,KAAO8C,GAAeA,IAAgBtU,KAAK0T,YACvCrD,EAAMb,KAAK8E,GACXA,EAAcA,EAAY9C,YAI9B,OAFAxR,KAAK4T,QAAQhT,OAAS,EACtBZ,KAAK4T,QAAQpE,QAAQa,GACdrQ,KAAK4T,OAChB,CACA,WAAAW,CAAYlE,EAAQ,IAEhB,OADArQ,KAAK4T,QAAUvD,EACRrQ,IACX,EAGG,MAAMwU,EACT,WAAA1U,CAAY2U,EAAW,IACnBzU,KAAK0U,SAAWD,EAAStQ,IAAIoC,GAAYA,aAAmB+M,EAAkB/M,EAAU,IAAI+M,EAAe/M,EAAQgN,SAAUhN,EAAQmI,QAASnI,EAAQoI,SAAUpI,EAAQiN,WAAYjN,EAAQ8J,OAChM,CACA,UAAIsE,GACA,OAAO3U,KAAK0U,QAChB,CACA,UAAI9T,GACA,OAAOZ,KAAK0U,SAAS9T,MACzB,CAMA,SAAI0P,GACA,OAAOtQ,KAAK0U,SAAS,EACzB,CAIA,QAAIE,GACA,OAAO5U,KAAK0U,SAAS1U,KAAK0U,SAAS9T,OAAS,EAChD,CACA,IAAA4O,CAAKqF,GAKD,OAJMA,aAAiBvB,IACnBuB,EAAQ,IAAIvB,EAAeuB,EAAMtB,SAAUsB,EAAMnG,QAASmG,EAAMlG,SAAUkG,EAAMrB,WAAYqB,EAAMxE,QAEtGrQ,KAAK0U,SAASlF,KAAKqF,GACZ7U,IACX,CACA,GAAA8U,GACI,OAAO9U,KAAK0U,SAASI,KACzB,CACA,KAAAC,GACI,OAAO/U,KAAK0U,SAASK,OACzB,CACA,OAAAC,CAAQH,GAKJ,OAJMA,aAAiBvB,IACnBuB,EAAQ,IAAIvB,EAAeuB,EAAMtB,SAAUsB,EAAMnG,QAASmG,EAAMlG,SAAUkG,EAAMrB,WAAYqB,EAAMxE,QAEtGrQ,KAAK0U,SAASM,QAAQH,GACf7U,IACX,CACA,MAAAiV,CAAOtU,EAAOuU,KAAgB9O,GAK1B,OAJMA,aAAiBoO,IACnBpO,EAAQ,IAAIoO,EAAoBpO,IAEpCpG,KAAK0U,SAASO,OAAOtU,EAAOuU,KAAgB9O,EAAMsO,UAC3C1U,IACX,CACA,KAAAyL,CAAM9K,EAAOwU,GACT,OAAOnV,KAAK0U,SAASjJ,MAAM9K,EAAOwU,EACtC,CACA,MAAAhI,CAAOwH,GAIH,OAHMA,aAAkBH,IACpBG,EAAS,IAAIH,EAAoBG,IAE9B,IAAIH,EAAoBxU,KAAK0U,SAASvH,OAAOwH,EAAOD,UAC/D,CACA,OAAAU,GACI,OAAO,IAAIZ,EAAoBxU,KAAK0U,SAASU,UACjD,CAOA,GAAA1C,CAAI2C,GACA,OAAOrV,KAAK0U,SAASW,EACzB,CAOA,GAAAlN,CAAIkN,EAAOR,GAEP,OADA7U,KAAK0U,SAASW,GAASR,EAChB7U,IACX,CAOA,GAAAmE,CAAImR,GACA,OAAOtV,KAAK0U,SAASvQ,IAAImR,EAC7B,CAMA,MAAAC,CAAOD,GACH,OAAOtV,KAAK0U,SAASa,OAAOD,EAChC,CAOA,MAAAE,CAAOF,EAAUG,GACb,OAAOzV,KAAK0U,SAASc,OAAOF,EAAUG,EAC1C,CAMA,OAAAjR,CAAQ8Q,GACJ,OAAOtV,KAAK0U,SAASlQ,QAAQ8Q,EACjC,CAMA,IAAAI,CAAKJ,GACD,OAAOtV,KAAK0U,SAASgB,KAAKJ,EAC9B,CAMA,KAAAK,CAAML,GACF,OAAOtV,KAAK0U,SAASiB,MAAML,EAC/B,CAMA,KAAAM,CAAMpC,EAAa,CAAC,GAChB,OAAOxT,KAAK0U,SAASa,OAAOV,GAASA,EAAMR,QAAQb,GACvD,CACA,IAAAqC,CAAKrC,EAAa,CAAC,GACf,OAAOxT,KAAK4V,MAAMpC,GAAY,IAAM,IACxC,EAyFG,MAAMsC,EAAY,IAtFlB,MACH,WAAAhW,GAIIE,KAAK+V,SAAW,IAAI,IAAwBvP,SAASoC,gBACzD,CAUA,IAAAiN,CAAKG,EAAU,IAAKxC,EAAa,CAAC,EAAG/Q,EAAU,CAAC,EAAGwT,GAAQ,IAClD,QAAajW,KAAM,cACpByC,EAAQyT,UAAW,GAEvB,MAAMzB,EAAWzU,KAAK+V,SAASF,KAAK,OAASG,EAASvT,GAChD0T,EAAUF,GAA0B,iBAAVA,GAAsBA,EAAQ,EACxDG,EAASH,IAAoB,IAAXA,EAClBI,EAAUJ,GAAmB,IAAVA,EACzB,GAAwB,IAApBxB,EAAS7T,OACT,OAAIwV,GAGKD,GAAoB,GAATF,EAFT,KAKJ,IAAIzB,EAAoB,IAEnC,GAA0B,iBAAfhB,GAA0C,OAAfA,GAA0D,IAAnClP,OAAOC,KAAKiP,GAAY5S,OAAc,CAC/F,GAAIwV,EAAQ,CACR,MAAME,EAAc7B,EAASA,EAAS7T,OAAS,GAC/C,OAAO,IAAI0S,EAAegD,EAAY/C,SAAU+C,EAAY5H,QAAS4H,EAAY3H,SAAU2H,EAAY9C,WAAY8C,EAAYjG,MACnI,CACK,OAAI8F,EACQ,GAATF,EACO,IAAI3C,EAAemB,EAAS,GAAGlB,SAAUkB,EAAS,GAAG/F,QAAS+F,EAAS,GAAG9F,SAAU8F,EAAS,GAAGjB,WAAYiB,EAAS,GAAGpE,OAE5H,IAAImE,EAAoBC,EAAShJ,MAAM,EAAGwK,IAE9C,IAAIzB,EAAoBC,EACnC,CACA,MAAMlQ,EAAOD,OAAOC,KAAKiP,GACnB/P,EAAS,GACT8S,EAAe9B,EAAS7T,OACxB4V,EAAYD,EAAe,EACjC,IAAK,IAAI7S,EAAI,EAAGA,EAAI6S,EAAc7S,IAAK,CACnC,GAAG0S,GAAU1S,EAAI8S,EACb,SAEJ,MAAMjQ,EAAUkO,EAAS/Q,GACzB,IAAI+S,GAAU,EACd,IAAK,IAAIC,EAAI,EAAGA,EAAInS,EAAK3D,OAAQ8V,IAAK,CAClC,MAAMjS,EAAMF,EAAKmS,GACXvQ,EAAQqN,EAAW/O,GACzB,GAAI8B,EAAQiN,WAAW/O,KAAS0B,EAAO,CACnCsQ,GAAU,EACV,KACJ,CACJ,CACA,GAAKA,EAAL,CAGA,GAAIJ,EACA,OAAO,IAAI/C,EAAe/M,EAAQgN,SAAUhN,EAAQmI,QAASnI,EAAQoI,SAAUpI,EAAQiN,WAAYjN,EAAQ8J,OAE/G,GAAG+F,GAAU1S,IAAM8S,EACf,OAAO,IAAIlD,EAAe/M,EAAQgN,SAAUhN,EAAQmI,QAASnI,EAAQoI,SAAUpI,EAAQiN,WAAYjN,EAAQ8J,OAG/G,GADA5M,EAAO+L,KAAKjJ,GACR4P,GAAW1S,EAAO7C,QAAUqV,EAC5B,OAAO,IAAIzB,EAAoB/Q,EATnC,CAWJ,CACA,OAAO,IAAI+Q,EAAoB/Q,EACnC,CAEA,KAAA6M,CAAM0F,EAAU,IAAKxC,EAAa,CAAC,EAAG/Q,EAAU,CAAC,GAC7C,OAAOzC,KAAK6V,KAAKG,EAASxC,EAAY/Q,EAAS,EACnD,GAIJ,G,yCClXA,MAAMkU,EACF,WAAA7W,CAAY8W,EAAOC,EAAS/O,EAAQ8N,EAAQ,CAAC,EAAG/E,EAAW,CAAC,GACxD7Q,KAAK8W,OAASF,EACd5W,KAAK+W,SAAWF,EAChB7W,KAAKgX,QAAUlP,GAAU,CAAC,EAC1B9H,KAAKiX,OAASrB,GAAS,CAAC,EACxB5V,KAAKkX,UAAYrG,GAAY,CAAC,EAC9B7Q,KAAKmX,WAAa,IAAI7S,OAAOC,KAAKuD,GAAU,CAAC,IAC7CxD,OAAOC,KAAKuD,GAAQtD,QAAQC,IACxBH,OAAO8S,eAAepX,KAAMyE,EAAK,CAC7BiO,IAAK,IAAM1S,KAAKgX,QAAQvS,GACxB0D,IAAMhC,IACFnG,KAAKgX,QAAQvS,GAAO0B,GAExBkR,YAAY,EACZC,cAAc,KAG1B,CAIA,OAAAC,GACI,OAAOvX,KAAK+W,UAAY,IAC5B,CACA,UAAAS,GACI,OAAOxX,KAAK+W,UAAY,IAC5B,CAEA,SAAAU,GACI,OAAOzX,KAAKgX,SAAW,CAAC,CAC5B,CACA,QAAAU,CAAS9R,GACL,OAAO5F,KAAKgX,QAAQpR,IAAS,IACjC,CACA,QAAA+R,GACI,OAAO3X,KAAKiX,QAAU,CAAC,CAC3B,CACA,WAAAW,GACI,OAAO5X,KAAKkX,WAAa,CAAC,CAC9B,EAGG,MAAMW,EACTC,mBAAqB,KACrBA,kBAAoB,CAAC,EACrB,WAAAhY,CAAYC,EAAM,MAIdC,KAAKD,IAAMA,EACXC,KAAK+X,OAAS,GACd/X,KAAKgY,aAAe,KACpBhY,KAAKiY,KAAO,UACZjY,KAAKkY,KAAO,GACZlY,KAAKmY,YAAc,KACnBnY,KAAKoY,WAAa,KAClBpY,KAAKqY,aAAe,IAGpBrY,KAAKsY,YAActY,KAAKsY,YAAYC,KAAKvY,MACzCA,KAAKwY,eAAiBxY,KAAKwY,eAAeD,KAAKvY,MAK/CA,KAAKyY,aAAe,CAAC,EACrBzY,KAAK0Y,WAAa/Q,OAAOC,SAASyL,SAAW1L,OAAOC,SAASmE,MACjE,CAEA,MAAA9L,CAAO0Y,GAEH,OADA3Y,KAAKD,IAAM4Y,EACJ3Y,IACX,CAEA,cAAA4Y,CAAeC,GACX7Y,KAAKyY,aAAaI,EAAYjT,MAAQiT,CAC1C,CAEA,YAAAC,CAAaf,GACT,IAAK,MAAMnB,KAASmB,EAChB/X,KAAK4Y,eAAehC,EAE5B,CAGA,MAAAmC,CAAOnT,EAAMkC,EAAS,CAAC,GACnB,MAAM+Q,EAAc7Y,KAAKyY,aAAa7S,GACtC,IAAKiT,EACD,OAAO,KAEX,IAAInR,EAAM1H,KAAKgZ,YAAYH,EAAYI,KAAMnR,GAI7C,OAHMJ,EAAIwR,WAAW,MAAQxR,EAAIwR,WAAW,UAAYxR,EAAIwR,WAAW,YACnExR,EAAM1H,KAAKkY,KAAOxQ,GAEfA,CACX,CAEA,QAAAyR,CAASF,EAAMG,EAAM3W,EAAU,CAAC,GAC5BzC,KAAK+X,OAAOvI,KAAK,CACbyJ,KAAMjZ,KAAKqZ,cAAcJ,GACzBG,KAAMA,EACN3W,QAASA,GAEjB,CAEA,OAAA6W,CAAQrB,GACJjY,KAAKiY,KAAOA,CAChB,CAEA,OAAAsB,CAAQrB,GACJlY,KAAKkY,KAAOA,CAChB,CAEA,eAAAsB,CAAgB5C,GACZ5W,KAAKqY,aAAezB,CACxB,CAEA,UAAA6C,CAAWnE,GACPtV,KAAKmY,YAAc7C,CACvB,CAEA,SAAAoE,CAAUpE,GACNtV,KAAKoY,WAAa9C,CACtB,CAEA,aAAA+D,CAAcJ,GAEV,IAAIU,EAAaV,EAAKC,WAAW,KAAOD,EAAO,IAAMA,EAYrD,OATIU,EAAW/Y,OAAS,GAAK+Y,EAAWC,SAAS,OAC7CD,EAAaA,EAAWlO,MAAM,GAAI,IAInB,KAAfkO,IACAA,EAAa,KAGVA,CACX,CAQA,WAAAE,CAAY1Z,EAAKiB,GAIb,IAAI0Y,EAAW1Y,EAAOb,QAAQ,8BAA+B,QAK7D,OAJAuZ,EAAWA,EAASvZ,QAAQ,qBAAsB,iBAElDuZ,EAAW,IAAMA,EAAW,IACd,IAAIxZ,OAAOwZ,GACZrZ,KAAKN,EACtB,CAEA,YAAA4Z,CAAad,GACT,MAAO,oBAAoBxY,KAAKwY,EACpC,CAEA,cAAAe,CAAef,GACX,OAAOA,EAAKrM,SAAS,MAA+B,UAAvBqM,EAAKlY,aACtC,CAQA,gBAAAkZ,CAAiB7Y,GAEb,IACI8Y,EADQ,sBACMC,KAAK/Y,GACvB,OAAI8Y,GAASA,EAAM,GACRA,EAAM,GAEV,IACX,CAQA,iBAAAE,CAAkBhZ,EAAQ6X,GACtB,GAAoB,iBAATA,GAAuC,iBAAX7X,EAAqB,OAAO,KAGnE,GAAIA,EAAO8Y,MAAM,uBACb,OAAOjB,EAIX,IAAIa,EAAW1Y,EAAOb,QAAQ,8BAA+B,QAE7DuZ,EAAWA,EAASvZ,QAAQ,qBAAsB,iBAElD,MACM2Z,EADQ,IAAI5Z,OAAO,IAAMwZ,EAAW,KACtBK,KAAKlB,GACzB,OAAIiB,GAASA,EAAM,GACRA,EAAM,GAEV,IACX,CAEA,oBAAAG,CAAqBjZ,EAAQ6X,GAKzB,GAHsB,iBAAX7X,GAAuBA,EAAOwL,SAAS,OAC9CxL,EAASA,EAAOb,QAAQ,MAAO,UAEf,iBAAT0Y,GAAuC,iBAAX7X,EAAqB,OAAO,KAEnE,IAAI0Y,EAAW1Y,EAAOb,QAAQ,8BAA+B,QAE7DuZ,EAAWA,EAASvZ,QAAQ,qBAAsB,iBAClD,MACM+Z,EADQ,IAAIha,OAAO,IAAMwZ,EAAW,KACjBK,KAAKlB,GAC9B,OAAKqB,GAEEA,EAAW,IAFM,IAG5B,CAQA,mBAAAC,CAAoB3D,EAAOC,GACvB,MAAM2D,EAAiBxa,KAAKD,IAAIF,OAAOK,KAAK0W,EAAMqC,KAAM,KAAKhW,MAAM,KAC7DwX,EAAeza,KAAKD,IAAIF,OAAOK,KAAK2W,EAAS,KAAK5T,MAAM,KAE9D,GAAIuX,EAAe5Z,SAAW6Z,EAAa7Z,OAEvC,OADAkJ,QAAQwF,IAAI,kCACL,KAGX,MAAMoL,EAAqBF,EAAe5Z,OAAS,EAC7CkH,EAAS,CAAC,EAKhB,IAAK,IAAIpE,EAAI,EAAGA,EAAI8W,EAAe5Z,OAAQ8C,IAAK,CAC5C,MAAMiX,EAAgBH,EAAe9W,GAC/BkX,EAAcH,EAAa/W,GAEjC,GAAI1D,KAAKga,eAAeW,GAAgB,CACpC,MAAME,EAAa7a,KAAKqa,qBAAqBM,EAAeC,GAE5D,GADA9S,EAAOgT,IAAMD,EACTnX,IAAMgX,GAA4B,IAANhX,EAC5B,OAAOoE,CAEf,MAAO,GAAI9H,KAAK+Z,aAAaY,GAAgB,CACzC,MAAMI,EAAY/a,KAAKia,iBAAiBU,GAClCE,EAAa7a,KAAKoa,kBAAkBO,EAAeC,GACzD,GAAmB,OAAfC,EAEA,OADA/Q,QAAQwF,IAAI,6BACL,KAEXxH,EAAOiT,GAAaF,CACxB,MAGI,GAAIF,IAAkBC,EAElB,OADA9Q,QAAQwF,IAAI,wBACL,IAGnB,CAEA,OAAOxH,CACX,CAEA,UAAAkT,CAAW/B,GACP,MAAMgC,EAAiBjb,KAAKqZ,cAAcJ,GAG1C,IAAK,MAAMrC,KAAS5W,KAAK+X,OAAQ,CAC7B,MAAMmD,EAAYtE,EAAMqC,KAKxB,GAFsBiC,EAAUjY,MAAM,KAAKyS,KAAKyF,GAAQnb,KAAK+Z,aAAaoB,IAASnb,KAAKga,eAAemB,IAEpF,CAEf,MAAMrT,EAAS9H,KAAKua,oBAAoB3D,EAAOqE,GAC/C,GAAe,OAAXnT,EACA,MAAO,CAAE8O,QAAO9O,SAAQmR,KAAMgC,EAEtC,MAEI,GAAIC,IAAcD,EACd,MAAO,CAAErE,QAAO9O,OAAQ,CAAC,EAAGmR,KAAMgC,EAG9C,CAEA,OAAO,IACX,CAEA,iBAAM3C,CAAYW,EAAMmC,GAAuB,GAE3C,MAAMC,EAAkBpC,EAAKhW,MAAM,KAAK,GAClCiX,EAAQla,KAAKgb,WAAWK,GAE9B,IAAKnB,EAED,YADApQ,QAAQsH,KAAK,uBAAuB6H,KAIxC,MAAM,MAAErC,EAAK,OAAE9O,GAAWoS,EAG1B,GAAIla,KAAKmY,cAEU,UADMnY,KAAKmY,YAAYvB,EAAO9O,GAEzC,OAGR,MAAMwT,EAAWzD,EAAO0D,cAClB3F,EAAQ0F,EAAS1F,MACjB/E,EAAWyK,EAASE,KAErBJ,GACDvD,EAAO4D,eAAe7E,EAAOsD,EAAMjB,KAAMnR,EAAQ8N,EAAO/E,GAI5D7Q,KAAKgY,aAAe,IAAKpB,EAAOI,QAASlP,EAAQmP,OAAQrB,EAAOsB,UAAWrG,EAAUkG,SAAUmD,EAAMjB,MAGjGjZ,KAAKD,IAAI2b,OAAS9E,EAAMwC,MAAQxC,EAAM+E,YACtC3b,KAAKD,IAAI2b,KAAKE,UAAUhF,EAAMwC,MAAQxC,EAAM+E,UAAW7T,EAAQ+P,EAAOgE,kBAItE7b,KAAKoY,YACLpY,KAAKoY,WAAWxB,EAAO9O,EAE/B,CAmBA,kBAAMgU,GAGF,GAFAhS,QAAQwF,IAAI,2EAEPtP,KAAKD,KAAK2b,KAEX,YADA5R,QAAQD,MAAM,iDAKlB,MAAMkS,EAAclE,EAAOkE,aAAe/b,KAAKgY,aAE/C,IAAK+D,EAED,YADAjS,QAAQD,MAAM,gDAIlB,MAAQiN,OAAQF,EAAOI,QAASlP,EAAQiP,SAAUF,EAASI,OAAQrB,EAAOsB,UAAWrG,GAAakL,EAGlG,GAAI/b,KAAKmY,cAEU,UADMnY,KAAKmY,YAAYvB,EAAO9O,EAAQ+O,GAEjD/M,QAAQwF,IAAI,6DAMpB,GAAIsH,EAAMwC,MAAQxC,EAAM+E,UACpB,IACI,MAAMK,EAAWpF,EAAMwC,MAAQxC,EAAM+E,UAErC3b,KAAKD,IAAI2b,KAAKO,cAAcD,EAAUlU,EAAQiU,GAE1C/b,KAAKoY,YACLpY,KAAKoY,WAAWxB,EAAO9O,EAI/B,CAAE,MAAO+B,GACLC,QAAQD,MAAM,iDAAkDA,EACpE,CAER,CAGA,cAAA2O,CAAe0D,GACX,MAAMjD,EAAOtR,OAAOC,SAASyL,SAAW1L,OAAOC,SAASmE,OACxD/L,KAAKsY,YAAYW,EACrB,CAEA,QAAAkD,CAASlD,GAEL,GAAkB,YAAdjZ,KAAKiY,KAAoB,CACzBtQ,OAAOyU,QAAQC,UAAU,CAAC,EAAG,GAAIpD,GACjC,IACIjZ,KAAKsY,YAAYW,GACjBjZ,KAAK0Y,WAAaO,CACtB,CAAE,MAAOpP,GACLC,QAAQD,MAAM,uCAAwCA,EAC1D,CACJ,KAAO,CAEHlC,OAAOC,SAAS4T,KAAOvC,EACvB,IACIjZ,KAAKsY,YAAYW,GACjBjZ,KAAK0Y,WAAaO,CACtB,CAAE,MAAOpP,GACLC,QAAQD,MAAM,mDAAoDA,EACtE,CACJ,CACJ,CASA,WAAAmP,CAAYpC,EAAO9O,EAAS,CAAC,EAAGwU,EAAY,IACxC,IAAI5U,EAAMkP,EAGV,IAAK,MAAOnS,EAAK0B,KAAU7B,OAAOqC,QAAQmB,GACtCJ,EAAMA,EAAInH,QAAQ,IAAIkE,KAAQ0B,GAQlC,OAJImW,IAAc5U,EAAIkS,SAAS0C,KAC3B5U,GAAO4U,GAGJ5U,CACX,CAQA,UAAA6U,CAAW3F,EAAO9O,EAAS,CAAC,EAAGwU,EAAY,IACvC,MAAM5U,EAAM1H,KAAKgZ,YAAYpC,EAAO9O,EAAQwU,GAC5Ctc,KAAKmc,SAASzU,EAClB,CAEA,KAAA/G,CAAM6b,GAAc,GAGhB,MAAMC,EAAYzc,KAAKD,KAAK2b,MAAMe,WAAajW,SAASC,cAAc,iCAChEiW,EAAmBD,GAAgE,SAAnDA,EAAUrK,aAAa,wBAEvDuK,GADW9E,EAAO0D,cACU,YAAdvb,KAAKiY,KAAsBtQ,OAAOC,SAASyL,SAAW1L,OAAOC,SAASmE,OAAWpE,OAAOC,SAAS4T,KAAK3a,UAAU,IAAMb,KAAKqY,cAE/IvO,QAAQwF,IAAI,iCAAkCoN,GAC9C5S,QAAQwF,IAAI,8BAA+BmN,GAAWjO,IAAMiO,GAAWrI,SACvEtK,QAAQwF,IAAI,iCAAkCqN,GAE9C3c,KAAK4c,6BAA6BD,GAGhB,YAAd3c,KAAKiY,KACLtQ,OAAOkV,iBAAiB,WAAY7c,KAAKwY,gBAEzC7Q,OAAOkV,iBAAiB,aAAc7c,KAAKwY,gBAI3CkE,GAEA5S,QAAQwF,IAAI,8CACZtP,KAAK8b,gBACGU,EAKR1S,QAAQwF,IAAI,oDAAoE,YAAdtP,KAAKiY,KAAqB,GAAK,WAAa,4BAH9GnO,QAAQwF,IAAI,8CACZtP,KAAKsY,YAAYqE,IAKrB3c,KAAK8c,qBAET,CAEA,IAAAC,GACsB,YAAd/c,KAAKiY,KACLtQ,OAAOqV,oBAAoB,WAAYhd,KAAKwY,gBAE5C7Q,OAAOqV,oBAAoB,aAAchd,KAAKwY,gBAGlDhS,SAASwW,oBAAoB,QAAShd,KAAKid,gBAC/C,CAMA,4BAAAL,CAA6B3D,GAGzB,MAAMoC,EAAkBpC,EAAKhW,MAAM,KAAK,GAClCiX,EAAQla,KAAKgb,WAAWK,GAE9B,GAAInB,EAAO,CACP,MAAM,MAAEtD,EAAK,OAAE9O,GAAWoS,EACpBoB,EAAWzD,EAAO0D,cAClB3F,EAAQ0F,EAAS1F,MACjB/E,EAAWyK,EAASE,KAI1B3D,EAAO4D,eAAe7E,EAAOsD,EAAMjB,KAAMnR,EAAQ8N,EAAO/E,GACxD7Q,KAAKgY,aAAe,IAAKpB,EAAOI,QAASlP,EAAQmP,OAAQrB,EAAOsB,UAAWrG,EAAUkG,SAAUmD,EAAMjB,KAGzG,MACInP,QAAQwF,IAAI,8CAA+C2J,EAEnE,CAKA,mBAAA6D,GACIhT,QAAQwF,IAAI,iCAEZtP,KAAKid,gBAAkBjd,KAAKkd,qBAAqB3E,KAAKvY,MACtDwG,SAASqW,iBAAiB,QAAS7c,KAAKid,iBACxCnT,QAAQwF,IAAI,0DAChB,CAMA,oBAAA4N,CAAqBjN,GAIjB,MAAMkN,EAAgBlN,EAAE/G,OAAOkU,QAAQ,mBAEvC,GAAID,EAAe,CAEf,GAAIA,EAAcE,aAAa,qBAE3B,YADAvT,QAAQwF,IAAI,8CAIhB,MAAMgO,EAAUH,EAAc/K,aAAa,iBAG3C,GAFAtI,QAAQwF,IAAI,cAAegO,GAEvBA,GAA8B,KAAnBA,EAAQpd,OAGnB,OAFA4J,QAAQwF,IAAI,kDAAmDgO,GAC/DrN,EAAEsN,iBACED,IAAYtd,KAAK0Y,gBACjB5O,QAAQwF,IAAI,uCAAwCgO,QAGxDtd,KAAKmc,SAASmB,EAGtB,CAGA,MAAME,EAAkBvN,EAAE/G,OAAOkU,QAAQ,mBAEzC,GAAII,EAAiB,CAEjB,GAAIA,EAAgBH,aAAa,qBAE7B,YADAvT,QAAQwF,IAAI,8CAIhB,MAAMgO,EAAUE,EAAgBpL,aAAa,iBAG7C,GAFAtI,QAAQwF,IAAI,iCAAkCgO,GAE1CA,GAA8B,KAAnBA,EAAQpd,OAGnB,OAFA4J,QAAQwF,IAAI,kDAAmDgO,GAC/DrN,EAAEsN,iBACED,IAAYtd,KAAK0Y,gBACjB5O,QAAQwF,IAAI,uCAAwCgO,QAGxDtd,KAAKmc,SAASmB,EAGtB,CAGA,MAAM/S,EAAO0F,EAAE/G,OAAOkU,QAAQ,WAC9B,IAAK7S,EAAM,OAGX,GAAoB,WAAhBA,EAAKrB,OAEL,YADAY,QAAQwF,IAAI,kDAAmD/E,EAAK1C,MAKxE,GAAyB,aAArB0C,EAAKkT,QAAQC,KAAwD,UAAlCnT,EAAK6H,aAAa,YAErD,YADAtI,QAAQwF,IAAI,6BAA8B/E,EAAK1C,MAKnD,GAAyB,UAArB0C,EAAKkT,QAAQC,IAEb,YADA5T,QAAQwF,IAAI,wCAAyC/E,EAAK1C,MAK9D,GAAI0C,EAAK1C,KAAKqR,WAAW,YAAc3O,EAAK1C,KAAKqR,WAAW,SAAW3O,EAAK1C,KAAKqR,WAAW,eAExF,YADApP,QAAQwF,IAAI,qCAAsC/E,EAAK1C,MAI3D,MAAMA,EAAO0C,EAAK1C,KAGlB,IACI,MAAM8V,EAAU,IAAI5V,IAAIF,GAClB+V,EAAa,IAAI7V,IAAIJ,OAAOC,SAASC,MAG3C,GAAI8V,EAAQE,OAASD,EAAWC,KAE5B,YADA/T,QAAQwF,IAAI,oCAAqCzH,EAGzD,CAAE,MAAOgC,GAELC,QAAQwF,IAAI,+CAAgDzH,EAChE,CAGA,GAAIA,EAAKqR,WAAW,YAAcrR,EAAKqR,WAAW,YAC9C,IACI,MAAMyE,EAAU,IAAI5V,IAAIF,GAClB+V,EAAa,IAAI7V,IAAIJ,OAAOC,SAASC,MAE3C,GAAI8V,EAAQE,OAASD,EAAWC,KAAM,CAElC,MAAM5E,EAAO0E,EAAQtK,SAAWsK,EAAQ5R,OAGxC,OAFAjC,QAAQwF,IAAI,yCAA0C2J,GACtDhJ,EAAEsN,iBACEtE,IAASjZ,KAAK0Y,gBACd5O,QAAQwF,IAAI,uCAAwC2J,QAGxDjZ,KAAKmc,SAASlD,EAElB,CACJ,CAAE,MAAOpP,GACLC,QAAQwF,IAAI,sCAAuCzH,EACvD,CAIJ,GAAIA,IAASA,EAAKqR,WAAW,UAAYrR,EAAKqR,WAAW,MAGrD,OAFApP,QAAQwF,IAAI,sCAAuCzH,GACnDoI,EAAEsN,iBACE1V,IAAS7H,KAAK0Y,gBACd5O,QAAQwF,IAAI,uCAAwCzH,QAGxD7H,KAAKmc,SAAStU,GAKlBiC,QAAQwF,IAAI,uCAAwCzH,EACxD,CACA,kBAAO0T,GACH,MAAM,SAAE3T,GAAaD,QACf,OAAEoE,EAAM,KAAEyP,EAAI,SAAEnI,GAAazL,EACnC,MAAO,CACHF,IAAKE,EAASC,KACdiW,SAAUlW,EAASkW,SACnB/R,OAAQA,EAAOmN,WAAW,KAAOnN,EAAOlL,UAAU,GAAKkL,EACvDkN,KAAM5F,EACNuC,MAAOtR,OAAOyZ,YAAY,IAAIC,gBAAgBjS,IAC9CyP,KAAMA,EAAKtC,WAAW,KAAOsC,EAAK3a,UAAU,GAAK2a,EAEzD,CAEA,qBAAOC,CAAe7E,EAAOC,EAAS/O,EAAQ8N,EAAQ,CAAC,EAAG/E,EAAW,MAC5D+F,EAAMqC,OAGNpB,EAAOoG,WAAWrH,EAAMqC,OAIzBpB,EAAOoG,WAAWrH,EAAMqC,MAAMlC,SAAWF,EACzCgB,EAAOoG,WAAWrH,EAAMqC,MAAMjC,QAAUlP,EACxC+P,EAAOoG,WAAWrH,EAAMqC,MAAMhC,OAASrB,EACvCiC,EAAOoG,WAAWrH,EAAMqC,MAAM/B,UAAYrG,EAC1CgH,EAAOkE,YAAclE,EAAOoG,WAAWrH,EAAMqC,QAP7CpB,EAAOoG,WAAWrH,EAAMqC,MAAQ,IAAItC,EAAYC,EAAOC,EAAS/O,EAAQ8N,EAAO/E,GAC/EgH,EAAOkE,YAAclE,EAAOoG,WAAWrH,EAAMqC,OAQrD,CAEA,qBAAOiF,CAAehD,GAClB,OAAOrD,EAAOoG,WAAW/C,IAAc,IAC3C,CAEA,sBAAOiD,GACH,OAAOtG,EAAOkE,aAAe,IACjC,CACA,qBAAOF,GACH,OAAOhE,EAAOkE,aAAe,IACjC,CACA,qBAAOqC,GACH,OAAOzW,OAAOC,SAASyL,QAC3B,CACA,oBAAOgL,GACH,MAAqB,YAAdre,KAAKiY,KAAqBJ,EAAOuG,iBAAmBvG,EAAOyG,gBACtE,CACA,qBAAOA,GAEH,OADuB3W,OAAOC,SAAS4T,KAAK3a,UAAU,IAAM,EAEhE,CACA,oBAAO0d,GACH,MAAqB,YAAdve,KAAKiY,KAAqBJ,EAAOuG,iBAAmBzW,OAAOC,SAASmE,OAAS8L,EAAOyG,gBAC/F,CACA,sBAAOE,GAEH,OADcla,OAAOyZ,YAAY,IAAIC,gBAAgBrW,OAAOC,SAASmE,QAEzE,CACA,yBAAO0S,GAEH,OADuB9W,OAAOC,SAAS4T,KAAK3a,UAAU,IAAM,EAEhE,E","sources":["webpack://App/./resources/js/app/core/Helper.js","webpack://App/./resources/js/app/core/FollowingBlock.js","webpack://App/./resources/js/app/core/OneDOM.js","webpack://App/./resources/js/app/core/API.js","webpack://App/./resources/js/app/core/OneMarkup.js","webpack://App/./resources/js/app/core/Router.js"],"sourcesContent":["/**\n * ViewHelper - Utility functions for view operations\n * Contains helper methods that are not directly related to view management\n */\n\nimport { uniqId } from '../helpers/utils.js';\n\nexport class Helper {\n    constructor(App = null) {\n        this.App = App;\n    }\n\n    setApp(App) {\n        this.App = App;\n    }\n\n    /**\n     * Trim string\n     * @param {string} str - String to trim\n     * @param {string} char - Character to trim\n     * @returns {string} Trimmed string\n     */\n    trim(str, char = ' ') {\n        if (typeof str !== 'string') return str;\n        const regex = new RegExp(`^${char}+|${char}+$`, 'g');\n        return str.replace(regex, '');\n    }\n\n    /**\n     * Check if string is HTML\n     * @param {string} str - String to check\n     * @returns {boolean} True if HTML\n     */\n    isHtmlString(str) {\n        if (typeof str !== 'string') return false;\n        return /<[a-z][\\s\\S]*>/i.test(str);\n    }\n\n    substr(str, start, length) {\n        if (typeof str !== 'string') return str;\n        return str.substring(start, length);\n    }\n\n    strtolower(str) {\n        if (typeof str !== 'string') return str;\n        return str.toLowerCase();\n    }\n\n    strtoupper(str) {\n        if (typeof str !== 'string') return str;\n        return str.toUpperCase();\n    }\n\n\n    /**\n     * Format date\n     * @param {Date|string} date - Date to format\n     * @param {string} format - Format string\n     * @returns {string} Formatted date\n     */\n    formatDate(date, format = 'YYYY-MM-DD') {\n        const d = new Date(date);\n        if (isNaN(d.getTime())) return '';\n\n        const year = d.getFullYear();\n        const month = String(d.getMonth() + 1).padStart(2, '0');\n        const day = String(d.getDate()).padStart(2, '0');\n        const hours = String(d.getHours()).padStart(2, '0');\n        const minutes = String(d.getMinutes()).padStart(2, '0');\n        const seconds = String(d.getSeconds()).padStart(2, '0');\n\n        return format\n            .replace('YYYY', year)\n            .replace('MM', month)\n            .replace('DD', day)\n            .replace('HH', hours)\n            .replace('mm', minutes)\n            .replace('ss', seconds);\n    }\n\n    /**\n     * Format number\n     * @param {number} num - Number to format\n     * @param {Object} options - Formatting options\n     * @returns {string} Formatted number\n     */\n    formatNumber(num, options = {}) {\n        if (typeof num !== 'number' || isNaN(num)) return '0';\n\n        const {\n            decimals = 2,\n            thousandsSeparator = ',',\n            decimalSeparator = '.',\n            prefix = '',\n            suffix = ''\n        } = options;\n\n        const parts = num.toFixed(decimals).split('.');\n        parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, thousandsSeparator);\n\n        return prefix + parts.join(decimalSeparator) + suffix;\n    }\n\n    /**\n     * Format currency\n     * @param {number} amount - Amount to format\n     * @param {string} currency - Currency code\n     * @returns {string} Formatted currency\n     */\n    formatCurrency(amount, currency = 'USD') {\n        const currencySymbols = {\n            'USD': '$',\n            'EUR': '€',\n            'GBP': '£',\n            'JPY': '¥',\n            'VND': '₫'\n        };\n\n        const symbol = currencySymbols[currency] || currency;\n        return symbol + this.formatNumber(amount, { decimals: 2 });\n    }\n\n    /**\n     * Truncate text\n     * @param {string} text - Text to truncate\n     * @param {number} length - Maximum length\n     * @param {string} suffix - Suffix to add\n     * @returns {string} Truncated text\n     */\n    truncate(text, length = 100, suffix = '...') {\n        if (typeof text !== 'string' || text.length <= length) {\n            return text;\n        }\n        return text.substring(0, length).trim() + suffix;\n    }\n\n    /**\n     * Generate random string\n     * @param {number} length - Length of string\n     * @returns {string} Random string\n     */\n    randomString(length = 8) {\n        const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n        let result = '';\n        for (let i = 0; i < length; i++) {\n            result += chars.charAt(Math.floor(Math.random() * chars.length));\n        }\n        return result;\n    }\n\n    /**\n     * Deep clone object\n     * @param {*} obj - Object to clone\n     * @returns {*} Cloned object\n     */\n    deepClone(obj) {\n        if (obj === null || typeof obj !== 'object') return obj;\n        if (obj instanceof Date) return new Date(obj.getTime());\n        if (obj instanceof Array) return obj.map(item => this.deepClone(item));\n        if (typeof obj === 'object') {\n            const cloned = {};\n            Object.keys(obj).forEach(key => {\n                cloned[key] = this.deepClone(obj[key]);\n            });\n            return cloned;\n        }\n        return obj;\n    }\n\n    /**\n     * Debounce function\n     * @param {Function} func - Function to debounce\n     * @param {number} wait - Wait time in ms\n     * @returns {Function} Debounced function\n     */\n    debounce(func, wait) {\n        let timeout;\n        return function executedFunction(...args) {\n            const later = () => {\n                clearTimeout(timeout);\n                func(...args);\n            };\n            clearTimeout(timeout);\n            timeout = setTimeout(later, wait);\n        };\n    }\n\n    /**\n     * Throttle function\n     * @param {Function} func - Function to throttle\n     * @param {number} limit - Limit time in ms\n     * @returns {Function} Throttled function\n     */\n    throttle(func, limit) {\n        let inThrottle;\n        return function executedFunction(...args) {\n            if (!inThrottle) {\n                func.apply(this, args);\n                inThrottle = true;\n                setTimeout(() => inThrottle = false, limit);\n            }\n        };\n    }\n\n    /**\n     * Get SEO tag configuration\n     * @returns {Object} SEO tag configuration\n     */\n    getSEOTagConfig() {\n        return {\n            title: [\n                {\n                    tag: 'title',\n                    selector: 'title',\n                    attribute: '@content'\n                }\n            ],\n            description: [\n                {\n                    tag: 'meta',\n                    selector: 'meta[name=\"description\"]',\n                    attrs: { name: 'description' },\n                    attribute: 'content'\n                }\n            ],\n            keywords: [\n                {\n                    tag: 'meta',\n                    selector: 'meta[name=\"keywords\"]',\n                    attrs: { name: 'keywords' },\n                    attribute: 'content'\n                }\n            ],\n            ogTitle: [\n                {\n                    tag: 'meta',\n                    selector: 'meta[property=\"og:title\"]',\n                    attrs: { property: 'og:title' },\n                    attribute: 'content'\n                }\n            ],\n            ogDescription: [\n                {\n                    tag: 'meta',\n                    selector: 'meta[property=\"og:description\"]',\n                    attrs: { property: 'og:description' },\n                    attribute: 'content'\n                }\n            ],\n            ogImage: [\n                {\n                    tag: 'meta',\n                    selector: 'meta[property=\"og:image\"]',\n                    attrs: { property: 'og:image' },\n                    attribute: 'content'\n                }\n            ]\n        };\n    }\n\n    /**\n     * Update SEO item\n     * @param {string} key - SEO key\n     * @param {string} value - SEO value\n     * @returns {boolean} Success status\n     */\n    updateSEOItem(key, value) {\n        const items = this.SEO.tags[key];\n        if (!items || items.length === 0) return false;\n\n        items.forEach(item => {\n            let element = document.querySelector(item.selector);\n            if (!element) {\n                element = document.createElement(item.tag);\n                if (item.attrs) {\n                    Object.entries(item.attrs).forEach(([attrKey, attrValue]) => {\n                        element.setAttribute(attrKey, attrValue);\n                    });\n                }\n                document.head.appendChild(element);\n            }\n\n            if (item.attribute) {\n                if (item.attribute === '@content') {\n                    element.textContent = value;\n                } else {\n                    element.setAttribute(item.attribute, value);\n                }\n            }\n        });\n\n        return true;\n    }\n\n    /**\n     * Update page title\n     * @param {string} title - New title\n     */\n    updateTitle(title) {\n        this.updateSEOItem('title', title);\n    }\n\n    /**\n     * Update page description\n     * @param {string} description - New description\n     */\n    updateDescription(description) {\n        this.updateSEOItem('description', description);\n    }\n\n    /**\n     * Update page keywords\n     * @param {string} keywords - New keywords\n     */\n    updateKeywords(keywords) {\n        this.updateSEOItem('keywords', keywords);\n    }\n\n    /**\n     * Update Open Graph title\n     * @param {string} title - New OG title\n     */\n    updateOGTitle(title) {\n        this.updateSEOItem('ogTitle', title);\n    }\n\n    /**\n     * Update Open Graph description\n     * @param {string} description - New OG description\n     */\n    updateOGDescription(description) {\n        this.updateSEOItem('ogDescription', description);\n    }\n\n    /**\n     * Update Open Graph image\n     * @param {string} image - New OG image URL\n     */\n    updateOGImage(image) {\n        this.updateSEOItem('ogImage', image);\n    }\n\n    /**\n     * Get URL parameters\n     * @param {string} url - URL to parse\n     * @returns {Object} URL parameters\n     */\n    getUrlParams(url = window.location.href) {\n        const params = {};\n        const urlObj = new URL(url);\n        urlObj.searchParams.forEach((value, key) => {\n            params[key] = value;\n        });\n        return params;\n    }\n\n    /**\n     * Build URL with parameters\n     * @param {string} baseUrl - Base URL\n     * @param {Object} params - Parameters to add\n     * @returns {string} Built URL\n     */\n    buildUrl(baseUrl, params = {}) {\n        const url = new URL(baseUrl);\n        Object.entries(params).forEach(([key, value]) => {\n            if (value !== null && value !== undefined) {\n                url.searchParams.set(key, value);\n            }\n        });\n        return url.toString();\n    }\n\n    /**\n     * Check if element is in viewport\n     * @param {Element} element - Element to check\n     * @returns {boolean} True if in viewport\n     */\n    isInViewport(element) {\n        const rect = element.getBoundingClientRect();\n        return (\n            rect.top >= 0 &&\n            rect.left >= 0 &&\n            rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&\n            rect.right <= (window.innerWidth || document.documentElement.clientWidth)\n        );\n    }\n\n    /**\n     * Scroll to element\n     * @param {Element|string} element - Element or selector\n     * @param {Object} options - Scroll options\n     */\n    scrollTo(element, options = {}) {\n        const target = typeof element === 'string' ? document.querySelector(element) : element;\n        if (!target) return;\n\n        const {\n            behavior = 'smooth',\n            block = 'start',\n            inline = 'nearest',\n            offset = 0\n        } = options;\n\n        const targetPosition = target.offsetTop - offset;\n        window.scrollTo({\n            top: targetPosition,\n            behavior\n        });\n    }\n\n    /**\n     * Copy text to clipboard\n     * @param {string} text - Text to copy\n     * @returns {Promise<boolean>} Success status\n     */\n    async copyToClipboard(text) {\n        try {\n            await navigator.clipboard.writeText(text);\n            return true;\n        } catch (error) {\n            console.error('Failed to copy to clipboard:', error);\n            return false;\n        }\n    }\n\n    /**\n     * Download file\n     * @param {string} content - File content\n     * @param {string} filename - Filename\n     * @param {string} mimeType - MIME type\n     */\n    downloadFile(content, filename, mimeType = 'text/plain') {\n        const blob = new Blob([content], { type: mimeType });\n        const url = URL.createObjectURL(blob);\n        const link = document.createElement('a');\n        link.href = url;\n        link.download = filename;\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n        URL.revokeObjectURL(url);\n    }\n\n    /**\n     * Get device type\n     * @returns {string} Device type\n     */\n    getDeviceType() {\n        const width = window.innerWidth;\n        if (width < 768) return 'mobile';\n        if (width < 1024) return 'tablet';\n        return 'desktop';\n    }\n\n    // ============================================================================\n    // ADDITIONAL UTILITY FUNCTIONS (moved from View)\n    // ============================================================================\n\n    /**\n     * Count items\n     * @param {Array|Object} items - Items to count\n     * @returns {number} Count\n     */\n    count(items) {\n        if (Array.isArray(items)) {\n            return items.length;\n        } else if (typeof items === 'object' && items !== null) {\n            return Object.keys(items).length;\n        }\n        return 0;\n    }\n\n    /**\n     * Check if value is null\n     * @param {*} value - Value to check\n     * @returns {boolean} True if null\n     */\n    isNull(value) {\n        return value === null;\n    }\n\n    /**\n     * Check if value is array\n     * @param {*} value - Value to check\n     * @returns {boolean} True if array\n     */\n    isArray(value) {\n        return Array.isArray(value);\n    }\n\n    /**\n     * Check if value is string\n     * @param {*} value - Value to check\n     * @returns {boolean} True if string\n     */\n    isString(value) {\n        return typeof value === 'string';\n    }\n\n    /**\n     * Check if value is numeric\n     * @param {*} value - Value to check\n     * @returns {boolean} True if numeric\n     */\n    isNumeric(value) {\n        return !isNaN(parseFloat(value)) && isFinite(value);\n    }\n\n    /**\n     * Get current timestamp with format method\n     * @returns {Object} Current timestamp with format method\n     */\n    now() {\n        const now = new Date();\n        return {\n            format: function (format) {\n                if (!format) return now.toISOString();\n\n                // Simple format implementation\n                const year = now.getFullYear();\n                const month = String(now.getMonth() + 1).padStart(2, '0');\n                const day = String(now.getDate()).padStart(2, '0');\n                const hours = String(now.getHours()).padStart(2, '0');\n                const minutes = String(now.getMinutes()).padStart(2, '0');\n                const seconds = String(now.getSeconds()).padStart(2, '0');\n\n                return format\n                    .replace('Y', year)\n                    .replace('m', month)\n                    .replace('d', day)\n                    .replace('H', hours)\n                    .replace('i', minutes)\n                    .replace('s', seconds);\n            },\n            getTime: function () {\n                return now.getTime();\n            },\n            toString: function () {\n                return now.toString();\n            }\n        };\n    }\n\n    /**\n     * Get current date\n     * @returns {Date} Current date\n     */\n    today() {\n        return new Date();\n    }\n\n    /**\n     * Simple date formatting\n     * @param {Date|string} date - Date to format\n     * @param {string} format - Format string\n     * @returns {string} Formatted date\n     */\n    date(date, format = 'Y-m-d H:i:s') {\n        const d = new Date(date);\n        // Simple date formatting - can be enhanced\n        return d.toISOString().slice(0, 19).replace('T', ' ');\n    }\n\n\n    /**\n     * Get environment value\n     * @param {string} key - Environment key\n     * @param {*} defaultValue - Default value\n     * @returns {*} Environment value\n     */\n    env(key, defaultValue = null) {\n        // This should be implemented based on your environment system\n        // For now, return default value as placeholder\n        return defaultValue;\n    }\n\n    // ============================================================================\n    // PHP-LIKE FUNCTIONS (for Blade compatibility)\n    // ============================================================================\n\n    /**\n     * Hàm tương tự như PHP: ucfirst\n     * Viết hoa ký tự đầu tiên của chuỗi\n     * @param {string} str\n     * @returns {string}\n     */\n    ucfirst(str) {\n        if (typeof str !== 'string' || str.length === 0) return str;\n        return str.charAt(0).toUpperCase() + str.slice(1);\n    }\n\n    /**\n     * Hàm tương tự như PHP: lcfirst\n     * Viết thường ký tự đầu tiên của chuỗi\n     * @param {string} str\n     * @returns {string}\n     */\n    lcfirst(str) {\n        if (typeof str !== 'string' || str.length === 0) return str;\n        return str.charAt(0).toLowerCase() + str.slice(1);\n    }\n\n    /**\n     * Hàm tương tự như PHP: str_replace\n     * Thay thế tất cả các chuỗi con trong chuỗi\n     * @param {string|string[]} search\n     * @param {string|string[]} replace\n     * @param {string} subject\n     * @returns {string}\n     */\n    str_replace(search, replace, subject) {\n        if (Array.isArray(search)) {\n            let result = subject;\n            search.forEach((s, i) => {\n                const r = Array.isArray(replace) ? (replace[i] !== undefined ? replace[i] : '') : replace;\n                result = result.split(s).join(r);\n            });\n            return result;\n        } else {\n            return subject.split(search).join(replace);\n        }\n    }\n\n    /**\n     * Hàm tương tự như PHP: explode\n     * Cắt chuỗi thành mảng theo ký tự phân tách\n     * @param {string} delimiter\n     * @param {string} str\n     * @returns {Array}\n     */\n    explode(delimiter, str) {\n        if (typeof str !== 'string' || typeof delimiter !== 'string') return [];\n        return str.split(delimiter);\n    }\n\n    /**\n     * Hàm tương tự như PHP: implode\n     * Nối các phần tử của mảng thành chuỗi với ký tự phân tách\n     * @param {string} glue\n     * @param {Array} pieces\n     * @returns {string}\n     */\n    implode(glue, pieces) {\n        if (!Array.isArray(pieces)) return '';\n        return pieces.join(glue);\n    }\n\n    /**\n     * Hàm tương tự như PHP: in_array\n     * Kiểm tra giá trị có trong mảng không\n     * @param {any} needle\n     * @param {Array} haystack\n     * @returns {boolean}\n     */\n    in_array(needle, haystack) {\n        if (!Array.isArray(haystack)) return false;\n        return haystack.includes(needle);\n    }\n\n    /**\n     * Hàm tương tự như PHP: array_unique\n     * Loại bỏ các phần tử trùng lặp trong mảng\n     * @param {Array} arr\n     * @returns {Array}\n     */\n    array_unique(arr) {\n        if (!Array.isArray(arr)) return [];\n        return Array.from(new Set(arr));\n    }\n\n    /**\n     * Hàm tương tự như PHP: array_merge\n     * Gộp nhiều mảng thành một mảng\n     * @param  {...Array} arrays\n     * @returns {Array}\n     */\n    array_merge(...arrays) {\n        return [].concat(...arrays);\n    }\n\n    /**\n     * Hàm tương tự như PHP: is_array\n     * Kiểm tra biến có phải là mảng không\n     * @param {any} value\n     * @returns {boolean}\n     */\n    is_array(value) {\n        return Array.isArray(value);\n    }\n\n    /**\n     * Hàm tương tự như PHP: is_string\n     * Kiểm tra biến có phải là chuỗi không\n     * @param {any} value\n     * @returns {boolean}\n     */\n    is_string(value) {\n        return typeof value === 'string';\n    }\n\n    /**\n     * Hàm tương tự như PHP: is_numeric\n     * Kiểm tra biến có phải là số hoặc chuỗi số không\n     * @param {any} value\n     * @returns {boolean}\n     */\n    is_numeric(value) {\n        return !isNaN(parseFloat(value)) && isFinite(value);\n    }\n\n    /**\n     * Hàm tương tự như PHP: empty\n     * Kiểm tra biến có \"rỗng\" không (null, undefined, '', 0, false, [], {})\n     * @param {any} value\n     * @returns {boolean}\n     */\n    empty(value) {\n        if (value === null || value === undefined) return true;\n        if (typeof value === 'string' && value.trim() === '') return true;\n        if (Array.isArray(value) && value.length === 0) return true;\n        if (typeof value === 'object' && !Array.isArray(value) && Object.keys(value).length === 0) return true;\n        if (value === false) return true;\n        if (value === 0) return true;\n        return false;\n    }\n\n    /**\n     * Hàm tương tự như PHP: isset\n     * Kiểm tra biến có được định nghĩa và khác null không\n     * @param {any} value\n     * @returns {boolean}\n     */\n    isset(value) {\n        return value !== undefined && value !== null;\n    }\n\n    /**\n     * Hàm tương tự như PHP: json_encode\n     * Chuyển đổi giá trị thành chuỗi JSON\n     * @param {any} value\n     * @returns {string}\n     */\n    json_encode(value) {\n        return JSON.stringify(value);\n    }\n\n    /**\n     * Hàm tương tự như PHP: json_decode\n     * Chuyển đổi chuỗi JSON thành giá trị\n     * @param {string} value\n     * @returns {any}\n     */\n    json_decode(value) {\n        return JSON.parse(value);\n    }\n\n    /**\n     * Check if device is mobile\n     * @returns {boolean} True if mobile\n     */\n    isMobile() {\n        return this.getDeviceType() === 'mobile';\n    }\n\n    /**\n     * Check if device is tablet\n     * @returns {boolean} True if tablet\n     */\n    isTablet() {\n        return this.getDeviceType() === 'tablet';\n    }\n\n    /**\n     * Check if device is desktop\n     * @returns {boolean} True if desktop\n     */\n    isDesktop() {\n        return this.getDeviceType() === 'desktop';\n    }\n}\n","import { uniqId } from \"../helpers/utils.js\";\nimport OneMarkup, { OneMarkupModel } from \"./OneMarkup.js\";\nimport OneDOM from \"./OneDOM.js\";\nimport { ViewState } from \"./ViewState.js\";\n\n\nexport class FollowingBlock {\n    constructor({ App, engine, stateKeys = [], renderBlock = () => '', scanMode = false, renderID = '' }) {\n        /**\n         * @type {Application}\n         */\n        this.App = App;\n        /**\n         * @type {ViewEngine}\n         */\n        this.engine = engine;\n        /**\n         * @type {ViewState}\n         */\n        this.states = engine.states;\n        /**\n         * @type {Array}\n         */\n        this.stateKeys = stateKeys;\n        /**\n         * @type {function}\n         */\n        this.renderBlock = renderBlock;\n        /**\n         * @type {boolean}\n         */\n        this.scanMode = scanMode;\n        /**\n         * @type {string}\n         */\n        this.id = renderID || uniqId();\n        /**\n         * @type {boolean}\n         */\n        this.isRendered = false;\n\n        this.openTag = null;\n        this.closeTag = null;\n        this.refElements = [];\n        this.subscribes = [];\n        this.isMounted = false;\n        this.isScanned = false;\n        /**\n         * @type {OneMarkupModel|null}\n         */\n        this.markup = null;\n    }\n    mounted() {\n        if (this.isMounted) return;\n        this.isMounted = true;\n        this.scan();\n        if (this.stateKeys.length > 0) {\n            this.stateKeys.forEach(stateKey => {\n                const unsubscribe = this.states.__subscribe(stateKey, () => {\n                    console.log(`FollowingBlock [id=${this.id}] detected change in state \"${stateKey}\", renewing...`);\n                    this.renew();\n                });\n                this.subscribes.push(unsubscribe);\n            });\n        }\n    }\n    unmounted() {\n        this.isMounted = false;\n        if (this.subscribes.length > 0) {\n            this.subscribes.forEach(unsubscribe => {\n                unsubscribe();\n            });\n            this.subscribes = [];\n        }\n    }\n\n    placeholder() {\n        return `<!-- [one:placeholder ref=\"following\" id=\"${this.id}\"] --><!-- [/one:placeholder] -->`;\n    }\n\n    render() {\n        \n        return `<!-- [one:follow type=\"state\" id=\"${this.id}\" following=\"${this.stateKeys.join(',')}\"] viewid=\"${this.id}\" -->${this.renderBlock()}<!-- [/one:follow] -->`;\n    }\n    rerender() {\n        return this.renderBlock();\n    }\n    renew() {\n        this.engine.onFollowUpdating();\n        try {\n            this.unmounted();\n            this.clear();\n            if (this.closeTag && this.closeTag.parentNode) {\n                OneDOM.before(this.closeTag, this.rerender());\n                this.mounted();\n            }\n        } catch (e) {\n            console.error('FollowingBlock renew error:', e);\n        }\n        this.engine.onFollowUpdated();\n    }\n\n    destroy() {\n        this.unmounted();\n        this.clear();\n    }\n\n\n    scan() {\n        console.log(`FollowingBlock [id=${this.id}] scanning...`);\n        if(!this.markup){\n            this.markup = OneMarkup.first('follow', { id: this.id }, {}, false);\n            this.openTag = this.markup.openTag;\n            this.closeTag = this.markup.closeTag;\n            this.refElements = this.markup.nodes.slice();\n        }else{\n            this.refElements = [];\n            this.markup.__scan();\n            this.refElements = this.markup.nodes.slice();\n        }\n        this.isScanned = true;\n    }\n    clear() {\n        this.refElements.forEach(node => {\n            if (node.parentNode) {\n                node.parentNode.removeChild(node);\n            }\n        });\n        this.refElements = [];\n    }\n\n}","export class OneDOM {\n    static validateElement(element) {\n        if (!(element instanceof Element || element instanceof Comment)) {\n            throw new Error('Provided value is not a valid DOM Element');\n        }\n        return true;\n    }\n    /**\n     * Convert various input types to a safe DocumentFragment\n     * Supports: string, Element, NodeList, Array<Element|string>\n     */\n    static toFragment(content) {\n        const fragment = document.createDocumentFragment();\n\n        const appendItem = (item) => {\n            if (!item) return;\n            if (typeof item === 'string') {\n                const template = document.createElement('template');\n                template.innerHTML = item.trim();\n                fragment.appendChild(template.content);\n            } else if (item instanceof Element || item instanceof DocumentFragment) {\n                fragment.appendChild(item);\n            } else if (Array.isArray(item) || item instanceof NodeList) {\n                item.forEach(appendItem);\n            } else {\n                console.warn('Unsupported content type:', item);\n            }\n        };\n\n        appendItem(content);\n        return fragment;\n    }\n\n    /**\n     * Chèn nội dung trước đối tượng tham chiếu trong DOM\n     * @param {Element|Comment} target đối tường dùng để tham chiếu\n     * @param {*} content nội dung thêm vào\n     */\n    static before(target, content) {\n        if (!(target instanceof Element || target instanceof Comment)) throw new Error('Target must be a DOM element');\n        target.parentNode.insertBefore(this.toFragment(content), target);\n    }\n\n    /**\n     * Chèn nội dung sau đối tượng tham chiếu trong DOM\n     * @param {Element|Comment} target đối tường dùng để tham chiếu\n     * @param {*} content nội dung thêm vào\n     */\n    static after(target, content) {\n        if (!(target instanceof Element || target instanceof Comment)) throw new Error('Target must be a DOM element');\n        const frag = this.toFragment(content);\n        if (target.nextSibling) target.parentNode.insertBefore(frag, target.nextSibling);\n        else target.parentNode.appendChild(frag);\n    }\n\n    /**\n     * Thay thế đối tượng tham chiếu trong DOM bằng nội dung mới\n     * @param {Element|Comment} target đối tường dùng để tham chiếu\n     * @param {*} content nội dung thay thế\n     */\n    static replace(target, content) {\n        if (!(target instanceof Element || target instanceof Comment)) throw new Error('Target must be a DOM element');\n        target.replaceWith(this.toFragment(content));\n    }\n\n    /**\n     * Thêm nội dung vào cuối phần tử tham chiếu trong DOM\n     * @param {Element} target phần tử dùng để tham chiếu\n     * @param {*} content nội dung thêm vào\n     */\n    static append(target, content) {\n        if (!(target instanceof Element)) throw new Error('Target must be a DOM element');\n        target.appendChild(this.toFragment(content));\n    }\n\n    /**\n     * Thêm nội dung vào đầu phần tử tham chiếu trong DOM\n     * @param {Element} target phần tử dùng để tham chiếu\n     * @param {*} content nội dung thêm vào\n     */\n    static prepend(target, content) {\n        if (!(target instanceof Element)) throw new Error('Target must be a DOM element');\n        if (!target.firstChild) {\n            target.appendChild(this.toFragment(content));\n            return;\n        }\n        target.insertBefore(this.toFragment(content), target.firstChild);\n    }\n    /**\n     * Thiết lập nội dung HTML cho phần tử tham chiếu trong DOM\n     * @param {Element} target phần tử dùng để tham chiếu\n     * @param {*} content nội dung thiết lập\n     */\n    static setHTML(target, content) {\n        if (!(target instanceof Element)) throw new Error('Target must be a DOM element');\n        target.innerHTML = '';\n        target.appendChild(this.toFragment(content));\n    }\n\n    /**\n     * Thay thế toàn bộ nội dung của phần tử tham chiếu trong DOM\n     * @param {Element} target phần tử dùng để tham chiếu\n     * @param {*} content nội dung thay thế\n     */\n    static replaceContent(target, content) {\n        if (!(target instanceof Element)) throw new Error('Target must be a DOM element');\n        target.innerHTML = '';\n        target.appendChild(this.toFragment(content));\n    }\n\n    static content(target, content) {\n        if (content === undefined) {\n            // Lấy nội dung\n            if (!(target instanceof Element)) throw new Error('Target must be a DOM element');\n            return target.innerHTML;\n        } else {\n            // Thiết lập nội dung\n            this.setHTML(target, content);\n        }\n    }\n\n    static children(target, children = null) {\n        if (!(target instanceof Element)) throw new Error('Target must be a DOM element');\n        if (children === null || children === undefined) {\n            return Array.from(target.children);\n        } else {\n            target.innerHTML = '';\n            target.appendChild(this.toFragment(children));\n        }\n    }\n}\n\nexport default OneDOM;","/**\n * API Module\n * ES6 Module for Blade Compiler\n */\n\n// Import App from global init\nimport { HttpService } from './services/HttpService.js';\n\nexport class AppAPI {\n    constructor() {\n        this.http = new HttpService();\n        this.http.setHeader('Content-Type', 'application/json');\n        this.http.setHeader('Accept', 'application/json');\n        this.http.setHeader('X-Requested-With', 'XMLHttpRequest');\n        // Conditional document access for Node.js compatibility\n        if (typeof document !== 'undefined') {\n            const csrfToken = document.querySelector('meta[name=\"csrf-token\"]');\n            if (csrfToken) {\n                this.http.setHeader('X-CSRF-TOKEN', csrfToken.getAttribute('content'));\n            }\n        }\n        this.http.setHeader('X-DATA-TYPE', 'json');\n        this.endpoints = typeof window !== 'undefined' ? window.APP_CONFIGS?.api?.endpoints || {} : {};\n    }\n    async getViewData(uri) {\n        try {\n            const response = await this.http.get(uri).then(response => {\n                return response.status ? response.data : {};\n            }).catch(error => {\n                console.error('❌ AppAPI: Error getting view data:', error);\n                return {};\n            });\n\n            return response;\n        } catch (error) {\n            console.error('❌ AppAPI: Error getting view data:', error);\n            return {};\n        }\n\n    }\n    async getSystemConfig() {\n        return {};\n        return this.http.get('/api/system/config').then(response => {\n            return response.status ? response.data : {};\n        }).catch(error => {\n            console.error('❌ AppAPI: Error getting system config:', error);\n            return {};\n        });\n    }\n    async getSystemData() {\n        let endpoint = this.endpoints?.system?.data;\n        if (!endpoint) {\n            return {};\n        }\n        return this.http.get(endpoint).then(response => {\n            return response.status ? response.data : {};\n        }).catch(error => {\n            console.error('❌ AppAPI: Error getting system data:', error);\n            return {};\n        });\n    }\n\n    async getURIDAta() {\n        const uri = typeof window !== 'undefined' ? window.location.pathname + window.location.search : '/';\n        return this.getViewData(uri);\n    }\n\n}\n\nexport const API = new AppAPI();\n\nexport default API;","import { __defineProp, __hasOwnProp } from '../helpers/utils.js';\nimport { TemplateDetectorService } from './services/TemplateDetectorService.js';\n\nexport class OneMarkupModel {\n    constructor(fullName, openTag, closeTag, attributes = {}, nodes = []) {\n        /**\n         * @type {Element|Comment}\n         */\n        this.__openTag = openTag;\n        /**\n         * @type {Element|Comment}\n         */\n        this.__closeTag = closeTag;\n        this.__attributes = attributes;\n        /**\n         * @type {Array<Element|Comment>}\n         */\n        this.__nodes = nodes;\n        this.__definedAttributes = [];\n        this.__tagName = fullName.split(':')[1];\n        this.__fullName = fullName;\n        this.__defineAttributes(Object.keys(attributes));\n    }\n    __update(fullName, openTag, closeTag, attributes = {}, nodes = []) {\n        this.__openTag = openTag;\n        this.__closeTag = closeTag;\n        this.__attributes = attributes;\n        this.__nodes = nodes;\n        this.__tagName = fullName.split(':')[1];\n        this.__fullName = fullName;\n        this.__defineAttributes(Object.keys(attributes));\n        return this;\n    }\n    __defineAttributes(attributeKeys = []) {\n        for (let i = 0; i < attributeKeys.length; i++) {\n            const key = attributeKeys[i];\n            this.__defineAttribute(key);\n        }\n        return this;\n    }\n    __defineAttribute(name) {\n        if (this.__definedAttributes.includes(name)) {\n            return this;\n        }\n        this.__definedAttributes.push(name);\n        __defineProp(this, name, {\n            set: (value) => {\n                this.__attributes[name] = value;\n                return value;\n            },\n            get: () => {\n                return this.__attributes[name];\n            }\n        });\n        return this;\n    }\n    get tagName() {\n        return this.__tagName;\n    }\n    set tagName(name) {\n        // this.__tagName = name;\n        return this;\n    }\n    get fullName() {\n        return this.__fullName;\n    }\n    set fullName(name) {\n        // this.__fullName = name;\n        return this;\n    }\n    get openTag() {\n        return this.__openTag;\n    }\n    get closeTag() {\n        return this.__closeTag;\n    }\n    get attributes() {\n        return this.__attributes;\n    }\n    /**\n     * Get the nodes of the markup element\n     * @returns {Array<Element|Comment>} - The nodes of the markup element\n     */\n    get nodes() {\n        return this.__nodes;\n    }\n    getAttribute(name) {\n        return this.__attributes[name];\n    }\n    setAttribute(name, value) {\n        this.__defineAttribute(name);\n        this.__attributes[name] = value;\n        return this;\n    }\n    __match(attributes = {}) {\n        let keys = Object.keys(attributes);\n        for (let i = 0; i < keys.length; i++) {\n            const key = keys[i];\n            const value = attributes[key];\n            if (key === 'tagName') {\n                if (this.__tagName !== value) {\n                    return false;\n                }\n                continue;\n            }\n            else if (key === 'openTag') {\n                if (this.__openTag !== value) {\n                    return false;\n                }\n                continue;\n            }\n            else if (key === 'closeTag') {\n                if (this.__closeTag !== value) {\n                    return false;\n                }\n                continue;\n            }\n            else if (key === 'attributes') {\n                continue;\n            }\n            else if (key === 'nodes') {\n                continue;\n            }\n            else if (this.__attributes[key] !== value) {\n                return false;\n            }\n        }\n        return true;\n    }\n    __scan() {\n        const nodes = [];\n        let currentNode = this.__openTag.nextSibling;\n        while (currentNode && currentNode !== this.__closeTag) {\n            nodes.push(currentNode);\n            currentNode = currentNode.nextSibling;\n        }\n        this.__nodes.length = 0;\n        this.__nodes.push(...nodes);\n        return this.__nodes;\n    }\n    updateNodes(nodes = []) {\n        this.__nodes = nodes;\n        return this;\n    }\n}\n\nexport class OneMarkupCollection {\n    constructor(elements = []) {\n        this.__models = elements.map(element => (element instanceof OneMarkupModel) ? element : new OneMarkupModel(element.fullName, element.openTag, element.closeTag, element.attributes, element.nodes));\n    }\n    get models() {\n        return this.__models;\n    }\n    get length() {\n        return this.__models.length;\n    }\n\n    /**\n     * Get the first model in the collection\n     * @returns {OneMarkupModel} - The first model in the collection\n     */\n    get first() {\n        return this.__models[0];\n    }\n    /**\n     * Get the last model in the collection\n     */\n    get last() {\n        return this.__models[this.__models.length - 1];\n    }\n    push(model) {\n        if (!(model instanceof OneMarkupModel)) {\n            model = new OneMarkupModel(model.fullName, model.openTag, model.closeTag, model.attributes, model.nodes);\n        }\n        this.__models.push(model);\n        return this;\n    }\n    pop() {\n        return this.__models.pop();\n    }\n    shift() {\n        return this.__models.shift();\n    }\n    unshift(model) {\n        if (!(model instanceof OneMarkupModel)) {\n            model = new OneMarkupModel(model.fullName, model.openTag, model.closeTag, model.attributes, model.nodes);\n        }\n        this.__models.unshift(model);\n        return this;\n    }\n    splice(start, deleteCount, ...items) {\n        if (!(items instanceof OneMarkupCollection)) {\n            items = new OneMarkupCollection(items);\n        }\n        this.__models.splice(start, deleteCount, ...items.__models);\n        return this;\n    }\n    slice(start, end) {\n        return this.__models.slice(start, end);\n    }\n    concat(models) {\n        if (!(models instanceof OneMarkupCollection)) {\n            models = new OneMarkupCollection(models);\n        }\n        return new OneMarkupCollection(this.__models.concat(models.__models));\n    }\n    reverse() {\n        return new OneMarkupCollection(this.__models.reverse());\n    }\n\n    /**\n     * Get the model at the given index\n     * @param {number} index - The index of the model to get\n     * @returns {OneMarkupModel} - The model at the given index\n     */\n    get(index) {\n        return this.__models[index];\n    }\n    /**\n     * Set the model at the given index\n     * @param {number} index - The index of the model to set\n     * @param {OneMarkupModel} model - The model to set at the given index\n     * @returns {OneMarkupCollection} - The collection\n     */\n    set(index, model) {\n        this.__models[index] = model;\n        return this;\n    }\n\n    /**\n     * Map the collection to a new array\n     * @param {function} callback - The callback function to map the collection\n     * @returns {Array} - The new array\n     */\n    map(callback) {\n        return this.__models.map(callback);\n    }\n    /**\n     * Filter the collection to a new array\n     * @param {function} callback - The callback function to filter the collection\n     * @returns {Array} - The new array\n     */\n    filter(callback) {\n        return this.__models.filter(callback);\n    }\n    /**\n     * Reduce the collection to a single value\n     * @param {function} callback - The callback function to reduce the collection\n     * @param {any} initialValue - The initial value to reduce the collection\n     * @returns {any} - The reduced value\n     */\n    reduce(callback, initialValue) {\n        return this.__models.reduce(callback, initialValue);\n    }\n    /**\n     * For each the collection\n     * @param {function} callback - The callback function to for each the collection\n     * @returns {OneMarkupCollection} - The collection\n     */\n    forEach(callback) {\n        return this.__models.forEach(callback);\n    }\n    /**\n     * Some the collection\n     * @param {function} callback - The callback function to some the collection\n     * @returns {boolean} - True if some of the collection matches the callback, false otherwise\n     */\n    some(callback) {\n        return this.__models.some(callback);\n    }\n    /**\n     * Every the collection\n     * @param {function} callback - The callback function to every the collection\n     * @returns {boolean} - True if every of the collection matches the callback, false otherwise\n     */\n    every(callback) {\n        return this.__models.every(callback);\n    }\n    /**\n     * Query the collection\n     * @param {object} attributes - The attributes to query the collection\n     * @returns {Array} - The filtered array\n     */\n    query(attributes = {}) {\n        return this.__models.filter(model => model.__match(attributes));\n    }\n    find(attributes = {}) {\n        return this.query(attributes)[0] || null;\n    }\n}\n\nexport class OneMarkupService {\n    constructor() {\n        /**\n         * @type {TemplateDetectorService}\n         */\n        this.detector = new TemplateDetectorService(document.documentElement);\n    }\n\n    /**\n     * Find the first element that matches the pattern and attributes\n     * @param {string} pattern - The pattern to find\n     * @param {object} attributes - The attributes to find\n     * @param {object} options - The options to find\n     * @param {number} total - The total to find\n     * @returns {OneMarkupModel|OneMarkupCollection} - The first element that matches the pattern and attributes\n     */\n    find(pattern = '*', attributes = {}, options = {}, total = false) {\n        if (!__hasOwnProp(this, 'useCache')) {\n            options.useCache = false;\n        }\n        const elements = this.detector.find(\"one:\" + pattern, options);\n        const isTotal = total && typeof total === 'number' && total > 0;\n        const isLast = total && total === -1;\n        const isFirst = total && total === 1;\n        if (elements.length === 0) {\n            if (isLast) {\n                return null;\n            }\n            else if (isTotal && total == 1) {\n                return null;\n            }\n            return new OneMarkupCollection([]);\n        }\n        if (typeof attributes !== 'object' || attributes === null || Object.keys(attributes).length === 0) {\n            if (isLast) {\n                const lastElement = elements[elements.length - 1];\n                return new OneMarkupModel(lastElement.fullName, lastElement.openTag, lastElement.closeTag, lastElement.attributes, lastElement.nodes);\n            }\n            else if (isTotal) {\n                if (total == 1) {\n                    return new OneMarkupModel(elements[0].fullName, elements[0].openTag, elements[0].closeTag, elements[0].attributes, elements[0].nodes);\n                }\n                return new OneMarkupCollection(elements.slice(0, total));\n            }\n            return new OneMarkupCollection(elements);\n        }\n        const keys = Object.keys(attributes);\n        const result = [];\n        const elementCount = elements.length;\n        const lastIndex = elementCount - 1;\n        for (let i = 0; i < elementCount; i++) {\n            if(isLast && i < lastIndex) {\n                continue;\n            }\n            const element = elements[i];\n            let isMatch = true;\n            for (let j = 0; j < keys.length; j++) {\n                const key = keys[j];\n                const value = attributes[key];\n                if (element.attributes[key] !== value) {\n                    isMatch = false;\n                    break;\n                }\n            }\n            if (!isMatch) {\n                continue;\n            }\n            if (isFirst) {\n                return new OneMarkupModel(element.fullName, element.openTag, element.closeTag, element.attributes, element.nodes);\n            }\n            if(isLast && i === lastIndex) {\n                return new OneMarkupModel(element.fullName, element.openTag, element.closeTag, element.attributes, element.nodes);\n            }\n            result.push(element);\n            if (isTotal && result.length >= total) {\n                return new OneMarkupCollection(result);\n            }\n        }\n        return new OneMarkupCollection(result);\n    }\n\n    first(pattern = '*', attributes = {}, options = {}) {\n        return this.find(pattern, attributes, options, 1);\n    }\n}\n\nexport const OneMarkup = new OneMarkupService();\nexport default OneMarkup;","/**\n * router Module\n * ES6 Module for Blade Compiler\n */\n\n// import { Application } from \"../app.js\";\nimport { ViewEngine } from \"./ViewEngine.js\";\n\nclass ActiveRoute {\n    constructor(route, urlPath, params, query = {}, fragment = {}) {\n        this.$route = route;\n        this.$urlPath = urlPath;\n        this.$params = params || {};\n        this.$query = query || {};\n        this.$fragment = fragment || {};\n        this.$paramKeys = [...Object.keys(params || {})];\n        Object.keys(params).forEach(key => {\n            Object.defineProperty(this, key, {\n                get: () => this.$params[key],\n                set: (value) => {\n                    this.$params[key] = value;\n                },\n                enumerable: true,\n                configurable: false,\n            });\n        });\n    }\n\n\n\n    getPath() {\n        return this.$urlPath || null;\n    }\n    getUrlPath() {\n        return this.$urlPath || null;\n    }\n\n    getParams() {\n        return this.$params || {};\n    }\n    getParam(name) {\n        return this.$params[name] || null;\n    }\n    getQuery() {\n        return this.$query || {};\n    }\n    getFragment() {\n        return this.$fragment || {};\n    }\n}\n\nexport class Router {\n    static activeRoute = null;\n    static containers = {};\n    constructor(App = null) {\n        /**\n         * @type {Application}\n         */\n        this.App = App;\n        this.routes = [];\n        this.currentRoute = null;\n        this.mode = 'history';\n        this.base = '';\n        this._beforeEach = null;\n        this._afterEach = null;\n        this.defaultRoute = '/';\n\n        // Bind methods\n        this.handleRoute = this.handleRoute.bind(this);\n        this.handlePopState = this.handlePopState.bind(this);\n\n        /**\n         * @type {Object<string, {path: string, view: string, params: object}>}\n         */\n        this.routeConfigs = {};\n        this.currentUri = window.location.pathname + window.location.search;\n    }\n\n    setApp(app) {\n        this.App = app;\n        return this;\n    }\n\n    addRouteConfig(routeConfig) {\n        this.routeConfigs[routeConfig.name] = routeConfig;\n    }\n\n    setAllRoutes(routes) {\n        for (const route of routes) {\n            this.addRouteConfig(route);\n        }\n    }\n\n\n    getURL(name, params = {}) {\n        const routeConfig = this.routeConfigs[name];\n        if (!routeConfig) {\n            return null;\n        }\n        let url = this.generateUrl(routeConfig.path, params);\n        if (!(url.startsWith('/') || url.startsWith('http:') || url.startsWith('https:'))) {\n            url = this.base + url;\n        }\n        return url;\n    }\n\n    addRoute(path, view, options = {}) {\n        this.routes.push({\n            path: this.normalizePath(path),\n            view: view,\n            options: options\n        });\n    }\n\n    setMode(mode) {\n        this.mode = mode;\n    }\n\n    setBase(base) {\n        this.base = base;\n    }\n\n    setDefaultRoute(route) {\n        this.defaultRoute = route;\n    }\n\n    beforeEach(callback) {\n        this._beforeEach = callback;\n    }\n\n    afterEach(callback) {\n        this._afterEach = callback;\n    }\n\n    normalizePath(path) {\n        // Remove leading slash if present, then add it back to ensure consistency\n        let normalized = path.startsWith('/') ? path : '/' + path;\n\n        // Remove trailing slash except for root path\n        if (normalized.length > 1 && normalized.endsWith('/')) {\n            normalized = normalized.slice(0, -1);\n        }\n\n        // Handle empty path as root\n        if (normalized === '') {\n            normalized = '/';\n        }\n\n        return normalized;\n    }\n\n    /**\n     * So sánh xem chuỗi str có khớp với format không.\n     * @param {string} str - Chuỗi đầu vào cần kiểm tra\n     * @param {string} format - Định dạng, ví dụ: {abc}, {abc}-def, demo-{key}, test-demo-{key}.xyz, ...\n     * @returns {boolean} true nếu khớp, false nếu không\n     */\n    matchFormat(str, format) {\n        // Chuyển format thành regex\n        // Thay thế {param} thành ([^\\/\\-.]+) để match 1 đoạn không chứa /, -, .\n        // Giữ lại các ký tự đặc biệt như -, ., ...\n        let regexStr = format.replace(/([.*+?^=!:${}()|\\[\\]\\/\\\\])/g, '\\\\$1'); // escape ký tự đặc biệt\n        regexStr = regexStr.replace(/\\{[a-zA-Z0-9_]+\\}/g, '([^\\\\/\\\\-.]+)');\n        // Cho phép match toàn bộ chuỗi\n        regexStr = '^' + regexStr + '$';\n        const regex = new RegExp(regexStr);\n        return regex.test(str);\n    }\n\n    hasParameter(path) {\n        return /\\{[a-zA-Z0-9_]+\\}/.test(path);\n    }\n\n    isAnyParameter(path) {\n        return path.includes('*') || path.toLowerCase() === '{any}';\n    }\n\n    /**\n     * Lấy tên tham số đầu tiên trong path có format {param}\n     * Đảm bảo hoạt động trên tất cả các trình duyệt (không dùng lookbehind/lookahead)\n     * @param {string} format - Chuỗi path, ví dụ: \"abc-{name}.html\"\n     * @returns {string|null} - Trả về tên param đầu tiên nếu có, ngược lại trả về null\n     */\n    getParameterName(format) {\n        // Dùng RegExp đơn giản, không lookbehind/lookahead để tương thích trình duyệt cũ\n        var regex = /\\{([a-zA-Z0-9_]+)\\}/;\n        var match = regex.exec(format);\n        if (match && match[1]) {\n            return match[1];\n        }\n        return null;\n    }\n\n    /**\n     * Lấy giá trị tham số đầu tiên trong path theo format {param}\n     * @param {string} format - Chuỗi format, ví dụ: \"{id}\"\n     * @param {string} path - Chuỗi path thực tế, ví dụ: \"1\"\n     * @returns {string|null} - Giá trị param nếu tìm thấy, ngược lại trả về null\n     */\n    getParameterValue(format, path) {\n        if (typeof path !== 'string' || typeof format !== 'string') return null;\n\n        // Nếu format chỉ là {param} thì trả về path\n        if (format.match(/^\\{[a-zA-Z0-9_]+\\}$/)) {\n            return path;\n        }\n\n        // Escape các ký tự đặc biệt trong format (trừ {param})\n        let regexStr = format.replace(/([.*+?^=!:${}()|\\[\\]\\/\\\\])/g, '\\\\$1');\n        // Thay thế {param} thành nhóm bắt\n        regexStr = regexStr.replace(/\\{[a-zA-Z0-9_]+\\}/g, '([^\\\\/\\\\-.]+)');\n        // Tạo regex\n        const regex = new RegExp('^' + regexStr + '$');\n        const match = regex.exec(path);\n        if (match && match[1]) {\n            return match[1];\n        }\n        return null;\n    }\n\n    getAnyParameterValue(format, path) {\n        // Nếu format chứa dấu * thì xem như là {any}\n        if (typeof format === 'string' && format.includes('*')) {\n            format = format.replace(/\\*/g, '{any}');\n        }\n        if (typeof path !== 'string' || typeof format !== 'string') return null;\n        // Escape các ký tự đặc biệt trong format (trừ {param})\n        let regexStr = format.replace(/([.*+?^=!:${}()|\\[\\]\\/\\\\])/g, '\\\\$1');\n        // Thay thế từng {param} thành nhóm bắt\n        regexStr = regexStr.replace(/\\{[a-zA-Z0-9_]+\\}/g, '([^\\\\/\\\\-.]+)');\n        const regex = new RegExp('^' + regexStr + '$');\n        const valueMatch = regex.exec(path);\n        if (!valueMatch) return null;\n        // Trả về giá trị đầu tiên (hoặc null nếu không có)\n        return valueMatch[1] || null;\n    }\n\n    /**\n     * Check if a route with parameters matches the given path\n     * @param {object<{path: string, view: string, params: object}>} route - The route pattern (e.g., \"/web/users/{id}\")\n     * @param {string} urlPath - The actual path to match (e.g., \"/web/users/1\")\n     * @returns {Object|null} - Returns {params} if match, null if no match\n     */\n    checkParameterRoute(route, urlPath) {\n        const routePathParts = this.App.Helper.trim(route.path, '/').split('/');\n        const urlPathParts = this.App.Helper.trim(urlPath, '/').split('/');\n        // Must have same number of segments\n        if (routePathParts.length !== urlPathParts.length) {\n            console.log('❌ Different number of segments');\n            return null;\n        }\n\n        const lastRoutePathIndex = routePathParts.length - 1;\n        const params = {};\n\n\n\n\n        for (let i = 0; i < routePathParts.length; i++) {\n            const routePathPart = routePathParts[i];\n            const urlPathPart = urlPathParts[i];\n\n            if (this.isAnyParameter(routePathPart)) {\n                const paramValue = this.getAnyParameterValue(routePathPart, urlPathPart);\n                params.any = paramValue;\n                if (i === lastRoutePathIndex && i === 0) {\n                    return params;\n                }\n            } else if (this.hasParameter(routePathPart)) {\n                const paramName = this.getParameterName(routePathPart);\n                const paramValue = this.getParameterValue(routePathPart, urlPathPart);\n                if (paramValue === null) {\n                    console.log('❌ Parameter value is null');\n                    return null;\n                }\n                params[paramName] = paramValue;\n            }\n            else {\n                // Regular route part - exact match required\n                if (routePathPart !== urlPathPart) {\n                    console.log('❌ Exact match failed');\n                    return null;\n                }\n            }\n        }\n\n        return params;\n    }\n\n    matchRoute(path) {\n        const normalizedPath = this.normalizePath(path);\n\n        // Process routes in order - first match wins\n        for (const route of this.routes) {\n            const routePath = route.path;\n\n            // Check if route has parameters\n            const hasParameters = routePath.split('/').some(part => this.hasParameter(part) || this.isAnyParameter(part));\n\n            if (hasParameters) {\n                // Handle parameter route\n                const params = this.checkParameterRoute(route, normalizedPath);\n                if (params !== null) {\n                    return { route, params, path: normalizedPath };\n                }\n            } else {\n                // Handle exact route match\n                if (routePath === normalizedPath) {\n                    return { route, params: {}, path: normalizedPath };\n                }\n            }\n        }\n\n        return null;\n    }\n\n    async handleRoute(path, ignoreSetActiveRoute = false) {\n        // Remove query string for route matching\n        const pathForMatching = path.split('?')[0];\n        const match = this.matchRoute(pathForMatching);\n\n        if (!match) {\n            console.warn(`No route found for: ${path}`);\n            return;\n        }\n\n        const { route, params } = match;\n\n        // Call beforeEach hook\n        if (this._beforeEach) {\n            const result = await this._beforeEach(route, params);\n            if (result === false) {\n                return; // Navigation cancelled\n            }\n        }\n        const URLParts = Router.getUrlParts();\n        const query = URLParts.query;\n        const fragment = URLParts.hash;\n\n        if (!ignoreSetActiveRoute) {\n            Router.addActiveRoute(route, match.path, params, query, fragment);\n        }\n\n        // Update current route\n        this.currentRoute = { ...route, $params: params, $query: query, $fragment: fragment, $urlPath: match.path };\n\n        // Render view\n        if (this.App.View && (route.view || route.component)) {\n            this.App.View.mountView(route.view || route.component, params, Router.getActiveRoute());\n        }\n\n        // Call afterEach hook\n        if (this._afterEach) {\n            this._afterEach(route, params);\n        }\n    }\n\n\n    /**\n     * Hydrate server-rendered views\n     * Scans SSR HTML and attaches JavaScript behavior without re-rendering\n     *\n     * Flow:\n     * 1. Get active route (from Router.activeRoute)\n     * 2. Call beforeEach hook\n     * 3. Call View.scanView() to:\n     *    - Scan page view + all parent layouts\n     *    - Setup view hierarchy (virtualRender)\n     *    - Attach event handlers to existing DOM\n     *    - Setup state subscriptions\n     *    - Mount all views bottom-up\n     * 4. Call afterEach hook\n     * 5. Mark hydration complete\n     */\n    async hydrateViews() {\n        console.log('🚀 Router.hydrateViews: Starting hydration of server-rendered views...');\n\n        if (!this.App?.View) {\n            console.error('❌ Router.hydrateViews: App.View not available');\n            return;\n        }\n\n        // Get active route info\n        const activeRoute = Router.activeRoute || this.currentRoute;\n\n        if (!activeRoute) {\n            console.error('❌ Router.hydrateViews: No active route found');\n            return;\n        }\n\n        const { $route: route, $params: params, $urlPath: urlPath, $query: query, $fragment: fragment } = activeRoute;\n\n        // Call beforeEach hook (if exists)\n        if (this._beforeEach) {\n            const result = await this._beforeEach(route, params, urlPath);\n            if (result === false) {\n                console.log('🚫 Router.hydrateViews: Cancelled by beforeEach hook');\n                return;\n            }\n        }\n\n        // Handle view hydration\n        if (route.view || route.component) {\n            try {\n                const viewName = route.view || route.component;\n\n                this.App.View.mountViewScan(viewName, params, activeRoute);\n                // Call afterEach hook\n                if (this._afterEach) {\n                    this._afterEach(route, params);\n                }\n\n\n            } catch (error) {\n                console.error('❌ Router.hydrateViews: Error during hydration:', error);\n            }\n        }\n    }\n\n\n    handlePopState(event) {\n        const path = window.location.pathname + window.location.search;\n        this.handleRoute(path);\n    }\n\n    navigate(path) {\n\n        if (this.mode === 'history') {\n            window.history.pushState({}, '', path);\n            try {\n                this.handleRoute(path);\n                this.currentUri = path;\n            } catch (error) {\n                console.error('❌ Router.navigate handleRoute error:', error);\n            }\n        } else {\n            // Hash mode\n            window.location.hash = path;\n            try {\n                this.handleRoute(path);\n                this.currentUri = path;\n            } catch (error) {\n                console.error('❌ Router.navigate handleRoute (hash mode) error:', error);\n            }\n        }\n    }\n\n    /**\n     * Generate URL with file extension\n     * @param {string} route - Route pattern (e.g., '/users/{id}')\n     * @param {object} params - Parameters to fill in\n     * @param {string} extension - File extension (e.g., '.html', '.php')\n     * @returns {string} Generated URL\n     */\n    generateUrl(route, params = {}, extension = '') {\n        let url = route;\n\n        // Replace parameters\n        for (const [key, value] of Object.entries(params)) {\n            url = url.replace(`{${key}}`, value);\n        }\n\n        // Add extension if provided\n        if (extension && !url.endsWith(extension)) {\n            url += extension;\n        }\n\n        return url;\n    }\n\n    /**\n     * Navigate to route with file extension\n     * @param {string} route - Route pattern\n     * @param {object} params - Parameters\n     * @param {string} extension - File extension\n     */\n    navigateTo(route, params = {}, extension = '') {\n        const url = this.generateUrl(route, params, extension);\n        this.navigate(url);\n    }\n\n    start(skipInitial = false) {\n        // Detect if page has server-rendered content\n        // Check container for data-server-rendered attribute\n        const container = this.App?.View?.container || document.querySelector('#spa-content, #app-root, #app');\n        const isServerRendered = container && container.getAttribute('data-server-rendered') === 'true';\n        const URLParts = Router.getUrlParts();\n        const initialPath = this.mode === 'history' ? (window.location.pathname + window.location.search) : (window.location.hash.substring(1) || this.defaultRoute);\n\n        console.log('🔍 Router.start: Detected SSR:', isServerRendered);\n        console.log('🔍 Router.start: Container:', container?.id || container?.tagName);\n        console.log('🔍 Router.start: Initial path:', initialPath);\n\n        this.setActiveRouteForCurrentPath(initialPath);\n\n        // Add event listeners\n        if (this.mode === 'history') {\n            window.addEventListener('popstate', this.handlePopState);\n        } else {\n            window.addEventListener('hashchange', this.handlePopState);\n        }\n\n        // Choose initial rendering strategy\n        if (isServerRendered) {\n            // SSR: Hydrate existing HTML\n            console.log('🚀 Router.start: Starting SSR hydration...');\n            this.hydrateViews();\n        } else if (!skipInitial) {\n            // CSR: Render from scratch\n            console.log('🚀 Router.start: Starting CSR rendering...');\n            this.handleRoute(initialPath);\n        } else {\n            console.log('🔍 Router.start: Skipping initial route handling' + (this.mode === 'history' ? '' : '( hash)') + ' but activeRoute is set');\n        }\n\n        this.setupAutoNavigation();\n\n    }\n\n    stop() {\n        if (this.mode === 'history') {\n            window.removeEventListener('popstate', this.handlePopState);\n        } else {\n            window.removeEventListener('hashchange', this.handlePopState);\n        }\n        // Remove auto-navigation listener\n        document.removeEventListener('click', this._autoNavHandler);\n    }\n\n    /**\n     * Set activeRoute for current path without rendering view\n     * Used when starting router with skipInitial = true\n     */\n    setActiveRouteForCurrentPath(path) {\n        // console.log('🔍 setActiveRouteForCurrentPath called with:', path);\n        // Remove query string for route matching\n        const pathForMatching = path.split('?')[0];\n        const match = this.matchRoute(pathForMatching);\n\n        if (match) {\n            const { route, params } = match;\n            const URLParts = Router.getUrlParts();\n            const query = URLParts.query;\n            const fragment = URLParts.hash;\n            // console.log('✅ Setting activeRoute for current path:', route.path, 'with params:', params);\n\n            // Set activeRoute without rendering\n            Router.addActiveRoute(route, match.path, params, query, fragment);\n            this.currentRoute = { ...route, $params: params, $query: query, $fragment: fragment, $urlPath: match.path };\n\n            // console.log('✅ activeRoute set successfully:', Router.activeRoute);\n        } else {\n            console.log('❌ No matching route found for current path:', path);\n        }\n    }\n\n    /**\n     * Setup auto-detect navigation for internal links\n     */\n    setupAutoNavigation() {\n        console.log('🔍 setupAutoNavigation called');\n        // Store reference to handler for removal\n        this._autoNavHandler = this.handleAutoNavigation.bind(this);\n        document.addEventListener('click', this._autoNavHandler);\n        console.log('✅ Auto-navigation setup complete - event listener added');\n    }\n\n    /**\n     * Handle auto-detect navigation\n     * @param {Event} e - Click event\n     */\n    handleAutoNavigation(e) {\n        // console.log('🔍 handleAutoNavigation called for:', e.target);\n\n        // Check for data-nav-link attribute first (highest priority)\n        const oneNavElement = e.target.closest('[data-nav-link]');\n\n        if (oneNavElement) {\n            // Check if navigation is disabled\n            if (oneNavElement.hasAttribute('data-nav-disabled')) {\n                console.log('🚫 Skipping disabled data-nav-link element');\n                return;\n            }\n\n            const navPath = oneNavElement.getAttribute('data-nav-link');\n            console.log('🔍 navPath:', navPath);\n\n            if (navPath && navPath.trim() !== '') {\n                console.log('🔗 Auto-navigating via data-nav-link attribute:', navPath);\n                e.preventDefault();\n                if (navPath === this.currentUri) {\n                    console.log('🚫 Same path - no navigation needed:', navPath);\n                    return;\n                }\n                this.navigate(navPath);\n                return;\n            }\n        }\n\n        // Check for data-navigate attribute (alternative to data-nav-link)\n        const navigateElement = e.target.closest('[data-navigate]');\n\n        if (navigateElement) {\n            // Check if navigation is disabled\n            if (navigateElement.hasAttribute('data-nav-disabled')) {\n                console.log('🚫 Skipping disabled data-navigate element');\n                return;\n            }\n\n            const navPath = navigateElement.getAttribute('data-navigate');\n            console.log('🔍 navPath from data-navigate:', navPath);\n\n            if (navPath && navPath.trim() !== '') {\n                console.log('🔗 Auto-navigating via data-navigate attribute:', navPath);\n                e.preventDefault();\n                if (navPath === this.currentUri) {\n                    console.log('🚫 Same path - no navigation needed:', navPath);\n                    return;\n                }\n                this.navigate(navPath);\n                return;\n            }\n        }\n\n        // Fallback to traditional <a> tag handling\n        const link = e.target.closest('a[href]');\n        if (!link) return;\n\n        // Skip if link has target=\"_blank\"\n        if (link.target === '_blank') {\n            console.log('🚫 Skipping external link with target=\"_blank\":', link.href);\n            return;\n        }\n\n        // Skip if link has data-nav=\"disabled\" or on-nav=\"false\"\n        if (link.dataset.nav === 'disabled' || link.getAttribute('data-nav') === 'false') {\n            console.log('🚫 Skipping disabled link:', link.href);\n            return;\n        }\n\n        // Skip if link has data-nav=\"false\" (explicitly disabled)\n        if (link.dataset.nav === 'false') {\n            console.log('🚫 Skipping explicitly disabled link:', link.href);\n            return;\n        }\n\n        // Skip mailto, tel, and other special protocols\n        if (link.href.startsWith('mailto:') || link.href.startsWith('tel:') || link.href.startsWith('javascript:')) {\n            console.log('🚫 Skipping special protocol link:', link.href);\n            return;\n        }\n\n        const href = link.href;\n\n        // Check if it's an external URL (different domain)\n        try {\n            const linkUrl = new URL(href);\n            const currentUrl = new URL(window.location.href);\n\n            // If different host, skip (external link)\n            if (linkUrl.host !== currentUrl.host) {\n                console.log('🚫 Skipping external domain link:', href);\n                return;\n            }\n        } catch (error) {\n            // If URL parsing fails, treat as internal link\n            console.log('⚠️ URL parsing failed, treating as internal:', href);\n        }\n\n        // Check if it's a full URL with same domain (and not same path - already checked above)\n        if (href.startsWith('http://') || href.startsWith('https://')) {\n            try {\n                const linkUrl = new URL(href);\n                const currentUrl = new URL(window.location.href);\n\n                if (linkUrl.host === currentUrl.host) {\n                    // Same domain, extract path with query string for navigation\n                    const path = linkUrl.pathname + linkUrl.search;\n                    console.log('🔗 Auto-navigating to same domain URL:', path);\n                    e.preventDefault();\n                    if (path === this.currentUri) {\n                        console.log('🚫 Same path - no navigation needed:', path);\n                        return;\n                    }\n                    this.navigate(path);\n                    return;\n                }\n            } catch (error) {\n                console.log('⚠️ URL parsing failed for full URL:', href);\n            }\n        }\n\n        // Handle relative URLs (and not same path - already checked above)\n        if (href && !href.startsWith('http') && !href.startsWith('//')) {\n            console.log('🔗 Auto-navigating to relative URL:', href);\n            e.preventDefault();\n            if (href === this.currentUri) {\n                console.log('🚫 Same path - no navigation needed:', href);\n                return;\n            }\n            this.navigate(href);\n            return;\n        }\n\n        // If we get here, it's likely an external link or unsupported format\n        console.log('🚫 Skipping unsupported link format:', href);\n    }\n    static getUrlParts() {\n        const { location } = window;\n        const { search, hash, pathname } = location;\n        return {\n            url: location.href,\n            protocol: location.protocol,\n            search: search.startsWith('?') ? search.substring(1) : search,\n            path: pathname,\n            query: Object.fromEntries(new URLSearchParams(search)),\n            hash: hash.startsWith('#') ? hash.substring(1) : hash\n        };\n    }\n\n    static addActiveRoute(route, urlPath, params, query = {}, fragment = null) {\n        if (!route.path) {\n            return;\n        }\n        if (!Router.containers[route.path]) {\n            Router.containers[route.path] = new ActiveRoute(route, urlPath, params, query, fragment);\n            Router.activeRoute = Router.containers[route.path];\n        } else {\n            Router.containers[route.path].$urlPath = urlPath;\n            Router.containers[route.path].$params = params;\n            Router.containers[route.path].$query = query;\n            Router.containers[route.path].$fragment = fragment;\n            Router.activeRoute = Router.containers[route.path];\n        }\n    }\n\n    static getCachedRoute(routePath) {\n        return Router.containers[routePath] || null;\n    }\n\n    static getCurrentRoute() {\n        return Router.activeRoute || null;\n    }\n    static getActiveRoute() {\n        return Router.activeRoute || null;\n    }\n    static getCurrentPath() {\n        return window.location.pathname;\n    }\n    static getCurrentUri() {\n        return this.mode === 'history' ? Router.getCurrentPath() : Router.getCurrentHash();\n    }\n    static getCurrentHash() {\n        const fragmentString = window.location.hash.substring(1) || '';\n        return fragmentString;\n    }\n    static getCurrentUrl() {\n        return this.mode === 'history' ? Router.getCurrentPath() + window.location.search : Router.getCurrentHash();\n    }\n    static getCurrentQuery() {\n        const query = Object.fromEntries(new URLSearchParams(window.location.search));\n        return query;\n    }\n    static getCurrentFragment() {\n        const fragmentString = window.location.hash.substring(1) || '';\n        return fragmentString;\n    }\n}\n\nexport default Router;\n\nexport const useRoute = () => Router.getCurrentRoute();\nexport const useParams = () => useRoute()?.getParams() || {};\nexport const useQuery = () => Router.getCurrentQuery() || {};\nexport const useFragment = () => Router.getCurrentFragment() || {};"],"names":["Helper","constructor","App","this","setApp","trim","str","char","regex","RegExp","replace","isHtmlString","test","substr","start","length","substring","strtolower","toLowerCase","strtoupper","toUpperCase","formatDate","date","format","d","Date","isNaN","getTime","year","getFullYear","month","String","getMonth","padStart","day","getDate","hours","getHours","minutes","getMinutes","seconds","getSeconds","formatNumber","num","options","decimals","thousandsSeparator","decimalSeparator","prefix","suffix","parts","toFixed","split","join","formatCurrency","amount","currency","truncate","text","randomString","result","i","charAt","Math","floor","chars","random","deepClone","obj","Array","map","item","cloned","Object","keys","forEach","key","debounce","func","wait","timeout","args","clearTimeout","setTimeout","throttle","limit","inThrottle","apply","getSEOTagConfig","title","tag","selector","attribute","description","attrs","name","keywords","ogTitle","property","ogDescription","ogImage","updateSEOItem","value","items","SEO","tags","element","document","querySelector","createElement","entries","attrKey","attrValue","setAttribute","head","appendChild","textContent","updateTitle","updateDescription","updateKeywords","updateOGTitle","updateOGDescription","updateOGImage","image","getUrlParams","url","window","location","href","params","URL","searchParams","buildUrl","baseUrl","set","toString","isInViewport","rect","getBoundingClientRect","top","left","bottom","innerHeight","documentElement","clientHeight","right","innerWidth","clientWidth","scrollTo","target","behavior","block","inline","offset","targetPosition","offsetTop","copyToClipboard","navigator","clipboard","writeText","error","console","downloadFile","content","filename","mimeType","blob","Blob","type","createObjectURL","link","download","body","click","removeChild","revokeObjectURL","getDeviceType","width","count","isArray","isNull","isString","isNumeric","parseFloat","isFinite","now","toISOString","today","slice","env","defaultValue","ucfirst","lcfirst","str_replace","search","subject","s","r","undefined","explode","delimiter","implode","glue","pieces","in_array","needle","haystack","includes","array_unique","arr","from","Set","array_merge","arrays","concat","is_array","is_string","is_numeric","empty","isset","json_encode","JSON","stringify","json_decode","parse","isMobile","isTablet","isDesktop","FollowingBlock","engine","stateKeys","renderBlock","scanMode","renderID","states","id","isRendered","openTag","closeTag","refElements","subscribes","isMounted","isScanned","markup","mounted","scan","stateKey","unsubscribe","__subscribe","log","renew","push","unmounted","placeholder","render","rerender","onFollowUpdating","clear","parentNode","before","e","onFollowUpdated","destroy","__scan","nodes","first","node","validateElement","Element","Comment","Error","toFragment","fragment","createDocumentFragment","appendItem","template","innerHTML","DocumentFragment","NodeList","warn","insertBefore","after","frag","nextSibling","replaceWith","append","prepend","firstChild","setHTML","replaceContent","children","API","http","setHeader","csrfToken","getAttribute","endpoints","APP_CONFIGS","api","getViewData","uri","get","then","response","status","data","catch","getSystemConfig","getSystemData","endpoint","system","getURIDAta","pathname","OneMarkupModel","fullName","attributes","__openTag","__closeTag","__attributes","__nodes","__definedAttributes","__tagName","__fullName","__defineAttributes","__update","attributeKeys","__defineAttribute","tagName","__match","currentNode","updateNodes","OneMarkupCollection","elements","__models","models","last","model","pop","shift","unshift","splice","deleteCount","end","reverse","index","callback","filter","reduce","initialValue","some","every","query","find","OneMarkup","detector","pattern","total","useCache","isTotal","isLast","isFirst","lastElement","elementCount","lastIndex","isMatch","j","ActiveRoute","route","urlPath","$route","$urlPath","$params","$query","$fragment","$paramKeys","defineProperty","enumerable","configurable","getPath","getUrlPath","getParams","getParam","getQuery","getFragment","Router","static","routes","currentRoute","mode","base","_beforeEach","_afterEach","defaultRoute","handleRoute","bind","handlePopState","routeConfigs","currentUri","app","addRouteConfig","routeConfig","setAllRoutes","getURL","generateUrl","path","startsWith","addRoute","view","normalizePath","setMode","setBase","setDefaultRoute","beforeEach","afterEach","normalized","endsWith","matchFormat","regexStr","hasParameter","isAnyParameter","getParameterName","match","exec","getParameterValue","getAnyParameterValue","valueMatch","checkParameterRoute","routePathParts","urlPathParts","lastRoutePathIndex","routePathPart","urlPathPart","paramValue","any","paramName","matchRoute","normalizedPath","routePath","part","ignoreSetActiveRoute","pathForMatching","URLParts","getUrlParts","hash","addActiveRoute","View","component","mountView","getActiveRoute","hydrateViews","activeRoute","viewName","mountViewScan","event","navigate","history","pushState","extension","navigateTo","skipInitial","container","isServerRendered","initialPath","setActiveRouteForCurrentPath","addEventListener","setupAutoNavigation","stop","removeEventListener","_autoNavHandler","handleAutoNavigation","oneNavElement","closest","hasAttribute","navPath","preventDefault","navigateElement","dataset","nav","linkUrl","currentUrl","host","protocol","fromEntries","URLSearchParams","containers","getCachedRoute","getCurrentRoute","getCurrentPath","getCurrentUri","getCurrentHash","getCurrentUrl","getCurrentQuery","getCurrentFragment"],"sourceRoot":""}
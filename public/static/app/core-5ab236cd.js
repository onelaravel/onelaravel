"use strict";(Object("undefined"!=typeof self?self:this).webpackChunkApp=Object("undefined"!=typeof self?self:this).webpackChunkApp||[]).push([[795],{51:(e,t,r)=>{r.d(t,{n:()=>i});var s=r(696);class i{static instance=null;static privateProperties=["__key","__isSupport","__data","__listeners","__eventQueue","__isUpdating","instance","set","get","remove","clear","getAll","has","getAllKeys","size","isEmpty","getInfo","debug","export","import","backup","restore","getStorageUsage","isStorageFull","setKey","getKey","support","__loadData","__updateData","emit","on","off","removeAllListeners","getEvents","getListenerCount","getTTLInfo","cleanExpired","enableEncryption","__generateEncryptionKey","__encrypt","__decrypt","__isExpired","__cleanExpiredData","__createDynamicProperty","__removeDynamicProperty"];dynamicProperties=[];constructor(e="onejs_storage"){this.__key=e||"onejs_storage",this.__isSupport="undefined"!=typeof Storage,this.__data={},this.__listeners=new Map,this.__eventQueue=[],this.__isUpdating=!1,this.encryptionKey=null,this.useEncryption=!1,this.__isSupport&&this.__loadData()}static getInstance(e){return i.instance||(i.instance=new i(e)),i.instance}setKey(e){if("string"!=typeof e||!e.trim())throw new Error("Storage key must be a non-empty string");return this.__key=e,this.__loadData(),this}getKey(){return this.__key}support(){return this.__isSupport}enableEncryption(e=!0,t=null){this.useEncryption=e,this.encryptionKey=e&&!t?this.__generateEncryptionKey():e&&t?t:null,s.Ay.log("ðŸ”§ StorageService: Encryption "+(e?"enabled":"disabled"))}set(e,t,r=null){if(!this.__isSupport)return!1;if(null==e)throw new Error("Key cannot be null or undefined");if("object"==typeof e&&null!==e){let t=!0;return Object.keys(e).forEach(s=>{const i=e[s];this.set(s,i,r)||(t=!1)}),t}if("string"!=typeof e&&"number"!=typeof e)throw new Error("Key must be a string when setting single value");if(r&&("number"!=typeof r||r<=0))throw new Error("TTL must be a positive number or null");const i=this.__data[e],n={value:t,timestamp:Date.now()};null!==r&&(n.ttl=1e3*r),this.__data[e]=n;try{return this.__updateData(),s.Ay.log(`ðŸ’¾ StorageService: Set ${e}:`,t,r?`(TTL: ${r}ms)`:"(no TTL)"),this.__createDynamicProperty(e,r),this.emit(`set:${e}`,{key:e,value:t,oldValue:i,ttl:r}),this.emit("set",{key:e,value:t,oldValue:i,ttl:r}),!0}catch(t){throw this.__data[e]=i,t}}get(e,t=null){if(!this.__isSupport)return t;if("string"!=typeof e)throw new Error("Key must be a string");if(void 0===this.__data[e])return t;const r=this.__data[e];return r&&"object"==typeof r&&"value"in r?this.__isExpired(r)?(s.Ay.log(`â° StorageService: Key ${e} has expired, removing...`),this.remove(e),t):(s.Ay.log(`ðŸ“– StorageService: Retrieved ${e}:`,r.value),r.value):(s.Ay.log(`ðŸ“– StorageService: Retrieved ${e}:`,r),r)}remove(e){if(!this.__isSupport)return!1;if("string"!=typeof e)throw new Error("Key must be a string");if(0===Object.keys(this.__data).length||void 0===this.__data[e])return!1;const t=this.__data[e];delete this.__data[e];try{return this.__updateData(),s.Ay.log("ðŸ—‘ï¸ StorageService: Removed",e),this.emit("remove",{key:e,oldValue:t}),this.emit(`remove:${e}`,{key:e,oldValue:t}),this.__removeDynamicProperty(e),!0}catch(r){throw this.__data[e]=t,r}}clear(){const e={...this.__data};if(this.__data={},this.dynamicProperties){for(const e of this.dynamicProperties)this.__removeDynamicProperty(e);this.dynamicProperties=[]}try{this.__updateData(),s.Ay.log("ðŸ§¹ StorageService: Cleared all data"),this.emit("clear",{oldData:e})}catch(t){throw this.__data=e,t}}getAll(){this.__cleanExpiredData();const e={};for(const[t,r]of Object.entries(this.__data))e[t]=r&&"object"==typeof r&&"value"in r?r.value:r;return e}has(e){if("string"!=typeof e)throw new Error("Key must be a string");if(void 0===this.__data[e])return!1;const t=this.__data[e];return!t||"object"!=typeof t||!("value"in t)||!this.__isExpired(t)}getAllKeys(){return this.__cleanExpiredData(),Object.keys(this.__data)}size(){return this.__cleanExpiredData(),Object.keys(this.__data).length}isEmpty(){return 0===this.size()}getInfo(){const e=this.__cleanExpiredData();return{key:this.__key,isSupport:this.__isSupport,size:this.size(),keys:this.getAllKeys(),isEmpty:this.isEmpty(),events:this.getEvents(),totalListeners:Array.from(this.__listeners.values()).reduce((e,t)=>e+t.length,0),isUpdating:this.__isUpdating,useEncryption:this.useEncryption,hasEncryptionKey:!!this.encryptionKey,expiredRemoved:e,dynamicProperties:this.dynamicProperties?this.dynamicProperties.length:0}}debug(){s.Ay.log("ðŸ” StorageService Debug:",this.getInfo()),s.Ay.log("ðŸ“‹ TTL Information:");for(const[e,t]of Object.entries(this.__data))if(t&&"object"==typeof t&&"value"in t){const r=this.__isExpired(t),i=(t.ttl,t.ttl?Math.max(0,t.timestamp+t.ttl-Date.now()):null);s.Ay.log(`  ${e}: ${r?"EXPIRED":"VALID"}${t.ttl?` (TTL: ${t.ttl}ms, Remaining: ${i}ms)`:" (no TTL)"}`)}else s.Ay.log(`  ${e}: LEGACY (no TTL)`);s.Ay.log("ðŸ”§ Dynamic Properties:",this.dynamicProperties||[])}getTTLInfo(e){if("string"!=typeof e)throw new Error("Key must be a string");if(void 0===this.__data[e])return null;const t=this.__data[e];if(t&&"object"==typeof t&&"value"in t){const e=this.__isExpired(t),r=t.ttl?Math.max(0,t.timestamp+t.ttl-Date.now()):null;return{hasTTL:!!t.ttl,ttl:t.ttl,timestamp:t.timestamp,isExpired:e,remaining:r,expiryTime:t.ttl?t.timestamp+t.ttl:null}}return null}cleanExpired(){return this.__cleanExpiredData()}export(){return JSON.stringify(this.getAll(),null,2)}import(e){if("string"!=typeof e)throw new Error("JSON string must be a string");try{const t=JSON.parse(e),r={...this.__data};this.__data={};for(const[e,r]of Object.entries(t))this.__data[e]={value:r,timestamp:Date.now()};return this.__updateData(),s.Ay.log("ðŸ“¥ StorageService: Imported data successfully"),this.emit("import",{oldData:r,newData:t}),!0}catch(e){return s.Ay.error("âŒ StorageService: Failed to import data:",e),!1}}backup(){return{timestamp:Date.now(),key:this.__key,data:{...this.__data}}}restore(e){if(!e||"object"!=typeof e)throw new Error("Backup must be a valid object");if(!e.data)return s.Ay.error("âŒ StorageService: Invalid backup data"),!1;const t={...this.__data};this.__data={...e.data};try{return this.__updateData(),s.Ay.log("ðŸ“¤ StorageService: Restored from backup:",e.timestamp),this.emit("restore",{oldData:t,newData:e.data,backup:e}),!0}catch(e){throw this.__data=t,e}}getStorageUsage(){if(!this.__isSupport)return 0;try{const e=localStorage.getItem(this.__key);return e?new Blob([e]).size:0}catch(e){return s.Ay.error("âŒ StorageService: Failed to get storage usage:",e),0}}isStorageFull(){try{const e="__storage_test__",t="x".repeat(1024);return localStorage.setItem(e,t),localStorage.removeItem(e),!1}catch(e){return!0}}on(e,t){if("string"!=typeof e||!e.trim())throw new Error("Event name must be a non-empty string");if("function"!=typeof t)throw new Error("Callback must be a function");return this.__listeners.has(e)||this.__listeners.set(e,[]),this.__listeners.get(e).push(t),s.Ay.log(`ðŸŽ§ StorageService: Added listener for event: ${e}`),()=>this.off(e,t)}off(e,t){if(!this.__listeners.has(e))return;const r=this.__listeners.get(e),i=r.indexOf(t);i>-1&&(r.splice(i,1),s.Ay.log(`ðŸŽ§ StorageService: Removed listener for event: ${e}`))}removeAllListeners(e){e?(this.__listeners.delete(e),s.Ay.log(`ðŸŽ§ StorageService: Removed all listeners for event: ${e}`)):(this.__listeners.clear(),s.Ay.log("ðŸŽ§ StorageService: Removed all listeners"))}getEvents(){return Array.from(this.__listeners.keys())}getListenerCount(e){return this.__listeners.has(e)?this.__listeners.get(e).length:0}__generateEncryptionKey(){const e=new Uint8Array(32);return crypto.getRandomValues(e),Array.from(e,e=>e.toString(16).padStart(2,"0")).join("")}__encrypt(e){if(!this.useEncryption||!this.encryptionKey)return e;try{let t="";for(let r=0;r<e.length;r++){const s=e.charCodeAt(r)^this.encryptionKey.charCodeAt(r%this.encryptionKey.length);t+=String.fromCharCode(s)}return btoa(t)}catch(t){return console.error("âŒ StorageService: Encryption failed:",t),e}}__decrypt(e){if(!this.useEncryption||!this.encryptionKey)return e;try{const t=atob(e);let r="";for(let e=0;e<t.length;e++){const s=t.charCodeAt(e)^this.encryptionKey.charCodeAt(e%this.encryptionKey.length);r+=String.fromCharCode(s)}return r}catch(t){return console.error("âŒ StorageService: Decryption failed:",t),e}}__isExpired(e){return!!(e&&e.timestamp&&e.ttl)&&Date.now()>e.timestamp+e.ttl}__cleanExpiredData(){let e=0;const t=[];for(const[e,r]of Object.entries(this.__data))this.__isExpired(r)&&t.push(e);for(const r of t)delete this.__data[r],e++,s.Ay.log(`ðŸ—‘ï¸ StorageService: Removed expired key: ${r}`);return e>0&&this.__updateData(),e}__loadData(){if(this.__isSupport)try{const e=localStorage.getItem(this.__key);if(e){const t=this.__decrypt(e);this.__data=JSON.parse(t),this.__cleanExpiredData()}}catch(e){console.error("âŒ StorageService: Failed to load data:",e),this.__data={}}}__updateData(){if(this.__isSupport&&!this.__isUpdating){this.__isUpdating=!0;try{const e=JSON.stringify(this.__data),t=this.__encrypt(e);localStorage.setItem(this.__key,t),s.Ay.log("ðŸ’¾ StorageService: Updated data for key:",this.__key)}catch(e){throw s.Ay.error("âŒ StorageService: Failed to update data:",e),e}finally{this.__isUpdating=!1}}}emit(e,t){this.__listeners.has(e)&&this.__listeners.get(e).forEach(r=>{try{r(t)}catch(t){console.error(`âŒ StorageService: Error in event listener for ${e}:`,t)}})}__createDynamicProperty(e,t){try{i.privateProperties.includes(e)||this.dynamicProperties.includes(e)||(this.dynamicProperties.push(e),Object.defineProperty(this,e,{set:r=>this.set(e,r,t),get:()=>this.get(e),configurable:!0}))}catch(e){s.Ay.error("âŒ StorageService: Failed to create dynamic property:",e)}}__removeDynamicProperty(e){try{this.dynamicProperties&&this.dynamicProperties.includes(e)&&(delete this[e],this.dynamicProperties=this.dynamicProperties.filter(t=>t!==e))}catch(e){s.Ay.error("âŒ StorageService: Failed to remove dynamic property:",e)}}}i.getInstance("onejs_storage")},696:(e,t,r)=>{r.d(t,{Ay:()=>s});const s=new class{constructor(e){this.config={level:"info",enabled:!1,console:!0,remote:!1},e&&this.setConfig(e),this.logs=[]}setConfig(e){this.config={...this.config,...e}}getConfig(){return this.config}consoleLog(e,...t){if(this.logs.push(...t),this.config.console&&this.config.enabled)return console[e].apply(console,t)}log(...e){return this.consoleLog("log",...e)}warn(...e){return this.consoleLog("warn",...e)}error(...e){return this.consoleLog("error",...e)}info(...e){return this.consoleLog("info",...e)}debug(...e){return this.consoleLog("debug",...e)}}({level:"info",enabled:!0,console:!0,remote:!1})},728:(e,t,r)=>{r.d(t,{W:()=>s});class s{constructor(e=document.body){this.rootElement=e,this.cachedComments=null}setRootElement(e){return this.rootElement=e,this.cachedComments=null,this}getAllComments(e=!0){if(e&&this.cachedComments)return this.cachedComments;const t=[],r=document.createTreeWalker(this.rootElement,NodeFilter.SHOW_COMMENT,null,!1);let s;for(;s=r.nextNode();)t.push(s);return e&&(this.cachedComments=t),t}parseComment(e){const t=e.nodeValue.trim(),r=t.match(/^\[([^\/\]]+?)(?:\s+(.+))?\]$/);if(r){const t=r[1],s={};if(r[2]){const e=r[2].match(/(\w+)="([^"]+)"/g);e&&e.forEach(e=>{const[t,r]=e.split("=");s[t]=r.replace(/"/g,"")})}return{type:"open",fullName:t,attributes:s,node:e}}const s=t.match(/^\[\/([^\/\]]+?)\]$/);return s?{type:"close",fullName:s[1],node:e}:null}getNodesBetween(e,t){if(e.parentNode!==t.parentNode)return null;const r=[];let s=e.nextSibling;for(;s&&s!==t;)r.push(s),s=s.nextSibling;return r}patternToRegex(e){if(!e||"*"===e||"*:*"===e)return/.*/;let t=e.replace(/[.+?^${}()|[\]\\]/g,"\\$&").replace(/\*/g,".*");return t="^"+t+"$",new RegExp(t)}matchPattern(e,t){return this.patternToRegex(t).test(e)}find(e="*:*",t={}){const{useCache:r=!0}=t,s=this.getAllComments(r).map(e=>this.parseComment(e)).filter(e=>null!==e),i=[],n=[];for(let t=0;t<s.length;t++){const r=s[t];if(this.matchPattern(r.fullName,e))if("open"===r.type)n.push({...r,index:t});else if("close"===r.type){let e=-1;for(let t=n.length-1;t>=0;t--)if(n[t].fullName===r.fullName){e=t;break}if(-1!==e){const t=n[e],s=this.getNodesBetween(t.node,r.node);null!==s&&i.push({fullName:r.fullName,openTag:t.node,closeTag:r.node,attributes:t.attributes,nodes:s,parent:t.node.parentNode}),n.splice(e,1)}}}return i}findOne(e){const t=this.find(e);return t.length>0?t[0]:null}filter(e,t="*:*"){return this.find(t).filter(e)}count(e="*:*"){return this.find(e).length}getUniqueNames(e="*:*"){const t=this.find(e);return[...new Set(t.map(e=>e.fullName))]}display(e,t={}){const{showAttributes:r=!0,showParent:s=!0,showNodes:i=!0,maxNodePreview:n=3}=t;let o,a="";"string"==typeof e?(a=` vá»›i pattern "${e}"`,o=this.find(e)):o=e,console.log(`\n${"=".repeat(80)}`),console.log(`TÃ¬m tháº¥y ${o.length} cáº·p tags${a}`),console.log(`${"=".repeat(80)}\n`),0!==o.length?(o.forEach((e,t)=>{console.log(`\nðŸ“¦ Cáº·p ${t+1}: [${e.fullName}]`),console.log("-".repeat(60)),r&&console.log("ðŸ“‹ Attributes:",Object.keys(e.attributes).length>0?e.attributes:"(khÃ´ng cÃ³)"),s&&console.log("ðŸ”¼ Parent:",e.parent.tagName.toLowerCase(),e.parent.className?`class="${e.parent.className}"`:""),i&&(console.log(`ðŸ“„ Ná»™i dung (${e.nodes.length} nodes):`),e.nodes.slice(0,n).forEach(e=>{if(e.nodeType===Node.ELEMENT_NODE){const t=e.className?` class="${e.className}"`:"";console.log(`   â”œâ”€ <${e.tagName.toLowerCase()}${t}>`)}else if(e.nodeType===Node.TEXT_NODE&&e.nodeValue.trim()){const t=e.nodeValue.trim().substring(0,50);console.log(`   â”œâ”€ Text: "${t}${t.length>=50?"...":""}"`)}}),e.nodes.length>n&&console.log(`   â””â”€ ... vÃ  ${e.nodes.length-n} nodes khÃ¡c`))}),console.log(`\n${"=".repeat(80)}\n`)):console.log("âŒ KhÃ´ng tÃ¬m tháº¥y cáº·p tags nÃ o!")}clearCache(){return this.cachedComments=null,this}}},852:(e,t,r)=>{r.d(t,{k:()=>s});class s{constructor(){this.baseUrl="",this.timeout=1e4,this.defaultHeaders={}}setBaseUrl(e){this.baseUrl=e}setTimeout(e){this.timeout=e}setDefaultHeaders(e){this.defaultHeaders={...this.defaultHeaders,...e}}setHeader(e,t){this.defaultHeaders[e]=t}async request(e,t,r=null,s={}){const i=t.startsWith("http")?t:this.baseUrl+t,n={method:e.toUpperCase(),headers:{...this.defaultHeaders,...s.headers},...s};!r||"POST"!==e.toUpperCase()&&"PUT"!==e.toUpperCase()&&"PATCH"!==e.toUpperCase()||("application/json"===n.headers["Content-Type"]?n.body=JSON.stringify(r):n.body=r);try{const e=new AbortController,t=setTimeout(()=>e.abort(),this.timeout),r=await fetch(i,{...n,signal:e.signal});clearTimeout(t);const s=await r.json().catch(()=>({}));return{status:r.ok,statusCode:r.status,data:s,headers:r.headers}}catch(e){if("AbortError"===e.name)throw new Error("Request timeout");throw e}}async get(e,t={}){return this.request("GET",e,null,t)}async post(e,t=null,r={}){return this.request("POST",e,t,r)}async put(e,t=null,r={}){return this.request("PUT",e,t,r)}async patch(e,t=null,r={}){return this.request("PATCH",e,t,r)}async delete(e,t={}){return this.request("DELETE",e,null,t)}}}}]);
//# sourceMappingURL=core-5ab236cd.js.map
{"version":3,"file":"core-1c191ae7.js","mappings":"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","sources":["webpack://App/./resources/js/app/core/ViewTemplate.js","webpack://App/./resources/js/app/core/ViewState.js","webpack://App/./resources/js/app/core/ViewEngine.js","webpack://App/./resources/js/app/core/ViewConfig.js","webpack://App/./resources/js/app/core/SEOConfig.js"],"sourcesContent":["// Auto-generated ViewTemplate.js\n// This file imports all view functions and assigns them to templates\n\nimport { ComponentsTset } from './../views/ComponentsTset.js';\nimport { WebDocs } from './../views/WebDocs.js';\nimport { WebAbout } from './../views/WebAbout.js';\nimport { WebHome } from './../views/WebHome.js';\nimport { WebExamples } from './../views/WebExamples.js';\nimport { WebContact } from './../views/WebContact.js';\nimport { LayoutsTestLayout } from './../views/LayoutsTestLayout.js';\nimport { LayoutsBaseBackup } from './../views/LayoutsBaseBackup.js';\nimport { LayoutsBase } from './../views/LayoutsBase.js';\nimport { LayoutsBaseWithViewId } from './../views/LayoutsBaseWithViewId.js';\nimport { LayoutsAdmin } from './../views/LayoutsAdmin.js';\nimport { LayoutsBaseOld } from './../views/LayoutsBaseOld.js';\nimport { PartialsTestPartial } from './../views/PartialsTestPartial.js';\nimport { PartialsAssetsScripts } from './../views/PartialsAssetsScripts.js';\nimport { PartialsFooter } from './../views/PartialsFooter.js';\nimport { PartialsDataExample } from './../views/PartialsDataExample.js';\n\nexport const ViewTemplates = {\n    'components.tset': ComponentsTset,\n    'web.docs': WebDocs,\n    'web.about': WebAbout,\n    'web.home': WebHome,\n    'web.examples': WebExamples,\n    'web.contact': WebContact,\n    'layouts.test-layout': LayoutsTestLayout,\n    'layouts.base-backup': LayoutsBaseBackup,\n    'layouts.base': LayoutsBase,\n    'layouts.base-with-view-id': LayoutsBaseWithViewId,\n    'layouts.admin': LayoutsAdmin,\n    'layouts.base-old': LayoutsBaseOld,\n    'partials.test-partial': PartialsTestPartial,\n    'partials.assets-scripts': PartialsAssetsScripts,\n    'partials.footer': PartialsFooter,\n    'partials.data-example': PartialsDataExample,\n};\n","import logger from \"./services/LoggerService.js\";\n\nexport class ViewState {\n    constructor(view) {\n        // Private properties using naming convention for browser compatibility\n        this._viewRef = view;\n        /**\n         * @type {Array<[any, function, string]>}\n         */\n        this._states = [];\n        this._stateIndex = 0;\n        this._canUpdateStateByKey = true;\n        /**\n         * @type {Map<string, Array<Function>>}\n         */\n        this.__listeners = new Map();\n\n        /**\n         * @type {Array<string>}\n         */\n        this.__ownProperties = ['_states', '_stateIndex', '_canUpdateStateByKey', '_viewRef', '__listeners', '__ownProperties', '__ownMethods', '__setters__'];\n        /**\n         * @type {Array<string>}\n         */\n        this.__ownMethods = ['__commitStateChange', '__setState', '__useState', '__updateStateByKey', '__register', '__lockUpdateRealState', '__subscribe', '__toJSON', 'toJSON', 'toString'];\n\n        this.__setters__ = {};\n\n        Object.defineProperty(this, 'on', {\n            value: (key, callback) => this.__subscribe(key, callback),\n            writable: true,\n            configurable: true,\n            enumerable: false,\n        });\n        Object.defineProperty(this, 'off', {\n            value: (key, callback) => this.__unsubscribe(key, callback),\n            writable: true,\n            configurable: true,\n            enumerable: false,\n        });\n    }\n    // Define public methods using Object.defineProperties for backward compatibility\n\n    // Private methods using naming convention\n    __commitStateChange(index, oldValue, stateKey = null) {\n        // Implementation placeholder\n        let key = stateKey ? stateKey : (this._states[index] ? this._states[index][2] : index);\n        const listeners = this.__listeners.get(key);\n        if (listeners) {\n            listeners.forEach(callback => callback(this._states[index][0], oldValue));\n        }\n        if(this._viewRef){\n\n        }\n\n    }\n\n    /**\n     * set state nội bộ\n     * @param {number} index index\n     * @param {*} value giá trị \n     * @param {function} setValue hàm set giá trị\n     * @param {string} key key của state\n     * @returns {[*, function, string]}\n     */\n    __setState(index, value, setValue = () => { }, key = null) {\n        this._states[index] = [value, setValue, key??index];\n        return [value, setValue, key??index];\n    }\n\n    /**\n     * tương tự useState\n     * @param {*} value giá trị của state\n     * @param {string} key key của state (không bắt buộc)\n     * @returns {Array<[*, function, string]>}\n     */\n    __useState(value, key = null) {\n        const index = this._stateIndex++;\n        const stateKey = key ?? index;\n        const setValue = (value) => {\n            const oldValue = this._states[index][0];\n            this._states[index][0] = value;\n            this.__commitStateChange(index, oldValue, stateKey);\n        };\n        this.__setState(index, value, setValue, stateKey);\n        \n        if (!this.__ownProperties.includes(stateKey) && !this.__ownMethods.includes(stateKey)) {\n\n            Object.defineProperty(this, stateKey, {\n                get: () => {\n                    return this._states[index][0];\n                },\n                set: (value) => {\n                    logger.log(\"Bạn không thể thiết lập giá trị cho \" + stateKey + \" theo cách này\");\n                },\n                configurable: false,\n                enumerable: true,\n            });\n\n        }\n        return [value, setValue, stateKey];\n    }\n\n    /**\n     * cập nhật state value theo key\n     * @param {string} key key của state\n     * @param {*} value giá trị\n     * @returns {*}\n     */\n    __updateStateByKey(key, value) {\n        const index = this._states.findIndex(state => state[2] === key);\n        logger.log(`Updating state by key: ${key} at index: ${index} with value:`, value);\n        if (index !== -1) {\n            if (!this._canUpdateStateByKey) {\n                logger.log(`State updates are locked for key: ${key}`);\n                return this._states[index][0];\n            }\n\n            const oldValue = this._states[index][0];\n            this._states[index][0] = value;\n            this.__commitStateChange(index, oldValue, key);\n        } else {\n            logger.warn(`State key not found: ${key}`);\n        }\n        return value;\n    }\n\n    /**\n     * đăng ký key - value cho state - trả về hàm setValue cho key tương ứng\n     * @param {string} key key của state\n     * @param {*} value giá trị\n     * @returns {function}\n     */\n    __register(key, value) {\n        return this.__useState(value, key)[1];\n    }\n\n    __lockUpdateRealState() {\n        this._canUpdateStateByKey = false;\n    }\n\n    __subscribe(key, callback) {\n        if (typeof key !== 'string' || this.__ownProperties.includes(key) || this.__ownMethods.includes(key)) {\n            return false\n        }\n        if (callback && typeof callback !== 'function') {\n            throw new Error('Callback must be a function');\n        }\n        if (!this.__listeners.has(key)) {\n            this.__listeners.set(key, []);\n        }\n        this.__listeners.get(key).push(callback);\n        let index = this.__listeners.get(key).length - 1;\n        return () => {\n            this.__listeners.get(key).splice(index, 1);\n            if (this.__listeners.get(key).length === 0) {\n                this.__listeners.delete(key);\n            }\n        };\n    }\n\n    __unsubscribe(key, callback = null) {\n        if (typeof key !== 'string' || this.__ownProperties.includes(key) || this.__ownMethods.includes(key)) {\n            return;\n        }\n        if (callback && typeof callback !== 'function') {\n            return;\n        }\n        if (callback) {\n            let index = this.__listeners.get(key).indexOf(callback);\n            if (index !== -1) {\n                this.__listeners.get(key).splice(index, 1);\n                if (this.__listeners.get(key).length === 0) {\n                    this.__listeners.delete(key);\n                }\n            }\n        } else {\n            this.__listeners.delete(key);\n        }\n    }\n\n\n    __reset() {\n        this._stateIndex = 0;\n        this._canUpdateStateByKey = true;\n        this.__listeners.clear();\n    }\n\n\n\n\n\n\n\n    __toJSON() {\n        const data = {};\n        this._states.forEach((state, index) => {\n            const key = state[2]; // state[2] is the key\n            data[key] = state[0]; // state[0] is the value\n        });\n        return data;\n    }\n\n    // Public methods\n    toJSON() {\n        return this.__toJSON();\n    }\n\n    toString() {\n        return JSON.stringify(this.__toJSON());\n    }\n\n\n\n\n}\n\n","/**\n * View Engine class for managing view instances\n * @param {Object} config - View configuration\n */\nimport { __defineGetters, __defineMethods, __defineProperties, __defineProps, deleteProp, hasData, uniqId } from '../helpers/utils.js';\nimport { FollowingBlock } from './FollowingBlock.js';\nimport OneMarkup from './OneMarkup.js';\nimport { ViewState } from './ViewState.js';\nimport logger from './services/LoggerService.js';\nimport { ATTR, FORBIDDEN_KEYS } from './ViewConfig.js';\n\nexport class ViewEngine {\n    constructor(path, config) {\n\n        // Private properties using naming convention for browser compatibility\n        /**\n         * @type {Application}\n         */\n        this.App = null;\n        /**\n         * @type {boolean}\n         */\n        this.isSuperView = false;\n        /**\n         * @type {function}\n         */\n        this._emptyFn = () => { };\n        /**\n         * @type {string}\n         */\n        this.id = null;\n        /**\n         * @type {function}\n         */\n        this.init = this._emptyFn;\n        /**\n         * @type {ViewEngine}\n         */\n        this.parent = null;\n        /**\n         * @type {Array<ViewEngine>}\n         */\n        this.children = [];\n        /**\n         * @type {ViewEngine}\n         */\n        this.superView = null;\n        /**\n         * @type {string}\n         */\n        this.superViewPath = null;\n        /**\n         * @type {string}\n         */\n        this.superViewId = null;\n        /**\n         * @type {boolean}\n         */\n        this.hasSuperView = false;\n\n        /**\n         * @type {string}\n         */\n        this.originalViewPath = null;\n        /**\n         * @type {string}\n         */\n        this.originalViewId = null;\n        /**\n         * @type {ViewEngine}\n         */\n        this.originalView = null;\n        /**\n         * @type {boolean}\n         */\n        this.hasAwaitData = false;\n        /**\n         * @type {boolean}\n         */\n        this.hasFetchData = false;\n        /**\n         * @type {Object}\n         */\n        this.fetch = {};\n        /**\n         * @type {boolean}\n         */\n        this.usesVars = false;\n        /**\n         * @type {boolean}\n         */\n        this.hasSections = false;\n        /**\n         * @type {Array<string>}\n         */\n        this.renderLongSections = [];\n        /**\n         * @type {boolean}\n         */\n        this.hasSectionPreload = false;\n        /**\n         * @type {boolean}\n         */\n        this.hasPrerender = false;\n        /**\n         * @type {Object}\n         */\n        this.sections = {};\n        /**\n         * @type {function}\n         */\n        this.addCSS = this._emptyFn;\n        this.removeCSS = this._emptyFn;\n        /**\n         * @type {Array<string>}\n         */\n        this.resources = [];\n        this.userDefined = {};\n        /**\n         * @type {Object}\n         */\n        this.events = {};\n        this.eventIndex = 0;\n        /**\n         * @type {Object}\n         */\n        this.eventHandlers = {};\n        /**\n         * @type {Object}\n         */\n        this.data = {};\n        /**\n         * @type {ViewState}\n         */\n        this.states = {};\n        this.urlPath = '';\n        /**\n         * @type {boolean}\n         */\n        this.isInitlized = false;\n\n        /**\n         * @type {Object}\n         */\n        this.wrapperConfig = { enable: false, tag: null, follow: true, attributes: {}, ...(typeof config?.wrapperConfig === 'object' ? config.wrapperConfig : {}) };\n\n        /**\n         * @type {TemplateEngine}\n         */\n        this.templateEngine = null;\n\n        // Initialize\n        this.path = path;\n        this.config = config || {};\n\n\n\n        this.wrapTag = null;\n\n\n        /**\n         * @type {Map<string, FollowingBlock>}\n         */\n        this.followingBlocks = new Map();\n\n        this.followingConfig = [];\n        this.followingIndex = 0;\n        this.followingScanIndex = 0;\n        this.followingIDs = [];\n        this.followingPrerenderIDs = [];\n        this.followingRenderIDs = [];\n\n\n        this.subscribeStates = true;\n\n        this.childrenConfig = [];\n        this.childrenIndex = 0;\n        this.refreshChildrenIndex = 0;\n\n        /**\n         * @type {boolean}\n         */\n        this.isRendering = false;\n        /**\n         * @type {boolean}\n         */\n        this.isRendered = false;\n\n        this.isMounted = false;\n        this.isDestroyed = false; // Flag to prevent processing after destroy\n        this.isScanning = false;\n        this.isScanned = false;\n\n\n        this.isReady = false;\n\n        /**\n         * @type {OneMarkupModel}\n         */\n        this.markup = null;\n        /**\n         * @type {Array<OneMarkupModel>}\n         */\n        this.refElements = [];\n\n\n        this.eventListenerStatus = false;\n\n        this.eventListeners = [];\n\n        this.eventQuickHandles = [];\n\n        this.isVirtualRendering = false;\n        this.cachedSections = {};\n        this.renderedContent = null;\n\n        /**\n         * @type {Object<{name: string, id: string, index: number, view: ViewEngine, data: Object, subscribe: Array<string>}>}\n         */\n        this.__scope = null;\n        this.isRefreshing = false;\n\n        this.changeStateQueueCount = 0;\n        this.changedStateKeys = new Set(); // Use Set to avoid duplicates\n        this._stateChangePending = false; // Flag to track if processing is scheduled\n\n        /**\n         * @type {LoopContext}\n         */\n        this.loopContext = null;\n\n        this.isCommitedConstructorData = false;\n\n\n    }\n\n\n    /**\n     * Setup the view engine with configuration\n     * @param {string} path - View path\n     * @param {Object} config - View configuration\n     */\n    setup(path, config) {\n        if (this.isInitlized) {\n            return this;\n        }\n\n        // Set config and path\n        this.path = path;\n        this.config = config || {};\n\n        // Call _initialize to do the actual setup\n        this.initialize();\n        return this;\n    }\n\n\n    /**\n     * Initialize the view engine with configuration\n     * @private\n     */\n    initialize() {\n        if (this.isInitlized) {\n            return;\n        }\n\n        this.isInitlized = true;\n        const config = this.config;\n\n        // Set basic properties (giữ nguyên tên từ code gốc)\n        this.id = config.viewId || uniqId();\n        deleteProp(config, 'viewId');\n        this.init = config.init || this._emptyFn;\n        deleteProp(config, 'init');\n        this.addCSS = config.addCSS || this._emptyFn;\n        deleteProp(config, 'addCSS');\n        this.removeCSS = config.removeCSS || this._emptyFn;\n        deleteProp(config, 'removeCSS');\n        this.states = config.states || new ViewState(this);\n        deleteProp(config, 'states');\n        this.superViewPath = config.superViewPath || config.superView;\n        deleteProp(config, 'superViewPath');\n        deleteProp(config, 'superView');\n        this.hasSuperView = config.hasSuperView;\n        deleteProp(config, 'hasSuperView');\n        this.hasAwaitData = config.hasAwaitData;\n        deleteProp(config, 'hasAwaitData');\n        this.hasFetchData = config.hasFetchData;\n        deleteProp(config, 'hasFetchData');\n        this.fetch = config.fetch;\n        deleteProp(config, 'fetch');\n        this.usesVars = config.usesVars;\n        deleteProp(config, 'usesVars');\n        this.hasSections = config.hasSections;\n        deleteProp(config, 'hasSections');\n        this.hasSectionPreload = config.hasSectionPreload;\n        deleteProp(config, 'hasSectionPreload');\n        this.renderLongSections = config.renderLongSections || [];\n        deleteProp(config, 'renderLongSections');\n        this.hasPrerender = config.hasPrerender;\n        deleteProp(config, 'hasPrerender');\n        this.sections = config.sections;\n        deleteProp(config, 'sections');\n        this.wrapperConfig = { ...this.wrapperConfig, ...(typeof config.wrapperConfig === 'object' ? config.wrapperConfig : {}) };\n        deleteProp(config, 'wrapperConfig');\n        this.resources = config.resources;\n        deleteProp(config, 'resources');\n        this.userDefined = config.userDefined;\n        deleteProp(config, 'userDefined');\n        // Initialize arrays and objects\n        this.master = null;\n        this.children = [];\n        this.events = {};\n        this.eventHandlers = {};\n\n        // Process defined properties and methods (giữ nguyên logic từ code gốc)\n        this.processDefinedProperties(config);\n\n        if (config && config.data && typeof config.data === 'object' && config.data.__SSR_VIEW_ID__) {\n            config.data.__SSR_VIEW_ID__ = null;\n            deleteProp(config.data, '__SSR_VIEW_ID__');\n        }\n\n        // Merge data\n        this.data = { ...(this.data || {}), ...(config.data || {}) };\n        this.commitConstructorData();\n    }\n\n    /**\n     * Process defined properties and methods from config\n     * @private\n     */\n    processDefinedProperties(config) {\n        let definedProps = {};\n        let definedMethods = {};\n\n        if (config.__props__ && config.__props__.length > 0) {\n            config.__props__.forEach(prop => {\n                if (typeof config[prop] === 'function') {\n                    definedMethods[prop] = config[prop].bind(this);\n                }\n                else if (typeof config[prop] !== 'undefined') {\n                    definedProps[prop] = config[prop];\n                }\n            });\n        }\n        /**\n         * lifecycle methods\n         * beforeCreate hàm dược gọi trước khi view được tạo\n         * created hàm dược gọi sau khi view được tạo\n         * beforeMount hàm dược gọi trước khi view được mount\n         * mounted hàm dược gọi sau khi view được mount\n         * beforeUpdate hàm dược gọi trước khi view được update\n         * updated hàm dược gọi sau khi view được update\n         * beforeUnmount hàm dược gọi trước khi view được unmount\n         * unmounted hàm dược gọi sau khi view được unmount\n         */\n        if (this.userDefined) {\n            Object.entries(this.userDefined).forEach(([key, value]) => {\n                if (FORBIDDEN_KEYS.includes(key)) {\n                    return;\n                }\n                if (typeof value === 'function') {\n                    definedMethods[key] = value.bind(this);\n                }\n                else {\n                    definedProps[key] = value;\n                }\n            });\n        }\n\n        __defineProps(this, definedProps, {\n            writable: true,\n            configurable: true,\n            enumerable: true,\n        });\n\n        __defineMethods(this, definedMethods);\n    }\n\n\n\n    setScope(scope) {\n        this.__scope = scope;\n    }\n\n    loadServerData(_serverData = {}) {\n        const [data, events] = _serverData;\n        const result = typeof this.config.loadServerData === 'function' ? this.config.loadServerData.apply(this, [{ ...this.App.View.data, ...this.data, ..._data }]) : this.config.loadServerData;\n        if (typeof result === 'object' && result.constructor === this.constructor) {\n            return result;\n        }\n        return result;\n    }\n\n    commitConstructorData() {\n        if (this.isCommitedConstructorData) {\n            return;\n        }\n        if (hasData(this.data) && typeof this.config.updateVariableData === 'function') {\n            this.config.updateVariableData.apply(this, [{ ...this.App.View.data, ...this.data }]);\n            this.isCommitedConstructorData = true;\n        }\n        if (typeof this.config.commitConstructorData === 'function') {\n            this.config.commitConstructorData.apply(this, []);\n        }\n\n    }\n\n    /**\n     * Add event configuration for view engine\n     * @param {string} eventType - Type of event\n     * @param {Array} handlers - Array of handler objects\n     * @returns {string} Event attribute string\n     * @example\n     * <AppViewEngine>.addEventConfig('click', [{handler: 'handleClick', params: [1, 2, 3]}]);\n     */\n    addEventConfig(eventType, handlers) {\n        if (typeof eventType !== 'string' || eventType === '') {\n            return;\n        }\n        if (typeof handlers !== 'object' || handlers === null) {\n            return;\n        }\n        return this.addEventStack(eventType, handlers);\n    }\n\n\n\n    /**\n     * Render the view with data\n     * @param {Object} _data - Additional data to merge\n     * @returns {string|Object} Rendered content\n     */\n    render() {\n        let renderFollowIDStart = this.followingIDs.length;\n        this.commitConstructorData();\n        console.log(`path: ${this.path}`, this);\n        const result = this.config.render.apply(this, []);\n        this.renderedContent = result;\n        let renderFollowIDEnd = this.followingIDs.length;\n        if (renderFollowIDEnd >= renderFollowIDStart) {\n            this.followingRenderIDs.push(...this.followingIDs.slice(renderFollowIDStart));\n        }\n\n        if (typeof result === 'string' && result.trim() !== '' && this.isHtmlString(result)) {\n            this.renderedContent = this.addXRefViewToRootElements(result);\n        }\n        return this.renderedContent;\n    }\n\n    /**\n     * Virtual render the view with data (Scan version)\n     * @param {Object} _data - Additional data to merge\n     * @returns {string|Object} Virtual rendered content\n     */\n    virtualRender() {\n        this.isScanning = true;\n        this.isVirtualRendering = true;\n        let renderFollowIDStart = this.followingIDs.length;\n        this.commitConstructorData();\n        const result = this.config.render.apply(this, []);\n        let renderFollowIDEnd = this.followingIDs.length;\n        if (renderFollowIDEnd >= renderFollowIDStart) {\n            this.followingRenderIDs.push(...this.followingIDs.slice(renderFollowIDStart));\n        }\n        this.isVirtualRendering = false;\n        this.isScanning = false;\n        return result;\n    }\n\n\n\n\n    /**\n     * Prerender the view with data\n     * @param {Object} _data - Additional data to merge\n     * @returns {string|Object} Prerendered content\n     */\n    prerender(_data = {}) {\n        let renderFollowIDStart = this.followingIDs.length;\n        this.commitConstructorData();\n        const result = this.config.prerender.apply(this, []);\n        let renderFollowIDEnd = this.followingIDs.length;\n        if (renderFollowIDEnd >= renderFollowIDStart) {\n            this.followingPrerenderIDs.push(...this.followingIDs.slice(renderFollowIDStart));\n        }\n        if (typeof result === 'string' && result.trim() !== '' && this.isHtmlString(result)) {\n            return this.addXRefViewToRootElements(result);\n        }\n        return result;\n    }\n\n    /**\n     * Virtual prerender the view with data (Scan version)\n     * @param {Object} _data - Additional data to merge\n     * @returns {string|Object} Virtual prerendered content\n     */\n    virtualPrerender(_data = {}) {\n        this.isScanning = true;\n        this.isVirtualRendering = true;\n        let renderFollowIDStart = this.followingIDs.length;\n        this.commitConstructorData();\n        const result = this.config.prerender.apply(this, []);\n        let renderFollowIDEnd = this.followingIDs.length;\n        if (renderFollowIDEnd >= renderFollowIDStart) {\n            this.followingPrerenderIDs.push(...this.followingIDs.slice(renderFollowIDStart));\n        }\n        this.isVirtualRendering = false;\n        this.isScanning = false;\n        return result;\n    }\n\n\n\n\n    /**\n     * Replace view content with new HTML\n     * @param {string} htmlString - New HTML content\n     * @returns {boolean} True if replaced successfully\n     */\n    replaceView(htmlString) {\n        if (this.isHtmlString(htmlString)) {\n            const container = document.createElement('div');\n            container.innerHTML = htmlString;\n            const frag = container.content;\n            const oldElements = document.querySelectorAll(`[x-ref-view=\"${this.id}\"]`);\n            const elemtntCount = oldElements.length;\n            for (let i = elemtntCount - 1; i > 0; i--) {\n                const oldElement = oldElements[i];\n                const newElement = frag.childNodes[i];\n                oldElement.parentNode.replaceChild(newElement, oldElement);\n            }\n            const oldElement = oldElements[0];\n            oldElement.parentNode.replaceChild(frag, oldElement);\n            return true;\n        }\n        return false;\n    }\n\n\n    /** lifecycle methods */\n\n    /**\n     * Lifecycle: Called before view is created (giữ nguyên tên từ code gốc)\n     */\n\n    beforeCreate() {\n        if (typeof this.userDefined.beforeCreate === 'function') {\n            this.userDefined.beforeCreate.call(this);\n        }\n    }\n    /**\n     * Lifecycle: Called after view is created (giữ nguyên tên từ code gốc)\n     */\n    created() {\n        if (typeof this.userDefined.created === 'function') {\n            this.userDefined.created.call(this);\n        }\n    }\n\n    /**\n     * Lifecycle: Called before view is updated (giữ nguyên tên từ code gốc)\n     */\n    beforeUpdate() {\n        if (typeof this.userDefined.beforeUpdate === 'function') {\n            this.userDefined.beforeUpdate.call(this);\n        }\n    }\n    /**\n     * Lifecycle: Called after view is updated (giữ nguyên tên từ code gốc)\n     */\n    updated() {\n        if (typeof this.userDefined.updated === 'function') {\n            this.userDefined.updated.call(this);\n        }\n    }\n\n    beforeInit() {\n        if (typeof this.userDefined.beforeInit === 'function') {\n            this.userDefined.beforeInit.call(this);\n        }\n    }\n    init() {\n        if (typeof this.userDefined.init === 'function') {\n            this.userDefined.init.call(this);\n        }\n    }\n    afterInit() {\n        if (typeof this.userDefined.afterInit === 'function') {\n            this.userDefined.afterInit.call(this);\n        }\n    }\n    /**\n     * Lifecycle: Called before view is destroyed (giữ nguyên tên từ code gốc)\n     */\n    beforeDestroy() {\n        if (typeof this.userDefined.beforeDestroy === 'function') {\n            this.userDefined.beforeDestroy.call(this);\n        }\n    }\n    /**\n     * Lifecycle: Called after view is destroyed (giữ nguyên tên từ code gốc)\n     */\n    destroyed() {\n        if (typeof this.userDefined.destroyed === 'function') {\n            this.userDefined.destroyed.call(this);\n        }\n    }\n    /**\n     * Lifecycle: Called before view is mounted (giữ nguyên tên từ code gốc)\n     */\n    beforeMount() {\n        if (typeof this.userDefined.beforeMount === 'function') {\n            this.userDefined.beforeMount.call(this);\n        }\n    }\n\n\n    /**\n     * Lifecycle: Called when view is mounted (giữ nguyên tên từ code gốc)  \n     */\n    mounted() {\n        if (!this.isMounted) {\n            if (typeof this.userDefined.mounted === 'function') {\n                this.userDefined.mounted.call(this);\n            }\n\n            this.startEventListener();\n            this.isMounted = true;\n        }\n\n        if (this.originalView && this.originalView instanceof ViewEngine) {\n            this.originalView.onSuperViewMounted();\n        }\n        if (this.children && this.children.length > 0) {\n            this.children.forEach(child => {\n                if (child && child instanceof ViewEngine) {\n                    child.onParentMounted();\n                }\n            });\n        }\n        if (this.followingBlocks && this.followingBlocks.size > 0) {\n            this.followingBlocks.forEach(block => {\n                block.mounted();\n            });\n        }\n    }\n\n    /**\n     * Lifecycle: Called before view is unmounted (giữ nguyên tên từ code gốc)\n     */\n    beforeUnmount() {\n        if (typeof this.userDefined.beforeUnmounted === 'function') {\n            this.userDefined.beforeUnmounted.call(this);\n        }\n    }\n\n    /**\n     * Lifecycle: Called when view is unmounted (giữ nguyên tên từ code gốc)\n     */\n    unmounted() {\n        if (this.isMounted) {\n            if (typeof this.userDefined.unmounted === 'function') {\n                this.userDefined.unmounted.call(this);\n            }\n            this.stopEventListener();\n            this.isMounted = false;\n        }\n        if (this.originalView && this.originalView instanceof ViewEngine) {\n            this.originalView.onSuperViewUnmounted();\n        }\n        if (this.children && this.children.length > 0) {\n            this.children.forEach(child => {\n                if (child && child instanceof ViewEngine) {\n                    child.onParentUnmounted();\n                }\n            });\n        }\n        if (this.followingBlocks && this.followingBlocks.size > 0) {\n            this.followingBlocks.forEach(block => {\n                block.unmounted();\n            });\n        }\n    }\n\n\n    /**\n     * Lifecycle: Called when view is destroyed (giữ nguyên tên từ code gốc)\n     */\n    destroy() {\n        // Mark as destroyed to prevent processing after destroy\n        this.isDestroyed = true;\n\n        // Reset pending flag to prevent processing after destroy\n        this._stateChangePending = false;\n\n        // Clear state change collections\n        if (this.changedStateKeys) {\n            this.changedStateKeys.clear();\n        }\n        this.changeStateQueueCount = 0;\n\n        this.unmounted();\n        if (this.originalView && this.originalView instanceof ViewEngine) {\n            this.originalView.destroy();\n        }\n        if (this.children && this.children.length > 0) {\n            this.children.forEach(child => child.destroy());\n        }\n        if (this.followingBlocks && this.followingBlocks.size > 0) {\n            this.followingBlocks.forEach(block => block.destroy());\n            this.followingBlocks.clear();\n        }\n        if (this.refElements && this.refElements.length > 0) {\n            this.refElements.forEach(element => element.parentNode && element.parentNode.removeChild(element));\n            this.refElements = [];\n        }\n    }\n\n    refresh() {\n        this.isRefreshing = true;\n        // TH1: có super view\n        if (this.parent && this.parent instanceof ViewEngine) {\n            this.parent.refresh();\n        }\n        // TH2: nếu là super view\n        // TH3: nếu là page view\n        // TH4: nếu là child view\n    }\n    /**\n     * Lifecycle: Called when super view is mounted (giữ nguyên tên từ code gốc)\n     */\n    onSuperViewMounted() {\n        this.mounted();\n    }\n\n    /**\n     * Lifecycle: Called when super view is unmounted (giữ nguyên tên từ code gốc)\n     */\n    onSuperViewUnmounted() {\n\n    }\n\n    /**\n     * Lifecycle: Called when parent view is mounted (giữ nguyên tên từ code gốc)\n     */\n    onParentMounted() {\n        this.mounted();\n    }\n    /**\n     * Lifecycle: Called when parent view is unmounted (giữ nguyên tên từ code gốc)\n     */\n    onParentUnmounted() {\n        // Placeholder for when parent view is unmounted\n    }\n\n\n\n    /**\n     * Hàm parse string HTML thành DOM, thêm thuộc tính x-ref-view cho các phần tử con level 0, trả về string HTML mới.\n     * @param {string} htmlString - Chuỗi HTML đầu vào\n     * @param {string|number} id - Giá trị cho thuộc tính x-ref-view\n     * @returns {string} Chuỗi HTML đã thêm thuộc tính x-ref-view cho các phần tử level 0\n     */\n    addXRefViewToRootElements(htmlString) {\n        // Tạo một container ảo để parse HTML\n        const container = document.createElement('div');\n        container.innerHTML = htmlString;\n\n        // Lặp qua các phần tử con trực tiếp (level 0)\n        Array.from(container.children).forEach(child => {\n            child.setAttribute('x-ref-view', this.id);\n        });\n\n        // Trả về HTML đã được thêm thuộc tính\n        return container.innerHTML;\n    }\n\n    /**\n     * Check if string is HTML\n     * @param {string} str - String to check\n     * @returns {boolean} True if HTML string\n     * @private\n     */\n    isHtmlString(str) {\n        return /<[a-z][\\s\\S]*>/i.test(str);\n    }\n\n\n\n    renderPlaceholder() {\n        return `<div class=\"${ATTR.className('placeholder')}\" ${ATTR.KEYS.VIEW_ID}=\"${this.id}\"></div>`;\n    }\n\n    showError(error) {\n        if (this.isSuperView) {\n            return `<div class=\"${ATTR.className('ERROR_VIEW')}\">${error}</div>`;\n        }\n        else if (this.hasSuperView) {\n            if (this.renderLongSections.length > 0) {\n                return this.renderLongSections.map(section => {\n                    return this.App.View.section(section, `<div class=\"${ATTR.className('section-error')}\" ${ATTR.KEYS.VIEW_SECTION_REF}=\"${this.id}\">${error}</div>`, 'html');\n                }).join('');\n            }\n            else {\n                return `<div class=\"${ATTR.className('ERROR_VIEW')}\" ${ATTR.KEYS.VIEW_ID}=\"${this.id}\">${error}</div>`;\n            }\n        }\n        else {\n            if (this.renderLongSections.length > 0) {\n                return this.renderLongSections.map(section => {\n                    return this.App.View.section(section, `<div class=\"${ATTR.className('section-error')}\" ${ATTR.KEYS.VIEW_SECTION_REF}=\"${this.id}\">${error}</div>`, 'html');\n                }).join('');\n            }\n            return `<div class=\"${ATTR.className('ERROR_VIEW')}\" ${ATTR.KEYS.VIEW_ID}=\"${this.id}\">${error}</div>`;\n        }\n    }\n\n    showErrorScan(error) {\n        return null;\n    }\n\n\n    resetOriginalView() {\n        if (this.originalView && this.originalView instanceof ViewEngine) {\n            this.originalView.destroy();\n        }\n    }\n\n    ejectOriginalView() {\n        if (this.originalView && this.originalView instanceof ViewEngine) {\n            this.originalView = null;\n            this.originalViewId = null;\n            this.originalViewPath = null;\n        }\n    }\n\n    /**\n     * Remove this view and all children\n     * @returns {AppViewEngine} This instance for chaining\n     */\n    remove() {\n        this.master?.removeChild(this);\n        this.children.forEach(child => child.remove());\n        this.master = null;\n        this.children = [];\n        return this;\n    }\n\n    /**\n     * Insert resources into DOM\n     */\n    insertResources() {\n        this.resources.forEach(resource => {\n            if (document.querySelector(`[data-resource-uuid=\"${resource.uuid}\"]`)) {\n                return;\n            }\n            const element = document.createElement(resource.tag);\n            Object.entries(resource.attrs).forEach(([key, value]) => {\n                element.setAttribute(key, value);\n            });\n            element.setAttribute('data-resource-uuid', resource.uuid);\n            if (resource.tag === 'script') {\n                document.body.appendChild(element);\n            }\n            else if (resource.tag === 'link') {\n                document.head.appendChild(element);\n            }\n            else if (resource.tag === 'style') {\n                document.head.appendChild(element);\n            }\n            document.head.appendChild(element);\n        });\n    }\n\n    /**\n     * Remove resources from DOM\n     */\n    removeResources() {\n        this.resources.forEach(resource => {\n            const element = document.querySelector(`[data-resource-uuid=\"${resource.uuid}\"]`);\n            if (element) {\n                element.remove();\n            }\n        });\n    }\n\n\n    __showError(error) {\n        logger.error(`ViewEngine Error [${this.path}]: ${error}`);\n        return this.showError(error);\n    }\n\n\n\n    /**\n     * \n     * @param {string} name tên của section\n     * @param {string} content nội dung của section\n     * @param {string} type loại của section\n     * @returns {string} kết quả của việc render section\n     * @example\n     * <AppViewEngine>.section(\"section.name\", \"<div>Content</div>\", \"html\");\n     */\n    __section(name, content, type) {\n        this.cachedSections[name] = content;\n        // Nếu là virtual rendering thì không render section\n        if(this.isVirtualRendering){\n            return null;\n        }\n        return this.App.View.section(name, content, type);\n    }\n\n    /**\n     * \n     * @param {string} name tên của section\n     * @param {string} defaultValue giá trị mặc định của section\n     * @returns {string} kết quả của việc render section\n     * @example\n     * <AppViewEngine>.yield(\"section.name\", \"Default Content\");\n     */\n    __yield(name, defaultValue = '') {\n        return this.App.View.yield(name, defaultValue);\n    }\n\n    __yieldContent(name, defaultValue = '') {\n        return this.App.View.yieldContent(name, defaultValue);\n    }\n\n\n\n    /**\n     * \n     * @param {...any} args các tham số của hàm execute\n     * @returns {string} kết quả của việc execute\n     * @example\n     * <AppViewEngine>.execute(\"console.log('Hello, world!');\");\n     */\n    __execute(...args) {\n        return this.App.View.execute(...args);\n    }\n\n    __subscribe(...args) {\n        // return this.subscribe(...args);\n    }\n\n\n    __text(...args) {\n        return this.App.View.text(...args);\n    }\n\n    /**\n     * __ methods \n     */\n\n    /**\n     * \n     * @param {string[]} stateKeys danh sách các state keys\n     * @param {() => string} renderBlock hàm render block\n     * @returns {string} kết quả của việc render block\n     * @example\n     * <AppViewEngine>.follow([\"userState\"], () => {\n     *     return `<div>User State: ${userState}</div>`;\n     * });\n     * // returns '<div>User State: 1</div>'\n     */\n    __follow(stateKeys = [], renderBlock = () => '') {\n        if(this.isVirtualRendering){\n            return this.renderFollowingBlockScan(stateKeys, renderBlock);\n        }\n        return this.renderFollowingBlock(stateKeys, renderBlock);\n    }\n\n\n\n    /**\n     * \n     * @param {string} name tên của block\n     * @param {Object} attributes thuộc tính của block\n     * @param {string} content nội dung của block\n     * @returns {string} kết quả của việc render block\n     * @example\n     * <AppViewEngine>.block(\"name\", { \"class\": \"class-name\" }, \"<div>Content</div>\");\n     */\n    __block(name, attributes = {}, content) {\n        return this.addBlock(name, attributes, content);\n    }\n\n    /**\n     * \n     * @param {string} path đường dẫn của view\n     * @param {Object} data dữ liệu của view\n     * @returns {string} kết quả của việc render view\n     * @example\n     * <AppViewEngine>.include(\"path.to.view\", { \"data\": \"value\" });\n     */\n    __include(path, data = {}) {\n        // Nếu là virtual rendering thì tìm child config từ server data\n        if (this.isVirtualRendering) {\n            const childParams = this.childrenConfig[this.childrenIndex];\n            if (!(childParams && childParams.name === path)) {\n                return null;\n            }\n            this.childrenIndex++;\n            const childConfig = this.App.View.ssrViewManager.getInstance(childParams.name, childParams.id);\n            if (!childConfig) {\n                return null;\n            }\n            const childData = { ...data, ...childConfig.data, __SSR_VIEW_ID__: childParams.id };\n            const child = this.$include(childParams.name, childData);\n            if (!child) {\n                return null;\n            }\n            child.__scan(childConfig);\n            return child;\n        }\n        // Nếu không phải virtual rendering thì gọi $include\n        return this.$include(path, data);\n\n    }\n\n    __includeif(path, data = {}) {\n        if (!this.App.View.exists(path)) {\n            return null;\n        }\n        return this.__include(path, data);\n    }\n\n    __includewhen(condition, path, data = {}) {\n        if (!condition) {\n            return null;\n        }\n        return this.__include(path, data);\n    }\n\n\n    __extends(name, data = {}) {\n        // Nếu là virtual rendering thì tìm super view từ server data\n        if(this.isVirtualRendering){\n            if (!this.App.View.exists(name)) {\n                return null;\n            }\n            let superViewConfig = null;\n            let superViewOfChildren = this.childrenConfig.find((child, index) => child.name === name && index == this.childrenConfig.length - 1);\n            if (superViewOfChildren) {\n                superViewConfig = this.App.View.ssrViewManager.getInstance(superViewOfChildren.name, superViewOfChildren.id);\n            } else {\n                superViewConfig = this.App.View.ssrViewManager.scan(name);\n            }\n            if (!superViewConfig) {\n                return null;\n            }\n            const superViewData = { ...data, ...superViewConfig.data, __SSR_VIEW_ID__: superViewConfig.viewId };\n            const superView = this.$extends(name, superViewData);\n            if (!superView) {\n                return null;\n            }\n            superView.__scan(superViewConfig);\n            return superView;\n        }\n        return this.$extends(name, data);\n    }\n\n\n    __setLoopContext(length) {\n        let parent = this.loopContext;\n        this.loopContext = new LoopContext(parent);\n        this.loopContext.setCount(length);\n        return this.loopContext;\n    }\n\n    __resetLoopContext() {\n        if (this.loopContext && this.loopContext.parent) {\n            let parent = this.loopContext.parent;\n            this.loopContext.parent = null;\n            Object.freeze(this.loopContext);\n            this.loopContext = parent;\n        } else if (this.loopContext) {\n            Object.freeze(this.loopContext);\n            this.loopContext = null;\n        } else {\n            this.loopContext = null;\n        }\n        return this.loopContext;\n    }\n\n    /**\n     * Lặp qua danh sách hoặc đối tượng và gọi callback cho mỗi phần tử hoặc key\n     * @param {Array|Object} list danh sách cần lặp hoặc đối tượng cần lặp\n     * @param {function(item: any, defaultKeyName: string, index: number, loopContext: LoopContext): string} callback hàm callback để xử lý mỗi phần tử hoặc key của đối tượng\n     * @returns {string} kết quả của việc lặp\n     * @example\n     * <AppViewEngine>.foreach([1, 2, 3], (item, defaultKeyName, index, loopContext) => {\n     *     return `<div>${defaultKeyName}: ${item}</div>`;\n     * });\n     * // returns '<div>1</div><div>2</div><div>3</div>'\n     * <AppViewEngine>.foreach({a: 1, b: 2, c: 3}, (value, key, index, loopContext) => {\n     *     return `<div>${key}: ${value}</div>`;\n     * });\n     */\n    __foreach(list, callback) {\n        if (!list) {\n            return '';\n        }\n        if (!(list && typeof list === 'object' && !Array.isArray(list))) {\n            return '';\n        }\n        let result = '';\n        if (Array.isArray(list)) {\n            let loopContext = this.__setupLoopContext(list);\n            loopContext.setType('increment');\n            list.forEach((item, index) => {\n                loopContext.setCurrentTimes(index);\n                result += callback(item, index, index, loopContext);\n            });\n            this.__resetLoopContext();\n        } else {\n            let count = Object.keys(list).length;\n            let loopContext = this.__setupLoopContext(count);\n            loopContext.setType('increment');\n            let index = 0;\n            Object.entries(list).forEach(([key, value]) => {\n                loopContext.setCurrentTimes(index);\n                result += callback(value, key, index, loopContext);\n                index = index + 1;\n            });\n            this.__resetLoopContext();\n        }\n        return result;\n    }\n\n\n    /**\n     * Scan and hydrate server-rendered view\n     * This method:\n     * 1. Finds DOM elements for this view\n     * 2. Attaches event handlers from server data\n     * 3. Sets up state subscriptions\n     * 4. Stores children and following block references\n     *\n     * @param {Object} config - Server-side view configuration\n     * @param {string} config.viewId - View instance ID\n     * @param {Object} config.data - View data from server\n     * @param {Object} config.events - Event handlers to attach\n     * @param {Array} config.following - Following blocks to setup\n     * @param {Array} config.children - Child views to scan\n     * @param {Object} config.parent - Parent view reference\n     */\n    __scan(config) {\n        if (this.isScanned) {\n            return;\n        }\n        // this.isScanned = true;\n        this.isScanning = true;\n        const { viewId, data, events, following, children, parent } = config;\n        if (data && typeof data === 'object') {\n            // this.data = { ...this.data, ...data };\n            this.updateVariableData(data);\n        }\n\n\n        if (typeof viewId !== 'string' || viewId === '') {\n            logger.warn('⚠️ ViewEngine.__scan: Invalid viewId', viewId);\n            return null;\n        }\n\n        logger.log(`🔍 ViewEngine.__scan: Scanning view ${this.path} (${viewId})`);\n\n        // ========================================================================\n        // STEP 1: Find DOM Elements\n        // ========================================================================\n\n        this.__scanDOMElements(viewId);\n\n        // ========================================================================\n        // STEP 2: Attach Event Handlers\n        // ========================================================================\n\n        // if (events && typeof events === 'object') {\n        //     this.__attachEventHandlers(events, viewId);\n\n        // }\n\n        // ========================================================================\n        // STEP 3: Setup State Subscriptions (Following Blocks)\n        // ========================================================================\n\n        if (following && following.length > 0) {\n            this.__setupFollowingBlocks(following, viewId);\n        }\n\n        // ========================================================================\n        // STEP 4: Store Children References\n        // ========================================================================\n\n        if (children && children.length > 0) {\n            this.__storeChildrenReferences(children);\n        }\n\n        // ========================================================================\n        // STEP 5: Store Parent Reference\n        // ========================================================================\n\n        // if (parent) {\n        //     this.parentView = parent;\n        // }\n\n        logger.log(`✅ ViewEngine.__scan: Scan complete for ${this.path} (${viewId})`);\n        // this.isScanning = false;\n        this.isScanned = true;\n    }\n\n    /**\n     * Find and store DOM elements for this view\n     * @private\n     * @param {string} viewId - View instance ID\n     */\n    __scanDOMElements(viewId) {\n        if (this.hasSuperView) {\n            logger.log(`✅ ViewEngine.__scanDOMElements: Skipping element scan for ${this.path} (${viewId}) due to super view`);\n            return;\n        }\n        if (this.wrapperConfig.enable) {\n            if (this.wrapperConfig.tag) {\n                // Custom wrapper tag\n                let elements = document.querySelectorAll(\n                    `${this.wrapperConfig.tag}[data-wrap-view=\"${this.path}\"][${ATTR.KEYS.VIEW_WRAPPER}=\"${viewId}\"]`\n                );\n                if (elements.length > 0) {\n                    this.refElements = Array.from(elements).map((el) => {\n                        el.setAttribute('x-ref-view', viewId);\n                        return el;\n                    });\n                    logger.log(`✅ ViewEngine.__scanDOMElements: Found ${elements.length} custom wrapper elements`);\n                }\n            } else {\n                // Use OneMarkup to find view boundary\n                const markup = OneMarkup.first('view', { name: this.path, id: viewId });\n                if (markup) {\n                    this.markup = markup;\n                    this.refElements = markup.nodes.filter(node => node.nodeType === Node.ELEMENT_NODE);\n                    logger.log(`✅ ViewEngine.__scanDOMElements: Found view boundary with ${this.refElements.length} elements`);\n                }\n            }\n        } else {\n            // Standard view wrapper\n            let elements = document.querySelectorAll(`[data-view-wrapper=\"${viewId}\"]`);\n            if (elements.length > 0) {\n                this.refElements = Array.from(elements).map((el) => {\n                    el.setAttribute('x-ref-view', viewId);\n                    return el;\n                });\n                logger.log(`✅ ViewEngine.__scanDOMElements: Found ${elements.length} standard wrapper elements`);\n            }\n        }\n\n        if (!this.refElements || this.refElements.length === 0) {\n            logger.warn(`⚠️ ViewEngine.__scanDOMElements: No elements found for ${this.path} (${viewId})`);\n        }\n    }\n\n    /**\n     * Attach event handlers to DOM elements from server data\n     * @private\n     * @param {Object} events - Event map from server\n     * @param {string} viewId - View instance ID\n     */\n    __attachEventHandlers(events, viewId) {\n        let attachedCount = 0;\n        this.events = events;\n        return;\n\n        logger.log(`✅ ViewEngine.__attachEventHandlers: Attached ${attachedCount} event handlers`);\n    }\n\n    /**\n     * Setup following blocks for reactive state updates\n     * @private\n     * @param {Array} following - Following block configurations\n     * @param {string} viewId - View instance ID\n     */\n    __setupFollowingBlocks(following, viewId) {\n        following.forEach(followConfig => {\n            const { id, stateKeys } = followConfig;\n\n            // Store config\n            this.followingConfig.push({\n                id,\n                stateKeys,\n            });\n            return;\n        });\n\n    }\n\n\n    /**\n     * Store children view references for hydration\n     * @private\n     * @param {Array} children - Child view configurations\n     */\n    __storeChildrenReferences(children) {\n        children.forEach(child => {\n            const { name, id } = child;\n            this.childrenConfig.push({\n                name,\n                id,\n            });\n        });\n\n        // logger.log(`✅ ViewEngine.__storeChildrenReferences: Stored ${children.length} children references`);\n    }\n\n\n\n    $extends(path, data = {}) {\n        const originData = this.data ? this.data : {};\n        if (originData.__SSR_VIEW_ID__) {\n            originData.__SSR_VIEW_ID__ = null;\n            delete originData.__SSR_VIEW_ID__;\n        }\n        const viewInstance = this.App.View.extendView(path, { ...originData, ...data });\n        if (!viewInstance) {\n            return null;\n        }\n        this.superViewPath = path;\n        this.setSuperView(viewInstance);\n        viewInstance.setOriginalView(this);\n        return viewInstance;\n    }\n\n\n\n    $include(path, data = {}) {\n        const parentData = this.data ? this.data : {};\n        if (parentData.__SSR_VIEW_ID__) {\n            parentData.__SSR_VIEW_ID__ = null;\n            delete parentData.__SSR_VIEW_ID__;\n        }\n        const viewInstance = this.App.View.include(path, { ...parentData, ...data });\n        if (!viewInstance) {\n            return null;\n        }\n        viewInstance.setParent(this);\n        this.addChild(viewInstance, data);\n        return viewInstance;\n    }\n\n\n    /**\n     * Add event stack for specific event type and ID\n     * @param {string} eventType - Type of event\n     * @param {Array} handlers - Array of handler objects\n     * @returns {string} Event attribute string\n     */\n    addEventStack(eventType, handlers) {\n        if (typeof eventID !== 'string' || eventID === '') {\n            return;\n        }\n        if (typeof handlers !== 'object' || handlers === null) {\n            return;\n        }\n        let eventIndex = this.eventIndex++;\n        let eventID = this.viewId + '-' + eventType + '-' + eventIndex;\n        if (typeof this.events[eventType] === 'undefined') {\n            this.events[eventType] = {};\n        }\n        if (typeof this.events[eventType][eventID] === 'undefined') {\n            this.events[eventType][eventID] = []\n        }\n        this.events[eventType][eventID].push(...handlers);\n\n        return ` data-${eventType}-id=\"${eventID}\"`;\n    }\n\n\n    __addEventConfig(eventType, handlers) {\n        return this.addEventConfig(eventType, handlers);\n    }\n\n    /**\n     * Set event configuration for view engine\n     * @param {Object} events - Event configuration object\n     */\n    setEventConfig(events) {\n        if (typeof events !== 'object' || events === null) {\n            return;\n        }\n        Object.entries(events).forEach((eventType, eventObjectList) => {\n            if (typeof eventObjectList !== 'object' || eventObjectList === null) {\n                return;\n            }\n            Object.entries(eventObjectList).forEach((eventID, handlers) => {\n                this.addEventStack(eventType, eventID, handlers);\n            });\n        });\n    }\n\n    startEventListener() {\n        const needDeleted = [];\n        Object.entries(this.events).forEach(([eventType, eventMap]) => {\n            Object.entries(eventMap).forEach(([eventID, handlers]) => {\n                const selector = `[data-${eventType}-id=\"${eventID}\"]`;\n                const elements = document.querySelectorAll(selector);\n                const parsedHandlers = this.parseEventHandlerFunctions(handlers);\n                if (parsedHandlers.length !== 0 && elements.length > 0) {\n                    elements.forEach(element => {\n                        const handler = (event) => {\n                            let returnValue = null;\n                            for (let i = 0; i < parsedHandlers.length; i++) {\n                                const handlerFn = parsedHandlers[i];\n                                returnValue = handlerFn(event);\n                                if (returnValue === false || event.defaultPrevented) {\n                                    event.preventDefault();\n                                    event.stopPropagation();\n                                    break;\n                                }\n                            }\n                            if (returnValue === false || returnValue === true) {\n                                return returnValue;\n                            }\n                        }\n                        element.addEventListener(eventType, handler);\n                        this.eventListeners.push({ element, eventType, handler });\n                    });\n                } else {\n                    logger.warn(`⚠️ ViewEngine.startEventListener: No elements found for selector ${selector} or no handlers defined`);\n                    needDeleted.push({ eventType, eventID });\n                }\n            });\n        });\n        needDeleted.forEach(({ eventType, eventID }) => {\n            delete this.events[eventType][eventID];\n            // If no more event handlers for this eventType, remove the entire eventType\n            if (Object.keys(this.events[eventType]).length === 0) {\n                delete this.events[eventType];\n            }\n        });\n        this.eventListenerStatus = true;\n    }\n\n    stopEventListener() {\n        this.eventListeners.forEach(({ element, eventType, handler }) => {\n            element.removeEventListener(eventType, handler);\n        });\n        this.eventListeners = [];\n        this.eventListenerStatus = false;\n    }\n\n    /**\n     * Clear all event data when elements are not found\n     * This helps prevent memory leaks from orphaned event handlers\n     */\n    clearOrphanedEventData() {\n        const needDeleted = [];\n        Object.entries(this.events).forEach(([eventType, eventMap]) => {\n            Object.entries(eventMap).forEach(([eventID, handlers]) => {\n                const selector = `[data-${eventType}-id=\"${eventID}\"]`;\n                const elements = document.querySelectorAll(selector);\n                if (elements.length === 0) {\n                    needDeleted.push({ eventType, eventID });\n                }\n            });\n        });\n\n        needDeleted.forEach(({ eventType, eventID }) => {\n            delete this.events[eventType][eventID];\n            // If no more event handlers for this eventType, remove the entire eventType\n            if (Object.keys(this.events[eventType]).length === 0) {\n                delete this.events[eventType];\n            }\n        });\n\n        if (needDeleted.length > 0) {\n            logger.log(`🗑️ ViewEngine.clearOrphanedEventData: Cleaned up ${needDeleted.length} orphaned event handlers`);\n        }\n    }\n\n\n    parseEventHandlerFunctions(handlers) {\n        let parsedHandlers = [];\n        handlers.forEach(handlerObj => {\n            const handlerName = handlerObj.handler;\n            const params = handlerObj.params || [];\n            const func = this.parseHandlerFunction(handlerName);\n            const fn = (event) => func(...this.parseEventHandlerParams(event, params));\n            parsedHandlers.push(fn);\n        });\n        return parsedHandlers;\n    }\n\n    parseHandlerFunction(funcName) {\n        if(!(typeof funcName === 'string' || typeof funcName === 'function')) {\n            return null;\n        }\n        if (typeof funcName === 'function') {\n            if(typeof funcName.bind === 'function') {\n                return funcName.bind(this);\n            }\n            return funcName;\n        }\n        // nếu là function trong userDefined thì lấy thông tin hàm đó\n        if (typeof this.userDefined[funcName] === 'function') {\n            let func = this.userDefined[funcName];\n            if(typeof func.bind === 'function') {\n                func = func.bind(this);\n            }\n            return func;\n        }\n        // nếu là function trong this thì lấy thông tin hàm đó\n        if (typeof this[funcName] === 'function') {\n            let func = this[funcName];\n            if(typeof func.bind === 'function') {\n                func = func.bind(this);\n            }\n            return func;\n        }\n        // nếu là function trong states.__setters__ thì lấy thông tin hàm đó\n        if (typeof this.states.__setters__[funcName] === 'function') {\n            let func = this.states.__setters__[funcName];\n            if(typeof func.bind === 'function') {\n                func = func.bind(this);\n            }\n            return func;\n        }\n        // nếu là function trong window thì lấy thông tin hàm đó\n        if (window && typeof window[funcName] === 'function') {\n            let func = window[funcName];\n            if(typeof func.bind === 'function') {\n                func = func.bind(window);\n            }\n            return func;\n        }\n        return (event) => logger.warn(`⚠️ Event handler ${funcName} is not defined`, event);\n    }\n\n    parseEventHandlerParams(event, params = []) {\n        return params.map(param => {\n            if (param === '@EVENT') {\n                return event;\n            }\n            else if (typeof param === 'object' && param !== null) {\n                if (typeof param.handler === 'string' && (Array.isArray(param.params) || (typeof param.params == 'object' && param.params !== null && param.params.constructor === Array))) {\n                    const func = this.parseHandlerFunction(param.handler);\n                    return func(...this.parseEventHandlerParams(event, param.params));\n                }\n                return this.parseEventHandlerObject(event, param);\n            }\n            else if (Array.isArray(param) || (typeof param === 'object' && param !== null && param.constructor === Array)) {\n                return this.parseEventHandlerParams(event, param);\n            }\n            else if (typeof param === 'function') {\n                return param(event);\n            }\n            return param;\n        });\n    }\n\n    parseEventHandlerObject(event, object = {}) {\n        let parsedObject = {};\n        Object.entries(object).forEach(([key, value]) => {\n            if (value === '@EVENT') {\n                parsedObject[key] = event;\n            }\n            else if (typeof value === 'object' && value !== null) {\n                if (typeof value.handler === 'string' && (Array.isArray(value.params) || (typeof value.params == 'object' && value.params !== null && value.params.constructor === Array))) {\n                    const func = this.parseHandlerFunction(value.handler);\n                    parsedObject[key] = func(...this.parseEventHandlerParams(event, value.params));\n                }\n                else {\n                    parsedObject[key] = this.parseEventHandlerObject(event, value);\n                }\n            }\n            else if (Array.isArray(value) || (typeof value === 'object' && value !== null && value.constructor === Array)) {\n                parsedObject[key] = this.parseEventHandlerParams(event, value);\n            }\n            else if (typeof value === 'function') {\n                parsedObject[key] = value(event);\n            }\n            else {\n                parsedObject[key] = value;\n            }\n        });\n        return parsedObject;\n    }\n\n\n\n\n\n    wrapattr() {\n        return ` ${ATTR.KEYS.VIEW_WRAPPER}=\"${this.id}\"`;\n    }\n\n    startWrapper(tag = null, attributes = {}) {\n        this.wrapTag = null;\n        if (typeof tag === 'string') {\n            this.wrapTag = tag;\n        }\n        else if (typeof tag === 'object') {\n            this.wrapTag = tag.tag || 'div';\n            delete tag.tag;\n            attributes = { ...attributes, ...tag.attributes };\n            tag = null;\n        }\n        if (typeof attributes === 'string' || !attributes) {\n            attributes = {};\n        }\n        if (this.wrapTag) {\n            return `<${this.wrapTag} data-wrap-view=\"${this.path}\" data-wrap-id=\"${this.id}\" ${Object.entries(attributes).map(([key, value]) => `${key}=\"${value}\"`).join(' ')}>`;\n        }\n        return `<!-- [one:view name=\"${this.path}\" id=\"${this.id}\"] -->`;\n\n    }\n    endWrapper() {\n        if (this.wrapTag) {\n            this.wrapTag = null;\n            return `</${this.wrapTag}>`;\n        }\n        this.wrapTag = null;\n        return `<!-- [/one:view] -->`;\n    }\n\n    addBlock(name, attributes = {}, content) {\n        if (typeof name !== 'string' || name === '') {\n            return;\n        }\n        if(this.isVirtualRendering){\n            return this.App.View.section(\"block.\" + name, `<!-- [one:block name=\"${this.path}\" ref=\"${this.id}\"] -->${content}<!-- [/one:block] -->`, 'html');\n        }\n        return this.App.View.section(\"block.\" + name, `<!-- [one:block name=\"${this.path}\" ref=\"${this.id}\"] -->${content}<!-- [/one:block] -->`, 'html');\n    }\n\n    useBlock(name, defaultValue = '') {\n        if (typeof name !== 'string' || name === '') {\n            return;\n        }\n        if(this.isVirtualRendering){\n            return `<!-- [one:subscribe type=\"block\" key=\"${name}\"] -->${this.App.View.yield(\"block.\" + name, defaultValue)}<!-- [/one:subscribe] -->`;\n        }\n        return `<!-- [one:subscribe type=\"block\" key=\"${name}\"] -->${this.App.View.yield(\"block.\" + name, defaultValue)}<!-- [/one:subscribe] -->`;\n    }\n\n\n    mountBlock(name, defaultValue = '') {\n        return this.useBlock(name, defaultValue);\n    }\n\n    subscribeBlock(name, defaultValue = '') {\n        return \" data-subscribe-block=\\\"\" + name + \"\\\"\";\n    }\n\n    renderFollowingBlock(stateKeys = [], renderBlock = () => '') {\n        if (!Array.isArray(stateKeys) || stateKeys.length === 0) {\n            return '';\n        }\n\n        if (typeof renderBlock !== 'function') {\n            return '';\n        }\n        if (this.isVirtualRendering) {\n            this.isVirtualRendering = false;\n            let result = this.renderFollowingBlockScan(stateKeys, renderBlock);\n            this.isVirtualRendering = true;\n            return result;\n        }\n        const followBlock = new FollowingBlock({ stateKeys, renderBlock, engine: this, states: this.states, App: this.App });\n        // this.followingBlocks.push(followBlock);\n        this.followingIDs.push(followBlock.id);\n        this.followingBlocks.set(followBlock.id, followBlock);\n        const result = followBlock.render();\n        return result;\n    }\n\n    renderFollowingBlockScan(stateKeys = [], renderBlock = () => '') {\n        let followingIndex = this.followingScanIndex;\n        let followingConfig = this.followingConfig[followingIndex];\n        if (!(followingConfig || (followingConfig.stateKeys == stateKeys) || (followingConfig.stateKeys.length == stateKeys.length && followingConfig.stateKeys.every(value => stateKeys.includes(value))))) {\n            return '';\n        }\n        const { id: renderID } = followingConfig;\n        const followBlock = new FollowingBlock({ renderID, stateKeys, renderBlock, engine: this, states: this.states, App: this.App });\n        followBlock.scan();\n        // this.followingBlocks.push(followBlock);\n        this.followingIDs.push(followBlock.id);\n        this.followingBlocks.set(followBlock.id, followBlock);\n        this.followingScanIndex++;\n        return ``;\n    }\n\n\n    onFollowUpdating() {\n        this.stopEventListener();\n        setTimeout(() => {\n            if (!this.eventListenerStatus) {\n                this.startEventListener();\n            }\n        }, 10);\n    }\n\n    onFollowUpdated() {\n        if (!this.eventListenerStatus) {\n            this.startEventListener();\n        }\n    }\n\n    onStateChange(key, value, oldValue) {\n        // Use Set to automatically handle duplicates\n        this.changedStateKeys.add(key);\n\n        // Increment queue count (for tracking/statistics if needed)\n        this.changeStateQueueCount++;\n\n        // Schedule batch processing using Promise for async execution\n        // Promise.resolve().then() runs in microtask queue, faster than setTimeout\n        // and works even when tab is hidden (unlike requestAnimationFrame)\n        // The _stateChangePending flag ensures only one Promise is scheduled at a time\n        // All subsequent changes will be batched into the Set\n        if (!this._stateChangePending) {\n            this._stateChangePending = true;\n\n            // Use Promise.resolve().then() for microtask queue (fastest, works in background)\n            Promise.resolve().then(() => {\n                // Clear pending flag before processing\n                this._stateChangePending = false;\n                this._processStateChanges();\n            });\n        }\n    }\n\n    /**\n     * Process batched state changes efficiently\n     * @private\n     */\n    _processStateChanges() {\n        // Skip if view is destroyed\n        if (this.isDestroyed) {\n            return;\n        }\n\n        // Get all changed keys as array for processing\n        const changedKeys = Array.from(this.changedStateKeys);\n\n        // Reset collections\n        this.changedStateKeys.clear();\n        this.changeStateQueueCount = 0;\n\n        // If no keys changed, skip processing\n        if (changedKeys.length === 0) {\n            return;\n        }\n\n        // Process state changes - trigger view updates\n        // Already in microtask queue (from Promise.resolve().then()), so execute directly\n        this._notifyStateChanges(changedKeys);\n    }\n\n    /**\n     * Notify views about state changes\n     * @param {Array<string>} changedKeys - Array of changed state keys\n     * @private\n     */\n    _notifyStateChanges(changedKeys) {\n        // Trigger refresh for views that subscribe to these keys\n        // This will be called after all synchronous operations complete\n        if (this.isRefreshing) {\n            return; // Prevent recursive refresh\n        }\n\n        // Check if this view subscribes to any of the changed keys\n        if (this.subscribe && Array.isArray(this.subscribe) && this.subscribe.length > 0) {\n            const shouldRefresh = changedKeys.some(key => this.subscribe.includes(key));\n            if (shouldRefresh) {\n                this.refresh();\n            }\n        }\n\n        // Notify children that subscribe to changed keys\n        if (this.children && this.children.length > 0) {\n            this.children.forEach(childScope => {\n                if (childScope.subscribe && Array.isArray(childScope.subscribe)) {\n                    const shouldRefresh = changedKeys.some(key => childScope.subscribe.includes(key));\n                    if (shouldRefresh && childScope.view) {\n                        childScope.view._notifyStateChanges(changedKeys);\n                    }\n                }\n            });\n        }\n    }\n\n    onStateDataChanges() {\n        const data = this.stateChangeData;\n        this.stateChangeData = null;\n    }\n\n    /**\n     * Set App instance\n     * @param {Object} app - App instance\n     * @returns {AppViewEngine} This instance for chaining\n     */\n    setApp(app) {\n        this.App = app;\n        return this;\n    }\n\n    setUrlPath(urlPath) {\n        this.urlPath = urlPath;\n        return this;\n    }\n    /**\n     * Set super view\n     * @param {AppViewEngine} superView - Super view instance\n     * @returns {AppViewEngine} This instance for chaining\n     */\n    setSuperView(superView) {\n        this.superView = superView;\n        return this;\n    }\n\n    /**\n     * Set parent view\n     * @param {AppViewEngine} parent - Parent view instance\n     * @returns {AppViewEngine} This instance for chaining\n     */\n    setParent(parent) {\n        this.parent = parent;\n        return this;\n    }\n\n\n    setOriginalView(originalView) {\n        this.originalView = originalView;\n        this.originalViewPath = originalView.path;\n        this.originalViewId = originalView.id;\n        return this;\n    }\n\n    /**\n     * Add child view\n     * @param {ViewEngine} child - Child view to add\n     * @param {Object} data - Data to add to the child view\n     * @returns {ViewEngine} This instance for chaining\n     */\n    addChild(child, data = {}) {\n        let index = this.children.length;\n        let scope = {\n            name: child.path,\n            id: child.id,\n            index,\n            view: child,\n            data,\n            subscribe: [],\n        }\n        child.setScope(scope);\n        this.children.push(scope);\n        return this;\n    }\n\n\n    /**\n     * Remove child view\n     * @param {AppViewEngine} child - Child view to remove\n     * @returns {AppViewEngine} This instance for chaining\n     */\n    removeChild(child) {\n        this.children = this.children.filter(c => c !== child);\n        return this;\n    }\n\n    /**\n     * Update data\n     * @param {Object} __data - New data to merge\n     * @returns {AppViewEngine} This instance for chaining\n     */\n    updateData(__data = {}) {\n        this.data = { ...this.data, ...__data };\n        // this.states.__reset();\n\n        return this;\n    }\n\n    updateVariableData(data = {}) {\n        if (typeof this.config.updateVariableData === 'function') {\n            this.config.updateVariableData.call(this, data);\n            this.isCommitedConstructorData = true;\n        }\n\n        return this;\n    }\n\n    updateVariableItem(key, value) {\n        if (typeof this.config.updateVariableItemData === 'function') {\n            this.config.updateVariableItemData.call(this, key, value);\n        }\n        return this;\n    }\n\n    /**\n     * Set isSuperView flag\n     * @param {boolean} isSuperView - Super view flag\n     * @returns {AppViewEngine} This instance for chaining\n     */\n    setIsSuperView(isSuperView) {\n        this.isSuperView = isSuperView;\n        return this;\n    }\n\n    /** Events */\n\n\n    /**\n     * Reset view engine\n     */\n    reset() {\n        // Implementation placeholder\n    }\n\n}","const basePrefix = 'data-';\nconst ATTR = {\n    PREFIX: {\n        BASE: basePrefix,\n        YIELD: `${basePrefix}yield-`,\n        \n\n        // DOM EVENTS - Mouse Events\n        CLICK: `${basePrefix}click-`,\n        DBLCLICK: `${basePrefix}dblclick-`,\n        MOUSEDOWN: `${basePrefix}mousedown-`,\n        MOUSEUP: `${basePrefix}mouseup-`,\n        MOUSEOVER: `${basePrefix}mouseover-`,\n        MOUSEOUT: `${basePrefix}mouseout-`,\n        MOUSEMOVE: `${basePrefix}mousemove-`,\n        MOUSEENTER: `${basePrefix}mouseenter-`,\n        MOUSELEAVE: `${basePrefix}mouseleave-`,\n        WHEEL: `${basePrefix}wheel-`,\n        AUXCLICK: `${basePrefix}auxclick-`,\n\n        // Keyboard Events\n        KEYDOWN: `${basePrefix}keydown-`,\n        KEYUP: `${basePrefix}keyup-`,\n        KEYPRESS: `${basePrefix}keypress-`,\n\n        // Form Events\n        INPUT: `${basePrefix}input-`,\n        CHANGE: `${basePrefix}change-`,\n        SUBMIT: `${basePrefix}submit-`,\n        RESET: `${basePrefix}reset-`,\n        INVALID: `${basePrefix}invalid-`,\n        SEARCH: `${basePrefix}search-`,\n\n        // Focus Events\n        FOCUS: `${basePrefix}focus-`,\n        BLUR: `${basePrefix}blur-`,\n        FOCUSIN: `${basePrefix}focusin-`,\n        FOCUSOUT: `${basePrefix}focusout-`,\n\n        // Selection Events\n        SELECT: `${basePrefix}select-`,\n        SELECTSTART: `${basePrefix}selectstart-`,\n        SELECTIONCHANGE: `${basePrefix}selectionchange-`,\n\n        // Touch Events\n        TOUCHSTART: `${basePrefix}touchstart-`,\n        TOUCHMOVE: `${basePrefix}touchmove-`,\n        TOUCHEND: `${basePrefix}touchend-`,\n        TOUCHCANCEL: `${basePrefix}touchcancel-`,\n\n        // Drag & Drop Events\n        DRAGSTART: `${basePrefix}dragstart-`,\n        DRAG: `${basePrefix}drag-`,\n        DRAGEND: `${basePrefix}dragend-`,\n        DRAGENTER: `${basePrefix}dragenter-`,\n        DRAGLEAVE: `${basePrefix}dragleave-`,\n        DRAGOVER: `${basePrefix}dragover-`,\n        DROP: `${basePrefix}drop-`,\n\n        // Media Events\n        PLAY: `${basePrefix}play-`,\n        PAUSE: `${basePrefix}pause-`,\n        ENDED: `${basePrefix}ended-`,\n        LOADSTART: `${basePrefix}loadstart-`,\n        LOADEDDATA: `${basePrefix}loadeddata-`,\n        LOADEDMETADATA: `${basePrefix}loadedmetadata-`,\n        CANPLAY: `${basePrefix}canplay-`,\n        CANPLAYTHROUGH: `${basePrefix}canplaythrough-`,\n        WAITING: `${basePrefix}waiting-`,\n        SEEKING: `${basePrefix}seeking-`,\n        SEEKED: `${basePrefix}seeked-`,\n        RATECHANGE: `${basePrefix}ratechange-`,\n        DURATIONCHANGE: `${basePrefix}durationchange-`,\n        VOLUMECHANGE: `${basePrefix}volumechange-`,\n        SUSPEND: `${basePrefix}suspend-`,\n        STALLED: `${basePrefix}stalled-`,\n        PROGRESS: `${basePrefix}progress-`,\n        EMPTIED: `${basePrefix}emptied-`,\n        ENCRYPTED: `${basePrefix}encrypted-`,\n        WAKEUP: `${basePrefix}wakeup-`,\n\n        // Window Events\n        LOAD: `${basePrefix}load-`,\n        UNLOAD: `${basePrefix}unload-`,\n        BEFOREUNLOAD: `${basePrefix}beforeunload-`,\n        RESIZE: `${basePrefix}resize-`,\n        SCROLL: `${basePrefix}scroll-`,\n        ORIENTATIONCHANGE: `${basePrefix}orientationchange-`,\n        VISIBILITYCHANGE: `${basePrefix}visibilitychange-`,\n        PAGEHIDE: `${basePrefix}pagehide-`,\n        PAGESHOW: `${basePrefix}pageshow-`,\n        POPSTATE: `${basePrefix}popstate-`,\n        HASHCHANGE: `${basePrefix}hashchange-`,\n        ONLINE: `${basePrefix}online-`,\n        OFFLINE: `${basePrefix}offline-`,\n\n        // Document Events\n        DOMCONTENTLOADED: `${basePrefix}DOMContentLoaded-`,\n        READYSTATECHANGE: `${basePrefix}readystatechange-`,\n\n        // Error Events\n        ERROR: `${basePrefix}error-`,\n        ABORT: `${basePrefix}abort-`,\n\n        // Context Menu\n        CONTEXTMENU: `${basePrefix}contextmenu-`,\n\n        // Animation Events\n        ANIMATIONSTART: `${basePrefix}animationstart-`,\n        ANIMATIONEND: `${basePrefix}animationend-`,\n        ANIMATIONITERATION: `${basePrefix}animationiteration-`,\n\n        // Transition Events\n        TRANSITIONSTART: `${basePrefix}transitionstart-`,\n        TRANSITIONEND: `${basePrefix}transitionend-`,\n        TRANSITIONRUN: `${basePrefix}transitionrun-`,\n        TRANSITIONCANCEL: `${basePrefix}transitioncancel-`,\n\n        // Pointer Events (Modern browsers)\n        POINTERDOWN: `${basePrefix}pointerdown-`,\n        POINTERUP: `${basePrefix}pointerup-`,\n        POINTERMOVE: `${basePrefix}pointermove-`,\n        POINTEROVER: `${basePrefix}pointerover-`,\n        POINTEROUT: `${basePrefix}pointerout-`,\n        POINTERENTER: `${basePrefix}pointerenter-`,\n        POINTERLEAVE: `${basePrefix}pointerleave-`,\n        POINTERCANCEL: `${basePrefix}pointercancel-`,\n        GOTPOINTERCAPTURE: `${basePrefix}gotpointercapture-`,\n        LOSTPOINTERCAPTURE: `${basePrefix}lostpointercapture-`,\n\n        // Fullscreen Events\n        FULLSCREENCHANGE: `${basePrefix}fullscreenchange-`,\n        FULLSCREENERROR: `${basePrefix}fullscreenerror-`,\n\n        // Clipboard Events\n        COPY: `${basePrefix}copy-`,\n        CUT: `${basePrefix}cut-`,\n        PASTE: `${basePrefix}paste-`,\n\n        // Gamepad Events\n        GAMEPADCONNECTED: `${basePrefix}gamepadconnected-`,\n        GAMEPADDISCONNECTED: `${basePrefix}gamepaddisconnected-`,\n\n        // Battery Events\n        BATTERYCHARGINGCHANGE: `${basePrefix}batterychargingchange-`,\n        BATTERYLEVELCHANGE: `${basePrefix}batterylevelchange-`,\n\n        // Device Orientation Events\n        DEVICEORIENTATION: `${basePrefix}deviceorientation-`,\n        DEVICEMOTION: `${basePrefix}devicemotion-`,\n        DEVICELIGHT: `${basePrefix}devicelight-`,\n        DEVICEPROXIMITY: `${basePrefix}deviceproximity-`,\n\n        // WebGL Events\n        WEBGLCONTEXTLOST: `${basePrefix}webglcontextlost-`,\n        WEBGLCONTEXTRESTORED: `${basePrefix}webglcontextrestored-`,\n\n\n        // view\n        VIEW: `${basePrefix}view-`,\n    },\n    KEYS: {\n        VIEW: `${basePrefix}view`,\n        VIEW_ID: `${basePrefix}view-id`,\n        VIEW_REF: `${basePrefix}view-ref`,\n        VIEW_SECTION_REF: `${basePrefix}view-section-ref`,\n        VIEW_RESOURCE: `${basePrefix}view-resource`,\n        VIEW_STYLE: `${basePrefix}view-style`,\n        VIEW_WRAPPER: `${basePrefix}view-wrapper`,\n        // yield\n        YIELD_ATTR: `${basePrefix}yield-attr`,\n        YIELD_CONTENT: `${basePrefix}yield-content`,\n        YIELD_CHILDREN: `${basePrefix}yield-children`,\n        YIELD_SUBSCRIBE: `${basePrefix}yield-subscribe`,\n        YIELD_SUBSCRIBE_ATTR: `${basePrefix}yield-subscribe-attr`,\n        YIELD_SUBSCRIBE_CONTENT: `${basePrefix}yield-subscribe-content`,\n        YIELD_SUBSCRIBE_CHILDREN: `${basePrefix}yield-subscribe-children`,\n    },\n    CLASSNAME: {\n        BASE: basePrefix,\n        VIEW_ERROR: `${basePrefix}view-error`,\n        VIRTUAL_CONTAINER: `${basePrefix}virtual-container`,\n        SECTION_ERROR: `${basePrefix}section-error`,\n    },\n    prefix: (key) => ATTR.PREFIX[key.toUpperCase()] || basePrefix + key,\n    key: (key) => ATTR.KEYS[key.toUpperCase()] || basePrefix + key,\n    className: (key) => ATTR.CLASSNAME[key.toUpperCase()] || basePrefix + key.toLowerCase().replace(/_/g, '-'),\n\n}\n\nexport const FORBIDDEN_KEYS = [\n    'init',\n    'destroy',\n    'beforeInit',\n    'afterInit',\n    'beforeDestroy',\n    'destroyed',\n    'loadServerData',\n    'render',\n    'prerender',\n    'insertResources',\n    'removeResources',\n    'setMaster',\n    'setApp',\n    'addChild',\n    'removeChild',\n    'remove',\n    'setParent',\n    'parent',\n    'master',\n    'beforeCreate',\n    'created',\n    'beforeUpdate',\n    'updated',\n    'beforeMount',\n    'mounted',\n    'beforeUnmount',\n    'unmounted',\n    'renderLongSections',\n    'renderSections',\n    'prerenderSections',\n    'data',\n    'scope',\n    'subscribe',\n    'updateVariableItem',\n    'updateVariableData',\n];\n\nexport { ATTR };","/**\n * seo-config Module\n * ES6 Module for Blade Compiler\n */\n\nexport const ViewState = function (view) {\n    const viewRef = view;\n    const states = [];\n    let stateIndex = 0;\n    const stateMap = [];\n    \n}\nexport const SEOTagConfig = {\n    \"meta:title\": [\n        {\n            tag: \"title\",\n            selector: \"title\",\n            attribute: \"@content\",\n            attrs: {}\n        },\n        {\n            tag: \"meta\",\n            selector: \"meta[name='title']\",\n            attribute: \"content\",\n            attrs: {\n                \"name\": \"title\"\n            }\n\n        }\n    ],\n    \"meta:description\": [\n        {\n            tag: \"meta\",\n            selector: \"meta[name='description']\",\n            attribute: \"content\",\n            attrs: {\n                \"name\": \"description\"\n            }\n        }\n    ],\n    \"meta:keywords\": [\n        {\n            tag: \"meta\",\n            selector: \"meta[name='keywords']\",\n            attribute: \"content\",\n            attrs: {\n                \"name\": \"keywords\"\n            }\n        }\n    ],\n    \"link:meta:canonical\": [\n        {\n            tag: \"link\",\n            selector: \"link[rel='canonical']\",\n            attribute: \"href\",\n            attrs: {\n                \"rel\": \"canonical\"\n            }\n        }\n    ],\n    \"meta:robots\": [\n        {\n            tag: \"meta\",\n            selector: \"meta[name='robots']\",\n            attribute: \"content\",\n            attrs: {\n                \"name\": \"robots\"\n            }\n        }\n    ],\n    \"meta:author\": [\n        {\n            tag: \"meta\",\n            selector: \"meta[name='author']\",\n            attribute: \"content\",\n            attrs: {\n                \"name\": \"author\"\n            }\n        }\n    ],\n    \"meta:image\": [\n        {\n            tag: \"meta\",\n            selector: \"meta[name='image']\",\n            attribute: \"content\",\n            attrs: {\n                \"name\": \"image\"\n            }\n        }\n    ],\n    \"meta:og:image\": [\n        {\n            tag: \"meta\",\n            selector: \"meta[property='og:image']\",\n            attribute: \"content\",\n            attrs: {\n                \"property\": \"og:image\"\n            }\n        }\n    ],\n    \"meta:og:title\": [\n        {\n            tag: \"meta\",\n            selector: \"meta[property='og:title']\",\n            attribute: \"content\",\n            attrs: {\n                \"property\": \"og:title\"\n            }\n        }\n    ],\n    \"meta:og:description\": [\n        {\n            tag: \"meta\",\n            selector: \"meta[property='og:description']\",\n            attribute: \"content\",\n            attrs: {\n                \"property\": \"og:description\"\n            }\n        }\n    ],\n    \"meta:og:type\": [\n        {\n            tag: \"meta\",\n            selector: \"meta[property='og:type']\",\n            attribute: \"content\",\n            attrs: {\n                \"property\": \"og:type\"\n            }\n        }\n    ],\n    \"meta:og:url\": [\n        {\n            tag: \"meta\",\n            selector: \"meta[property='og:url']\",\n            attribute: \"content\",\n            attrs: {\n                \"property\": \"og:url\"\n            }\n        }\n    ],\n    \"meta:og:site_name\": [\n        {\n            tag: \"meta\",\n            selector: \"meta[property='og:site_name']\",\n            attribute: \"content\",\n            attrs: {\n                \"property\": \"og:site_name\"\n            }\n        }\n    ],\n    \"meta:og:locale\": [\n        {\n            tag: \"meta\",\n            selector: \"meta[property='og:locale']\",\n            attribute: \"content\",\n            attrs: {\n                \"property\": \"og:locale\"\n            }\n        }\n    ],\n    \"meta:article:published_time\": [\n        {\n            tag: \"meta\",\n            selector: \"meta[property='article:published_time']\",\n            attribute: \"content\",\n            attrs: {\n                \"property\": \"article:published_time\"\n            }\n        }\n    ],\n    \"meta:article:modified_time\": [\n        {\n            tag: \"meta\",\n            selector: \"meta[property='article:modified_time']\",\n            attribute: \"content\",\n            attrs: {\n                \"property\": \"article:modified_time\"\n            }\n        }\n    ],\n    \"meta:article:section\": [\n        {\n            tag: \"meta\",\n            selector: \"meta[property='article:section']\",\n            attribute: \"content\",\n            attrs: {\n                \"property\": \"article:section\"\n            }\n        }\n    ],\n    \"meta:article:tag\": [\n        {\n            tag: \"meta\",\n            selector: \"meta[property='article:tag']\",\n            attribute: \"content\",\n            attrs: {\n                \"property\": \"article:tag\"\n            }\n        }\n    ],\n    \"meta:article:author\": [\n        {\n            tag: \"meta\",\n            selector: \"meta[property='article:author']\",\n            attribute: \"content\",\n            attrs: {\n                \"property\": \"article:author\"\n            }\n        }\n    ],\n    \"meta:article:publisher\": [\n        {\n            tag: \"meta\",\n            selector: \"meta[property='article:publisher']\",\n            attribute: \"content\",\n            attrs: {\n                \"property\": \"article:publisher\"\n            }\n        }\n    ],\n    \"meta:article:image\": [\n        {\n            tag: \"meta\",\n            selector: \"meta[property='article:image']\",\n            attribute: \"content\",\n            attrs: {\n                \"property\": \"article:image\"\n            }\n        }\n    ],\n    \"meta:og:image:width\": [\n        {\n            tag: \"meta\",\n            selector: \"meta[property='og:image:width']\",\n            attribute: \"content\",\n            attrs: {\n                \"property\": \"og:image:width\"\n            }\n        }\n    ],\n    \"meta:og:image:height\": [\n        {\n            tag: \"meta\",\n            selector: \"meta[property='og:image:height']\",\n            attribute: \"content\",\n            attrs: {\n                \"property\": \"og:image:height\"\n            }\n        }\n    ],\n    \"meta:twitter:card\": [\n        {\n            tag: \"meta\",\n            selector: \"meta[name='twitter:card']\",\n            attribute: \"content\",\n            attrs: {\n                \"name\": \"twitter:card\"\n            }\n        }\n    ],\n    \"meta:twitter:label1\": [\n        {\n            tag: \"meta\",\n            selector: \"meta[name='twitter:label1']\",\n            attribute: \"content\",\n            attrs: {\n                \"name\": \"twitter:label1\"\n            }\n        }\n    ],\n    \"meta:twitter:label2\": [\n        {\n            tag: \"meta\",\n            selector: \"meta[name='twitter:label2']\",\n            attribute: \"content\",\n            attrs: {\n                \"name\": \"twitter:label2\"\n            }\n        }\n    ],\n    \"twitter:data1\": [\n        {\n            tag: \"meta\",\n            selector: \"meta[name='twitter:data1']\",\n            attribute: \"content\",\n            attrs: {\n                \"name\": \"twitter:data1\"\n            }\n        }\n    ],\n    \"twitter:data2\": [\n        {\n            tag: \"meta\",\n            selector: \"meta[name='twitter:data2']\",\n            attribute: \"content\",\n            attrs: {\n                \"name\": \"twitter:data2\"\n            }\n        }\n    ],\n    \"link:rel:shortlink\": [\n        {\n            tag: \"meta\",\n            selector: \"meta[name='rel:shortlink']\",\n            attribute: \"content\",\n            attrs: {\n                \"rel\": \"shortlink\"\n            }\n        }\n    ],\n    \"link:rel:alternate\": [\n        {\n            tag: \"meta\",\n            selector: \"meta[name='rel:alternate']\",\n            attribute: \"content\",\n            attrs: {\n                \"rel\": \"alternate\"\n            }\n        }\n    ]\n};"],"names":["ViewTemplates","ViewState","constructor","view","this","_viewRef","_states","_stateIndex","_canUpdateStateByKey","__listeners","Map","__ownProperties","__ownMethods","__setters__","Object","defineProperty","value","key","callback","__subscribe","writable","configurable","enumerable","__unsubscribe","__commitStateChange","index","oldValue","stateKey","listeners","get","forEach","__setState","setValue","__useState","includes","set","log","__updateStateByKey","findIndex","state","warn","__register","__lockUpdateRealState","Error","has","push","length","splice","delete","indexOf","__reset","clear","__toJSON","data","toJSON","toString","JSON","stringify","ViewEngine","path","config","App","isSuperView","_emptyFn","id","init","parent","children","superView","superViewPath","superViewId","hasSuperView","originalViewPath","originalViewId","originalView","hasAwaitData","hasFetchData","fetch","usesVars","hasSections","renderLongSections","hasSectionPreload","hasPrerender","sections","addCSS","removeCSS","resources","userDefined","events","eventIndex","eventHandlers","states","urlPath","isInitlized","wrapperConfig","enable","tag","follow","attributes","templateEngine","wrapTag","followingBlocks","followingConfig","followingIndex","followingScanIndex","followingIDs","followingPrerenderIDs","followingRenderIDs","subscribeStates","childrenConfig","childrenIndex","refreshChildrenIndex","isRendering","isRendered","isMounted","isDestroyed","isScanning","isScanned","isReady","markup","refElements","eventListenerStatus","eventListeners","eventQuickHandles","isVirtualRendering","cachedSections","renderedContent","__scope","isRefreshing","changeStateQueueCount","changedStateKeys","Set","_stateChangePending","loopContext","isCommitedConstructorData","setup","initialize","viewId","master","processDefinedProperties","__SSR_VIEW_ID__","commitConstructorData","definedProps","definedMethods","__props__","prop","bind","entries","setScope","scope","loadServerData","_serverData","result","apply","View","_data","updateVariableData","addEventConfig","eventType","handlers","addEventStack","render","renderFollowIDStart","console","slice","trim","isHtmlString","addXRefViewToRootElements","virtualRender","prerender","virtualPrerender","replaceView","htmlString","container","document","createElement","innerHTML","frag","content","oldElements","querySelectorAll","i","oldElement","newElement","childNodes","parentNode","replaceChild","beforeCreate","call","created","beforeUpdate","updated","beforeInit","afterInit","beforeDestroy","destroyed","beforeMount","mounted","startEventListener","onSuperViewMounted","child","onParentMounted","size","block","beforeUnmount","beforeUnmounted","unmounted","stopEventListener","onSuperViewUnmounted","onParentUnmounted","destroy","element","removeChild","refresh","Array","from","setAttribute","str","test","renderPlaceholder","className","KEYS","VIEW_ID","showError","error","map","section","VIEW_SECTION_REF","join","showErrorScan","resetOriginalView","ejectOriginalView","remove","insertResources","resource","querySelector","uuid","attrs","body","appendChild","head","removeResources","__showError","__section","name","type","__yield","defaultValue","yield","__yieldContent","yieldContent","__execute","args","execute","__text","text","__follow","stateKeys","renderBlock","renderFollowingBlockScan","renderFollowingBlock","__block","addBlock","__include","childParams","childConfig","ssrViewManager","getInstance","childData","$include","__scan","__includeif","exists","__includewhen","condition","__extends","superViewConfig","superViewOfChildren","find","scan","superViewData","$extends","__setLoopContext","LoopContext","setCount","__resetLoopContext","freeze","__foreach","list","isArray","__setupLoopContext","setType","item","setCurrentTimes","count","keys","following","__scanDOMElements","__setupFollowingBlocks","__storeChildrenReferences","elements","VIEW_WRAPPER","el","first","nodes","filter","node","nodeType","Node","ELEMENT_NODE","__attachEventHandlers","followConfig","originData","viewInstance","extendView","setSuperView","setOriginalView","parentData","include","setParent","addChild","eventID","__addEventConfig","setEventConfig","eventObjectList","needDeleted","eventMap","selector","parsedHandlers","parseEventHandlerFunctions","handler","event","returnValue","handlerFn","defaultPrevented","preventDefault","stopPropagation","addEventListener","removeEventListener","clearOrphanedEventData","handlerObj","handlerName","params","func","parseHandlerFunction","parseEventHandlerParams","funcName","window","param","parseEventHandlerObject","object","parsedObject","wrapattr","startWrapper","endWrapper","useBlock","mountBlock","subscribeBlock","followBlock","engine","every","renderID","onFollowUpdating","setTimeout","onFollowUpdated","onStateChange","add","Promise","resolve","then","_processStateChanges","changedKeys","_notifyStateChanges","subscribe","some","childScope","onStateDataChanges","stateChangeData","setApp","app","setUrlPath","c","updateData","__data","updateVariableItem","updateVariableItemData","setIsSuperView","reset","basePrefix","ATTR","PREFIX","BASE","YIELD","CLICK","DBLCLICK","MOUSEDOWN","MOUSEUP","MOUSEOVER","MOUSEOUT","MOUSEMOVE","MOUSEENTER","MOUSELEAVE","WHEEL","AUXCLICK","KEYDOWN","KEYUP","KEYPRESS","INPUT","CHANGE","SUBMIT","RESET","INVALID","SEARCH","FOCUS","BLUR","FOCUSIN","FOCUSOUT","SELECT","SELECTSTART","SELECTIONCHANGE","TOUCHSTART","TOUCHMOVE","TOUCHEND","TOUCHCANCEL","DRAGSTART","DRAG","DRAGEND","DRAGENTER","DRAGLEAVE","DRAGOVER","DROP","PLAY","PAUSE","ENDED","LOADSTART","LOADEDDATA","LOADEDMETADATA","CANPLAY","CANPLAYTHROUGH","WAITING","SEEKING","SEEKED","RATECHANGE","DURATIONCHANGE","VOLUMECHANGE","SUSPEND","STALLED","PROGRESS","EMPTIED","ENCRYPTED","WAKEUP","LOAD","UNLOAD","BEFOREUNLOAD","RESIZE","SCROLL","ORIENTATIONCHANGE","VISIBILITYCHANGE","PAGEHIDE","PAGESHOW","POPSTATE","HASHCHANGE","ONLINE","OFFLINE","DOMCONTENTLOADED","READYSTATECHANGE","ERROR","ABORT","CONTEXTMENU","ANIMATIONSTART","ANIMATIONEND","ANIMATIONITERATION","TRANSITIONSTART","TRANSITIONEND","TRANSITIONRUN","TRANSITIONCANCEL","POINTERDOWN","POINTERUP","POINTERMOVE","POINTEROVER","POINTEROUT","POINTERENTER","POINTERLEAVE","POINTERCANCEL","GOTPOINTERCAPTURE","LOSTPOINTERCAPTURE","FULLSCREENCHANGE","FULLSCREENERROR","COPY","CUT","PASTE","GAMEPADCONNECTED","GAMEPADDISCONNECTED","BATTERYCHARGINGCHANGE","BATTERYLEVELCHANGE","DEVICEORIENTATION","DEVICEMOTION","DEVICELIGHT","DEVICEPROXIMITY","WEBGLCONTEXTLOST","WEBGLCONTEXTRESTORED","VIEW","VIEW_REF","VIEW_RESOURCE","VIEW_STYLE","YIELD_ATTR","YIELD_CONTENT","YIELD_CHILDREN","YIELD_SUBSCRIBE","YIELD_SUBSCRIBE_ATTR","YIELD_SUBSCRIBE_CONTENT","YIELD_SUBSCRIBE_CHILDREN","CLASSNAME","VIEW_ERROR","VIRTUAL_CONTAINER","SECTION_ERROR","prefix","toUpperCase","toLowerCase","replace","FORBIDDEN_KEYS","SEOTagConfig","attribute"],"sourceRoot":""}